- en: Chapter 3. Incoming Mail with POP and IMAP
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第3章。使用POP和IMAP接收邮件
- en: 'Now that you have a functioning e-mail server, the next stage is to give users
    access to their e-mail. In this chapter, you will learn the following:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您有一个运行的电子邮件服务器，下一阶段是让用户访问他们的电子邮件。在本章中，您将学习以下内容：
- en: What POP and IMAP are, and how to choose which of them you should implement
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 什么是POP和IMAP，以及如何选择应该实施哪种
- en: How to install and configure Courier-IMAP, which can provide both POP and IMAP
    functionality
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何安装和配置Courier-IMAP，它可以提供POP和IMAP功能
- en: How to configure e-mail servers to be accessible to clients
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何配置电子邮件服务器以供客户端访问
- en: How to configure popular e-mail clients to use the services provided by your
    e-mail server
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何配置流行的电子邮件客户端以使用电子邮件服务器提供的服务
- en: Choosing between POP and IMAP
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在POP和IMAP之间进行选择
- en: Postfix will receive e-mail and deliver it to the user's inbox, but additional
    software is required to allow users to read their e-mail with ease. There are
    two standards for retrieval of e-mail from a host. The first is called **Post
    Office Protocol** (**POP**). POP3 is the most commonly used version of POP. This
    is normally used to download e-mail from the server, store it in a client application,
    and remove the e-mail from the server. This is often used by Internet Service
    Providers. The e-mail is subsequently manipulated by the client application, for
    example, Windows Live Mail or Mozilla Thunderbird.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: Postfix将接收电子邮件并将其传递到用户的收件箱，但需要其他软件才能让用户轻松阅读他们的电子邮件。有两种从主机检索电子邮件的标准。第一种称为**邮局协议**（**POP**）。POP3是最常用的POP版本。通常用于从服务器下载电子邮件，将其存储在客户端应用程序中，并从服务器中删除电子邮件。这通常由互联网服务提供商使用。然后，电子邮件由客户端应用程序进行操作，例如Windows
    Live Mail或Mozilla Thunderbird。
- en: The second protocol is called **Internet Message Access Protocol** (**IMAP**).The
    IMAP system is usually used when you want a copy of each e-mail to stay on the
    server. IMAP allows users to create folders for e-mail and to move or copy e-mail
    between the folders. The client application accesses the e-mail on the server,
    but does not have to store it on the client machine.The e-mail server must be
    able to store all of the e-mails for all of its users, and the amount of data
    will generally grow larger over time. Users rarely delete e-mail. Therefore, IMAP
    is more frequently used in large organizations with centralized IT facilities.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 第二个协议称为**Internet Message Access Protocol**（**IMAP**）。当您希望每封电子邮件都保留在服务器上时，通常使用IMAP系统。IMAP允许用户为电子邮件创建文件夹，并在文件夹之间移动或复制电子邮件。客户端应用程序访问服务器上的电子邮件，但不必将其存储在客户端机器上。电子邮件服务器必须能够为所有用户存储所有电子邮件，并且数据量通常会随着时间的推移而增加。用户很少删除电子邮件。因此，在具有集中式IT设施的大型组织中更频繁地使用IMAP。
- en: A program called **e-mail client** handles retrieving mail from a mail server
    on behalf of a user, and the program that the e-mail client talks to is called
    an **e-mail server**. There are many POP3 and IMAP servers. Some perform only
    one of the tasks. The Courier-IMAP suite of software contains both, a POP3 and
    an IMAP server, and is covered in detail in this chapter.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 一个名为**电子邮件客户端**的程序代表用户从邮件服务器检索邮件，电子邮件客户端与之通信的程序称为**电子邮件服务器**。有许多POP3和IMAP服务器。有些只执行其中一项任务。Courier-IMAP软件套件包含了一个POP3和一个IMAP服务器，并在本章中进行了详细介绍。
- en: 'Courier-IMAP operates by accessing the `maildir` of the user. An overview of
    the operation is shown in the following image:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: Courier-IMAP通过访问用户的`maildir`来运行。操作概述如下图所示：
- en: '![Choosing between POP and IMAP](img/8648_03_01.jpg)'
  id: totrans-11
  prefs: []
  type: TYPE_IMG
  zh: '![在POP和IMAP之间进行选择](img/8648_03_01.jpg)'
- en: Downloading and installing Courier-IMAP
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载和安装Courier-IMAP
- en: '**Courier** is a suite of programs and includes a full-fledged MTA. This book
    assumes that the MTA used is **Postfix**. It is important that only the POP3 and
    IMAP components of Courier are installed and configured—an e-mail system would
    be very unstable if there were two MTAs operating at once.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '**Courier**是一套程序，包括一个完整的MTA。本书假定使用的MTA是**Postfix**。重要的是只安装和配置Courier的POP3和IMAP组件——如果同时有两个MTA运行，电子邮件系统将非常不稳定。'
- en: Note
  id: totrans-14
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The term "Courier" is often used to refer to the complete suite of Courier software,
    including the MTA. Courier-IMAP is normally used to refer to the IMAP and POP3
    portions of the server. The **Courier Authentication Library** is another Courier
    module that is required by Courier-IMAP. Ensure that you install only the Courier
    Authentication Library and Courier-IMAP.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 术语“Courier”通常用于指代Courier软件的完整套件，包括MTA。Courier-IMAP通常用于指代服务器的IMAP和POP3部分。**Courier
    Authentication Library**是Courier-IMAP所需的另一个Courier模块。确保只安装Courier Authentication
    Library和Courier-IMAP。
- en: There are a couple of ways to install Courier-IMAP. Courier-IMAP **Redhat Package
    Managers** (**RPMs**) for several different distributions of Linux are available.
    These will either be available from the manufacturer of the distribution, or may
    have been built by a third party, typically an enthusiast or developer of Courier.
    If your Linux distribution is based on RPM, but a package of Courier-IMAP is not
    available in RPM, then it has to be built from source.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 有几种安装Courier-IMAP的方法。Courier-IMAP **Redhat Package Managers** (**RPMs**)适用于多种不同的Linux发行版。这些将从发行版的制造商处获得，或者可能已经由第三方构建，通常是Courier的爱好者或开发人员。如果您的Linux发行版基于RPM，但RPM中没有Courier-IMAP的软件包，则必须从源代码构建。
- en: If your distribution of Linux is based on the Debian software package format,
    a package of Courier-IMAP will probably be available. If not, then Courier-IMAP
    will have to be built from source.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您的Linux发行版基于Debian软件包格式，则可能会提供Courier-IMAP的软件包。如果没有，则Courier-IMAP必须从源代码构建。
- en: Installing Courier-IMAP from a distribution repository
  id: totrans-18
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 从发行库安装Courier-IMAP
- en: It is best to use a package built by your Linux distributor, if at all possible.
    Any package they provide should be stable, perform well, and use the default paths
    and file locations to suit the rest of your software. If your distribution has
    a package manager, then you should use that as it will install any packages that
    Courier-IMAP requires automatically.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 最好使用Linux发行商构建的软件包，如果可能的话。他们提供的任何软件包都应该是稳定的，性能良好，并且使用默认路径和文件位置以适应其余软件。如果您的发行版有软件包管理器，那么您应该使用它，因为它会自动安装Courier-IMAP需要的任何软件包。
- en: It is important to get a package that matches the distribution in use. Packages
    meant for a different distribution may not work correctly and may also make existing
    software unstable.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 重要的是要获得与正在使用的发行版匹配的软件包。针对不同发行版的软件包可能无法正常工作，并且可能使现有软件不稳定。
- en: Installing Courier-IMAP from RPM
  id: totrans-21
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 从RPM安装Courier-IMAP
- en: It is important to get an RPM that matches the distribution in use. An RPM meant
    for another distribution may not work correctly, and may also make existing software
    unstable.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 重要的是要获得与正在使用的发行版匹配的RPM。针对其他发行版的RPM可能无法正常工作，并且可能使现有软件不稳定。
- en: If your Linux distribution includes a graphical frontend to manage packages
    (such as gnorpm), it is best to use that because it will manage any dependencies
    between packages automatically.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您的Linux发行版包含用于管理软件包的图形前端（例如gnorpm），最好使用它，因为它会自动管理软件包之间的任何依赖关系。
- en: To locate an RPM of Courier-IMAP, first check if one is provided by your Linux
    distributor. If so, then download and use it. If the distributor does not provide
    a package, it is possible that a suitable package may be provided by another organization
    or individual. To check this, search the Web. There is a database of RPMs available
    at [www.rpmfind.net](http://www.rpmfind.net), and searching for `courier-imap`
    coupled with the name of the distribution (for example, Fedora or Mandriva) will
    locate any suitable packages. It is best to use a package designed for a particular
    version of a distribution. For example, a package for Mandriva Linux 2008.1 should
    not be used for Mandriva Linux 2009.1\. If you are not sure then it is best to
    install Courier-IMAP from source as described in the next section.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 要查找Courier-IMAP的RPM，请首先检查Linux发行商是否提供了该软件包。如果是这样，请下载并使用它。如果分销商没有提供软件包，则可能由其他组织或个人提供适当的软件包。要检查这一点，请搜索网络。在[www.rpmfind.net](http://www.rpmfind.net)上有一个RPM数据库，搜索`courier-imap`和发行版的名称（例如Fedora或Mandriva）将找到任何合适的软件包。最好使用设计用于特定版本发行版的软件包。例如，Mandriva
    Linux 2008.1的软件包不应该用于Mandriva Linux 2009.1。如果不确定，则最好按照下一节中的说明从源代码安装Courier-IMAP。
- en: If you are not able to use a frontend to RPM, then to install Courier-IMAP from
    RPM, firstly download the RPM and change to the directory containing the file
    using the command prompt. As root, use the `rpm` command to install the RPM.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 如果无法使用RPM的前端，则首先下载RPM并使用命令提示符切换到包含文件的目录，然后以root身份使用`rpm`命令安装RPM。
- en: '[PRE0]'
  id: totrans-26
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The RPM command may fail if all of the prerequisite software is not present.
    In this case, the output will name the software required. The appropriate package
    can be downloaded and installed using the `rpm` command as seen earlier. Once
    all the prerequisite software has been installed, you can install Courier-IMAP
    using the `rpm` command as explained before.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 如果缺少所有先决条件软件，则RPM命令可能会失败。在这种情况下，输出将列出所需的软件。可以使用之前看到的`rpm`命令下载并安装适当的软件包。安装了所有先决条件软件后，可以使用之前解释的`rpm`命令安装Courier-IMAP。
- en: 'If the `rpm` command was used to install Courier-IMAP, it can also be used
    to uninstall it. The command will be as follows:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 如果使用`rpm`命令安装Courier-IMAP，则也可以使用它来卸载。命令如下：
- en: '[PRE1]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Installing Courier-IMAP using the Debian package format
  id: totrans-30
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用Debian软件包格式安装Courier-IMAP
- en: If your Linux distribution includes a graphical frontend to manage packages
    (such as gnorpm), then you can use that, if you are comfortable doing so.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您的Linux发行版包含用于管理软件包的图形前端（例如gnorpm），则可以使用它，如果您感到舒适的话。
- en: 'You can use the following command on any Debian-based system to install Courier-IMAP:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在任何基于Debian的系统上使用以下命令来安装Courier-IMAP：
- en: '[PRE2]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Installing Courier-IMAP from source
  id: totrans-34
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 从源代码安装Courier-IMAP
- en: Installing Courier-IMAP from source is not a difficult task on a modern Linux
    distribution. On older versions of Linux, and on other UNIX platforms such as
    AIX, Solaris, and HP-UX, problems may arise, particularly if the rest of the system's
    software is not up to date.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 在现代Linux发行版上从源代码安装Courier-IMAP并不是一项困难的任务。在较旧版本的Linux以及其他UNIX平台（如AIX、Solaris和HP-UX）上，可能会出现问题，特别是如果系统的其余软件不是最新的。
- en: Prerequisites
  id: totrans-36
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 先决条件
- en: 'The following are the prerequisites to install Courier-IMAP:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 安装Courier-IMAP需要满足以下先决条件：
- en: '**A working C++ compiler:** We recommend the **GNU C++ Compiler**, which is
    a part of the **GNU Compiler Collection** (**GCC**), which in turn is part of
    virtually every Linux distribution and is available free for most platforms. If
    an RPM or other package of GCC is available (and it almost certainly will be),
    it should be used in preference to building GCC from source.'
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**一个可用的C++编译器：**我们建议使用**GNU C++编译器**，它是**GNU编译器集合**（**GCC**）的一部分，又是几乎每个Linux发行版的一部分，并且大多数平台都可以免费获得。如果有GCC的RPM或其他软件包（几乎肯定会有），应优先使用它，而不是从源代码构建GCC。'
- en: '**A** `make` **utility:** We recommend the GNU `make` utility, which will be
    available with most Linux distributions or can be downloaded from [http://gcc.gnu.org/](http://gcc.gnu.org/).'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**一个** `make` **实用程序：**我们建议使用GNU的`make`实用程序，它将在大多数Linux发行版中提供，或者可以从[http://gcc.gnu.org/](http://gcc.gnu.org/)下载。'
- en: '**The GNU linker:** This is available at [www.gnu.org/software/binutils/](http://www.gnu.org/software/binutils/).'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**GNU链接器：**可在[www.gnu.org/software/binutils/](http://www.gnu.org/software/binutils/)上获得。'
- en: '**GNU** Libtool: This is available at[www.gnu.org/software/libtool/](http://www.gnu.org/software/libtool/).'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**GNU** Libtool：可在[www.gnu.org/software/libtool/](http://www.gnu.org/software/libtool/)上获得。'
- en: '**Berkeley DB library or gdbm library:** These are libraries that allow programs
    to make databases in files. Again, these should be available in packaged form,
    but can be downloaded from [www.sleepycat.com/](http://www.sleepycat.com/) and
    [http://www.gnu.org/software/gdbm/gdbm.html](http://www.gnu.org/software/gdbm/gdbm.html)
    respectively. One or both of these will almost certainly be installed already.'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Berkeley DB库或gdbm库：**这些库允许程序在文件中创建数据库。同样，这些库应该以打包形式提供，但也可以从[www.sleepycat.com/](http://www.sleepycat.com/)和[http://www.gnu.org/software/gdbm/gdbm.html](http://www.gnu.org/software/gdbm/gdbm.html)下载。这两者中的一个或两者几乎肯定已经安装。'
- en: The Courier-IMAP source code.
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Courier-IMAP源代码。
- en: To install Courier-IMAP successfully, all these prerequisites must be installed
    first.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 要成功安装Courier-IMAP，必须首先安装所有这些先决条件。
- en: Building the Courier Authentication Library
  id: totrans-45
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 构建Courier身份验证库
- en: There are two phases to installing Courier-IMAP. First, the Courier Authentication
    Library, often called `Courier-authlib`, must be built. Once this is done, Courier-IMAP
    can be installed.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 安装Courier-IMAP有两个阶段。首先，必须构建Courier身份验证库，通常称为`Courier-authlib`。完成此操作后，可以安装Courier-IMAP。
- en: Note
  id: totrans-47
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Although instructions to install Courier-IMAP are given here, it is always a
    good idea to read the `README, READ.ME` or `INSTALL` files that are supplied with
    the package. If problems are encountered while installing the software, then always
    check that the problem is not mentioned in any of the supplied documentation.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然这里提供了安装Courier-IMAP的说明，但是阅读随包提供的`README, READ.ME`或`INSTALL`文件总是一个好主意。如果在安装软件时遇到问题，请始终检查问题是否在任何提供的文档中提到。
- en: The `Courier-authlib` source can be downloaded from [www.courier-mta.org/authlib/](http://www.courier-mta.org/authlib/).
    As with many open source packages, the Courier Authentication Library uses a configuration
    script to detect system capabilities, then uses the `make` command to build and
    install the software.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: '`Courier-authlib`源可以从[www.courier-mta.org/authlib/](http://www.courier-mta.org/authlib/)下载。与许多开源软件包一样，Courier身份验证库使用配置脚本来检测系统功能，然后使用`make`命令来构建和安装软件。'
- en: 'To build the Courier Authentication Library, enter the following commands.
    You should see responses similar to the following:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 要构建Courier身份验证库，请输入以下命令。您应该看到类似以下的响应：
- en: '[PRE3]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: After the commands execute successfully, the Courier Authentication Library
    will be installed. Before it can be started, some configuration is required.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 命令成功执行后，Courier身份验证库将被安装。在启动之前，需要进行一些配置。
- en: 'Note that if you are using Red Hat Linux or one of its derivatives such as
    Fedora Core or CentOS, then the `./configure` script detects this and suggests
    that you use an RPM or the `--with-redhat` parameter:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，如果您使用的是Red Hat Linux或其衍生产品之一，如Fedora Core或CentOS，则`./configure`脚本会检测到这一点，并建议您使用RPM或`--with-redhat`参数：
- en: '[PRE4]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: In this case, pass the `--with-redhat` parameter to `./configure:`
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，将`--with-redhat`参数传递给`./configure`：
- en: '[PRE5]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Configuring the Courier Authentication Library
  id: totrans-57
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 配置Courier身份验证库
- en: Several decisions need to be made once the authentication library is installed.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦安装了身份验证库，就需要做出一些决定。
- en: 'The Courier Authentication Library provides the system administrator with flexibility
    in authenticating users. Authentication is when a user proves his/her identity,
    typically by providing a valid username and corresponding password. The following
    authentication methods are available:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: Courier身份验证库为系统管理员提供了在对用户进行身份验证时的灵活性。身份验证是用户通过提供有效的用户名和相应密码来证明其身份的过程。提供以下身份验证方法：
- en: '| Authentication method | Description |'
  id: totrans-60
  prefs: []
  type: TYPE_TB
  zh: '| 身份验证方法 | 描述 |'
- en: '| --- | --- |'
  id: totrans-61
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| `authshadow` | By default, most Linux distributions hold user passwords in
    the `/etc/shadow` system file. Using `authshadow` for authentication validates
    passwords against system accounts. This is suitable only when users have system
    accounts, that is, they can log onto the machine using telnet or `ssh`. |'
  id: totrans-62
  prefs: []
  type: TYPE_TB
  zh: '| `authshadow` | 默认情况下，大多数Linux发行版将用户密码存储在`/etc/shadow`系统文件中。使用`authshadow`进行身份验证会验证系统帐户的密码。只有当用户拥有系统帐户时，即可以使用telnet或`ssh`登录到计算机时，才适用。
    |'
- en: '| `authpwd` | On older systems, passwords were stored in the `/etc/passwd`
    file. The `authpwd` module allows users to be authenticated against their system
    password. Again, users must have system accounts. |'
  id: totrans-63
  prefs: []
  type: TYPE_TB
  zh: '| `authpwd` | 在旧系统上，密码存储在`/etc/passwd`文件中。 `authpwd`模块允许用户根据其系统密码进行身份验证。同样，用户必须拥有系统帐户。'
- en: '| `authuserdb` | Unlike `authshadow` where each user needs a system account,
    `authuserdb` stores user details separately from the system accounts. This allows
    a **virtual mailbox** facility, where users can be defined without having real
    accounts on the machine. A number of scripts are used to administer the database,
    which is usually held in `/etc/userdb`. (Many distributions place it in `/etc/courier/authlib/userdb.)`
    |'
  id: totrans-64
  prefs: []
  type: TYPE_TB
  zh: '| `authuserdb` | 与`authshadow`不同，每个用户都需要一个系统帐户，`authuserdb`将用户详细信息存储在系统帐户之外。这允许**虚拟邮箱**功能，其中可以定义用户，而无需在计算机上拥有真实帐户。一些脚本用于管理数据库，通常保存在`/etc/userdb`中。（许多发行版将其放在`/etc/courier/authlib/userdb`中。）'
- en: '| `authmysql` | This is similar to `authuserdb`, but uses a MySQL database
    instead of the files used in `authuserdb`. MySQL is a popular relational database
    provided by most Linux distributions, and offers both advantages and disadvantages
    over the other methods. Using a relational database such as MySQL adds complexity
    to an e-mail server, but it is possible that the authentication will be quicker
    and a relational database will allow the data to be shared with other applications
    (if required). |'
  id: totrans-65
  prefs: []
  type: TYPE_TB
  zh: '| `authmysql` | 这类似于`authuserdb`，但是使用MySQL数据库而不是`authuserdb`中使用的文件。 MySQL是大多数Linux发行版提供的流行关系数据库，并且相对于其他方法，它既有优势又有劣势。使用诸如MySQL之类的关系数据库会增加电子邮件服务器的复杂性，但可能会使身份验证更快，并且关系数据库将允许数据与其他应用程序共享（如果需要）。'
- en: '| `authpam` | Authentication is provided by the **Programmable Access Method
    (PAM)** library. PAM is a commonly used library and is provided by most Linux
    distributions. PAM is flexible, and can in turn authenticate users from a variety
    of sources, including the system password database (typically the `/etc/passwd`
    file). |'
  id: totrans-66
  prefs: []
  type: TYPE_TB
  zh: '| `authpam` | 身份验证由**可编程访问方法（PAM）**库提供。PAM是一个常用的库，大多数Linux发行版都提供。PAM是灵活的，可以从各种来源对用户进行身份验证，包括系统密码数据库（通常是`/etc/passwd`文件）。|'
- en: '| `authcustom` | This allows the system administrators to develop their own
    custom authentication method. |'
  id: totrans-67
  prefs: []
  type: TYPE_TB
  zh: '| `authcustom` | 这允许系统管理员开发自己的自定义身份验证方法。 |'
- en: 'Choosing an authentication method can be a difficult decision. Here are some
    guidelines:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 选择身份验证方法可能是一个困难的决定。以下是一些指导原则：
- en: If all users have system accounts, then `authshadow, authpwd`, or `authpam`
    can be used. If PAM is already installed and configured, it should be used in
    preference to the others.
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果所有用户都有系统帐户，则可以使用`authshadow、authpwd`或`authpam`。如果PAM已安装和配置，应优先使用PAM而不是其他方法。
- en: If a virtual e-mail system is required, use either `authdb` or `authmysql`.
    For small sites, there is little advantage in choosing `authmysql` over `authdb`.
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果需要虚拟电子邮件系统，请使用`authdb`或`authmysql`。对于小型站点，选择`authmysql`而不是`authdb`没有太大优势。
- en: In this book, only simple authentication with `authshadow` or `authpwd` is covered.
    Although if PAM is installed and configured, no additional configuration will
    be required. `authuserdb` and `authmysql` require further configuration, which
    is described in the documentation for the authentication library.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书中，仅涵盖了使用`authshadow`或`authpwd`进行简单身份验证。虽然如果安装和配置了PAM，则不需要额外的配置。`authuserdb`和`authmysql`需要进一步配置，这在身份验证库的文档中有描述。
- en: The `/usr/local/etc/courier/authlib` directory contains the configuration files
    for the Courier Authentication Library. For security purposes, it's best to make
    the whole directory readable only by users who are members of the `mail` group.
    The default `authdaemonrc` file can be copied from the installation directory.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: '`/usr/local/etc/courier/authlib`目录包含Courier身份验证库的配置文件。出于安全考虑，最好将整个目录设置为仅由属于`mail`组的用户可读。默认的`authdaemonrc`文件可以从安装目录复制过来。'
- en: '[PRE6]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'To complete the configuration as the root user, edit the `/usr/local/etc/courier/authlib/authdaemonrc`
    file and alter the following entries:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 要以root用户身份完成配置，请编辑`/usr/local/etc/courier/authlib/authdaemonrc`文件，并更改以下条目：
- en: '[PRE7]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: In the line beginning with `authmodulelist`, enter the module(s) that you wish
    to use.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 在以`authmodulelist`开头的行中，输入您希望使用的模块。
- en: The `daemons=` line lists how many processes should run, waiting to authenticate
    users. Unless there are a very high number of users, a value between `3` to `5`
    should suffice. The larger the number of daemons, the more memory will be used
    by the authentication library. There will also be less memory available for other
    processes, which may affect overall system performance.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: '`daemons=`行列出了应该运行多少个进程，等待对用户进行身份验证。除非有非常多的用户，否则`3`到`5`之间的值应该足够了。守护进程的数量越多，身份验证库使用的内存就越多。其他进程可用的内存也会减少，这可能会影响整个系统的性能。'
- en: 'The `authdaemonvar` line lists where the Courier Authentication Library places
    its runtime files, in particular the socket used to connect to it. The directory
    listed here (in this example it is `/var/lib/courier/authdaemon)` should exist
    and be only readable by the root user. Use the following commands as `root` to
    create the directory:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: '`authdaemonvar`行列出了Courier身份验证库放置其运行时文件的位置，特别是用于连接的套接字。此处列出的目录（在本例中是`/var/lib/courier/authdaemon`）应存在，并且只能由root用户读取。使用以下命令作为`root`创建目录：'
- en: '[PRE8]'
  id: totrans-79
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: For security purposes, it's best to make the `authdaemonrc` file readable only
    by certain users.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 出于安全考虑，最好将`authdaemonrc`文件设置为只有特定用户可读。
- en: '[PRE9]'
  id: totrans-81
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: The authentication daemon needs to be started when the system boots. Typically,
    a script is placed in `/etc/init.d/` to enable easy starting and stopping of a
    daemon. A sample script is included with the source of the authentication library
    in `/courier-authlib.sysvinit`. This file should be placed in `/etc/init.d`.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 系统启动时需要启动身份验证守护程序。通常，会在`/etc/init.d/`中放置一个脚本，以便轻松启动和停止守护程序。在身份验证库的源代码中包含了一个示例脚本`/courier-authlib.sysvinit`。应将此文件放置在`/etc/init.d`中。
- en: '[PRE10]'
  id: totrans-83
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'The service can, in future, be started and stopped with the following commands:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 将来，可以使用以下命令启动和停止服务：
- en: '[PRE11]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Initially, the daemon should be run directly from the command line. If there
    are any errors, they will be displayed.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 最初，应该直接从命令行运行守护程序。如果有任何错误，它们将被显示出来。
- en: '[PRE12]'
  id: totrans-87
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: In the example just shown, the `/usr/local/etc/authlib/authdaemonrc` file was
    missing because the default `authdaemonrc` file was not copied from the installation
    directory.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 在刚刚显示的示例中，`/usr/local/etc/authlib/authdaemonrc`文件丢失，因为默认的`authdaemonrc`文件没有从安装目录复制过来。
- en: If the service was started correctly, it can be stopped by passing the `stop`
    parameter.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 如果服务已正确启动，可以通过传递`stop`参数来停止服务。
- en: '[PRE13]'
  id: totrans-90
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Consult the documentation for distribution to get the service to start automatically
    when Linux boots. On Red Hat systems, the `service` command can be used to configure
    a service to start automatically.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 请参考发行版的文档，以便在Linux启动时自动启动服务。在Red Hat系统上，可以使用`service`命令来配置服务自动启动。
- en: '[PRE14]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: For other distributions, the `chkconfig` command might be used.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 对于其他发行版，可能会使用`chkconfig`命令。
- en: '[PRE15]'
  id: totrans-94
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Resolving errors
  id: totrans-95
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 解决错误
- en: Errors can be generated at each phase of the build. Errors while running the
    `configure` script will probably relate to a missing dependency. Check the `README`
    and `INSTALL` files supplied with the software and ensure that all dependencies
    are installed. If the problem is not obvious from the error message generated,
    an Internet search for the exact error message may find a solution.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 在构建的每个阶段都可能会产生错误。在运行`configure`脚本时出现错误可能与缺少的依赖关系有关。检查软件提供的`README`和`INSTALL`文件，并确保安装了所有依赖项。如果问题不明显，可以通过互联网搜索确切的错误消息来找到解决方案。
- en: An error at build time is unusual, as most errors will be prevented by the `configure`
    script. Again, the error message should provide a good clue to the source of the
    error and use of an Internet search engine may pay off.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 在构建时出现错误是不太常见的，因为大多数错误都会被 `configure` 脚本阻止。同样，错误消息应该提供关于错误来源的良好线索，并且使用互联网搜索引擎可能会有所帮助。
- en: Runtime errors are generally due to erroneous configuration. There are few configuration
    options with the Courier Authentication Library, but errors can occur.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 运行时错误通常是由于错误的配置。Courier Authentication Library 中有一些配置选项，但可能会出现错误。
- en: 'If an answer can''t be found, there is a Courier mailing list that can be approached
    for help. As always, first search list archives for your problem and consult the
    FAQ. For Courier-IMAP, the mailing list is at [http://lists.sourceforge.net/lists/listinfo/courier-imap/](http://lists.sourceforge.net/lists/listinfo/courier-imap/),
    searchable list archives are available at: [http://sourceforge.net/mailarchive/forum.php?forum_id=7307/](http://sourceforge.net/mailarchive/forum.php?forum_id=7307/),
    and the FAQ is available at [http://www.courier-mta.org/FAQ.html](http://www.courier-mta.org/FAQ.html).'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 如果找不到答案，可以向 Courier 邮件列表寻求帮助。与往常一样，首先搜索列表存档以寻求帮助，并查阅常见问题解答。对于 Courier-IMAP，邮件列表位于
    [http://lists.sourceforge.net/lists/listinfo/courier-imap/](http://lists.sourceforge.net/lists/listinfo/courier-imap/)，可搜索的列表存档位于：[http://sourceforge.net/mailarchive/forum.php?forum_id=7307/](http://sourceforge.net/mailarchive/forum.php?forum_id=7307/)，常见问题解答位于
    [http://www.courier-mta.org/FAQ.html](http://www.courier-mta.org/FAQ.html)。
- en: Building Courier-IMAP
  id: totrans-100
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 构建 Courier-IMAP
- en: The Courier-IMAP source code is available in a tarball a package of all the
    files, similar to a ZIP file. This can be downloaded from [http://www.courier-mta.org/imap/](http://www.courier-mta.org/imap/),
    but be careful to download the source for Courier-IMAP and not for the Courier
    MTA.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: Courier-IMAP 源代码以一个 tarball 的形式提供，其中包含所有文件，类似于 ZIP 文件。可以从 [http://www.courier-mta.org/imap/](http://www.courier-mta.org/imap/)
    下载，但要小心下载 Courier-IMAP 的源代码，而不是 Courier MTA 的源代码。
- en: Note
  id: totrans-102
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Although details are given here on how to install Courier-IMAP, it is always
    a good idea to read the `README, READ.ME` or `INSTALL` files that are supplied
    with the package. If problems are encountered when installing the software, always
    check that the problem is not mentioned in any of the supplied documentation.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管这里提供了有关如何安装 Courier-IMAP 的详细信息，但始终建议阅读随软件包提供的 `README, READ.ME` 或 `INSTALL`
    文件。如果在安装软件时遇到问题，请始终检查所提供的文档中是否提到了该问题。
- en: To install Courier-IMAP, a few commands must be entered. As with much software
    provided in source form, a configuration script is run first. The configuration
    script checks the software installed on our machine and configures the software
    so that it will build correctly.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 要安装 Courier-IMAP，必须输入一些命令。与大多数以源代码形式提供的软件一样，首先运行配置脚本。配置脚本检查我们的计算机上安装的软件，并配置软件以便正确构建。
- en: When Courier-IMAP is used as an IMAP server, by default it assumes that its
    clients are going to follow the IMAP standard exactly. Unfortunately this is generally
    not the case and, if Courier-IMAP expected the clients to conform to the IMAP
    standard exactly, mail may not be delivered to the e-mail client. The Courier-IMAP
    developers recognize this, and have built the capability to work with non-standard
    clients by passing the `--enable-workarounds-for-imap-client-bugs` flag to the
    configure script.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 当 Courier-IMAP 用作 IMAP 服务器时，默认情况下假定其客户端将严格遵循 IMAP 标准。不幸的是，这通常不是情况，如果 Courier-IMAP
    期望客户端严格遵循 IMAP 标准，可能无法将邮件传递到电子邮件客户端。Courier-IMAP 的开发人员意识到了这一点，并通过将 `--enable-workarounds-for-imap-client-bugs`
    标志传递给配置脚本来构建与非标准客户端一起工作的能力。
- en: Courier-IMAP includes a special `check` functionality while building it. Unfortunately,
    using `--enable-workarounds-for-imap-client-bugs` prevents the check from working
    successfully. As the `check` functionality is useful, we will build the software
    twice. First without the `--enable-workarounds-for-imap-client-bugs`, then run
    `check`, and then build again with the flag, and install the software.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: Courier-IMAP 在构建时包含一个特殊的 `check` 功能。不幸的是，使用 `--enable-workarounds-for-imap-client-bugs`
    会阻止检查成功运行。由于 `check` 功能很有用，我们将软件构建两次。首先不使用 `--enable-workarounds-for-imap-client-bugs`
    构建，然后运行 `check`，然后再次使用该标志构建并安装软件。
- en: To build Courier-IMAP, enter the following commands. Choose a suitable directory
    to build the software. In this example, we choose `/tmp`, and the software unpacks
    itself into the `courier-imap-3.0.8` directory. As noted in the case of the Courier
    Authentication Library, the configure script will detect when a Red Hat-derived
    Linux Distribution is being used and the `--with-redhat` flag can be passed to
    configure.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 要构建 Courier-IMAP，请输入以下命令。选择一个合适的目录来构建软件。在这个例子中，我们选择了 `/tmp`，软件会解压到 `courier-imap-3.0.8`
    目录中。与 Courier Authentication Library 一样，配置脚本将检测是否正在使用 Red Hat 派生的 Linux 发行版，并且可以传递
    `--with-redhat` 标志给配置。
- en: '[PRE16]'
  id: totrans-108
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: If the output appears similar to that shown, Courier-IMAP has been successfully
    installed and you may skip the next section on error handling.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 如果输出看起来类似于所示的内容，Courier-IMAP 已成功安装，您可以跳过下一节关于错误处理的部分。
- en: Handling errors
  id: totrans-110
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 处理错误
- en: It is possible that the `configure` command will fail. Configuration attempts
    to detect existing software, and ensures that Courier-IMAP works with it, but
    occasionally there are errors.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: '`configure` 命令可能会失败。配置尝试检测现有软件，并确保 Courier-IMAP 与其一起工作，但偶尔会出现错误。'
- en: '![Handling errors](img/8648_03_2.jpg)'
  id: totrans-112
  prefs: []
  type: TYPE_IMG
  zh: '![处理错误](img/8648_03_2.jpg)'
- en: 'In this example, the `configure` command assumed that `vpopmail` was installed,
    and failed when it couldn''t find parts of `vpopmail`. In reality, `vpopmail`
    was not installed, and could not be detected. We get the following from the `INSTALL`
    file:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个例子中，`configure` 命令假设 `vpopmail` 已安装，并且在找不到 `vpopmail` 的部分时失败。实际上，`vpopmail`
    没有安装，也无法被检测到。我们从 `INSTALL` 文件中得到以下信息：
- en: '[PRE17]'
  id: totrans-114
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'This suggests that the `authvchkpw` is used for `vpopmail`. Further up the
    `INSTALL` file we read:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 这表明 `authvchkpw` 用于 `vpopmail`。在 `INSTALL` 文件的前面，我们读到：
- en: '[PRE18]'
  id: totrans-116
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Upon checking the `/etc/passwd` file, we find that there is an account for `vpopmail`
    which explains the detection. The lack of `vpopmail` files explains the failure
    of the `configure` script. In the `INSTALL` file, the parameters to the configure
    script are described.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 检查`/etc/passwd`文件后，我们发现有一个解释检测的`vpopmail`帐户。缺少`vpopmail`文件解释了`configure`脚本的失败。在`INSTALL`文件中，描述了配置脚本的参数。
- en: '[PRE19]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'The solution, therefore, is to use the `--without-authvchkpw` option:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，解决方案是使用`--without-authvchkpw`选项：
- en: '[PRE20]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: Most problems can be solved in a similar way. It is best not to be put off by
    terms and names that aren't understood. Without understanding anything about `vpopmail`
    and just by searching for the term `"vpopmail"` (which was mentioned in the original
    error message), it is possible to resolve the error by reading the documentation.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数问题可以用类似的方法解决。最好不要被不理解的术语和名称吓倒。不需要了解任何关于`vpopmail`的东西，只需搜索术语`"vpopmail"`（原始错误消息中提到的），就可以通过阅读文档解决错误。
- en: If you can't find an answer, there is a Courier mailing list that can be approached
    for help. Details are given in the *Resolving errors* section.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 如果找不到答案，可以通过Courier邮件列表寻求帮助。详细信息请参阅*解决错误*部分。
- en: Using POP3
  id: totrans-123
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用POP3
- en: As mentioned in the introduction, POP3 is typically used when e-mail is to be
    stored on a client computer. It is most often used when there is an intermittent
    connection to the e-mail server, for example, while using a dial-up line to access
    an e-mail account at an ISP. This approach has the advantage that the e-mail is
    always available to the client, who can work when not connected to the e-mail
    server. E-mails can be read, and replies created for, when the user is next on
    line.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 如介绍中所述，当电子邮件要存储在客户端计算机上时，通常使用POP3。当与电子邮件服务器的连接是间歇性的时，例如，使用拨号线访问ISP的电子邮件帐户时，通常会使用它。这种方法的优势在于电子邮件始终可供客户端使用，客户端可以在未连接到电子邮件服务器时工作。用户下次上线时可以阅读电子邮件并创建回复。
- en: The main disadvantage of using POP3 is that e-mail is generally only available
    on the client PC. If the client PC fails, or is stolen, the e-mail is lost, unless
    a backup has been made.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 使用POP3的主要缺点是电子邮件通常只能在客户端PC上使用。如果客户端PC出现故障或被盗，除非进行了备份，否则电子邮件将丢失。
- en: POP3 clients can be configured to keep e-mail on the POP3 server for other clients
    to access, but IMAP is more often used in this situation.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 可以配置POP3客户端在服务器上保留电子邮件，以便其他客户端访问，但在这种情况下更常用的是IMAP。
- en: Configuring Courier-IMAP for POP3
  id: totrans-127
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 为POP3配置Courier-IMAP
- en: The configuration files are located in `/usr/lib/courier-imap/etc/courier-imap/`,
    if Courier-IMAP was built from source. If you are using a packaged distribution,
    they may be located in `/etc/courier-imap`. The `pop3d` file contains the settings
    for the POP3 server.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 如果Courier-IMAP是从源代码构建的，则配置文件位于`/usr/lib/courier-imap/etc/courier-imap/`中。如果您使用的是打包的发行版，则可能位于`/etc/courier-imap`中。`pop3d`文件包含了POP3服务器的设置。
- en: 'If you are using a packaged distribution of Courier-IMAP, the configuration
    files can be found with the following command:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您使用的是Courier-IMAP的打包发行版，则可以使用以下命令找到配置文件：
- en: '[PRE21]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'Edit the file and locate and alter the following settings:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 编辑文件，找到并更改以下设置：
- en: '| Setting | Description |'
  id: totrans-132
  prefs: []
  type: TYPE_TB
  zh: '| 设置 | 描述 |'
- en: '| --- | --- |'
  id: totrans-133
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| `PIDFILE` | The `pop3d` daemon keeps track of the process ID that it uses.
    It specifies a valid path and a name that suggests the use of the file. Typically,
    this might be `/var/run/pop3d.pid`. Ensure that the variable points to an existing
    directory (such as `/var/run)` or create the directory specified. |'
  id: totrans-134
  prefs: []
  type: TYPE_TB
  zh: '| `PIDFILE` | `pop3d`守护程序跟踪其使用的进程ID。它指定一个有效的路径和一个暗示文件使用的名称。通常，这可能是`/var/run/pop3d.pid`。确保变量指向一个现有的目录（如`/var/run`）或创建指定的目录。
    |'
- en: '| `MAXDAEMONS` | This specifies the maximum number of `pop3d` process that
    can run at one time. This number limits the number of users that can connect at
    one time. A number higher than the expected number of users may be wasteful, but
    users attempting to connect are also included in this number. Set this to a number
    around the maximum number of users who may connect at one time, or a little higher.
    Note that this is the maximum number of processes started, not the initial number
    of processes. |'
  id: totrans-135
  prefs: []
  type: TYPE_TB
  zh: '| `MAXDAEMONS` | 这指定可以同时运行的`pop3d`进程的最大数量。这个数字限制了可以同时连接的用户数量。比预期用户数量更高的数字可能是浪费的，但尝试连接的用户也包括在此数字中。将其设置为接近可能同时连接的最大用户数量的数字，或者稍微高一些。请注意，这是启动的进程的最大数量，而不是初始进程的数量。
    |'
- en: '| `MAXPERIP` | This specifies the maximum number of connections from each IP
    address. A low number such as 4 prevents malicious acts such as denial-of-service
    attacks, where an attempt is made to use up all the connections on the mail server.
    |'
  id: totrans-136
  prefs: []
  type: TYPE_TB
  zh: '| `MAXPERIP` | 这指定每个IP地址的最大连接数。低数字（如4）可以防止恶意行为，例如拒绝服务攻击，其中试图使用邮件服务器上的所有连接。
    |'
- en: '| `POP3AUTH` | If the Courier Authentication Library daemon is used, set this
    to blank, otherwise set it to indicate the type of login authentication performed.
    For versions prior to 4.0, this should be set to `LOGIN`. |'
  id: totrans-137
  prefs: []
  type: TYPE_TB
  zh: '| `POP3AUTH` | 如果使用Courier身份验证库守护程序，则将其设置为空，否则将其设置为指示执行的登录验证类型。对于4.0之前的版本，应将其设置为`LOGIN`。
    |'
- en: '| `PORT` | This specifies the port that the daemon listens on. The standard
    port is `110`, and a different one should only be chosen if all client software
    is configured to use the non‑standard port. |'
  id: totrans-138
  prefs: []
  type: TYPE_TB
  zh: '| `PORT` | 这指定守护程序监听的端口。标准端口是`110`，只有在所有客户端软件都配置为使用非标准端口时才应选择不同的端口。 |'
- en: '| `ADDRESS` | This specifies the IP address to listen on. If the machine has
    multiple network interfaces, Courier-IMAP can be configured to listen only on
    one of the addresses. A value of `0` indicates that all network interfaces should
    be used. |'
  id: totrans-139
  prefs: []
  type: TYPE_TB
  zh: '| `ADDRESS` | 这指定要监听的IP地址。如果机器有多个网络接口，Courier-IMAP可以配置为仅在其中一个地址上监听。值为`0`表示应使用所有网络接口。
    |'
- en: '| `TCPDOPTS` | These are options to be used. Typical ones used include `nodnslookup`
    that prevents the POP3 daemon from attempting to resolve the name of each connection,
    and `-noidentlookup` that prevents it from attempting an `ident` query for the
    incoming connection. Specifying both of these settings can decrease the time taken
    to authenticate a user connection. |'
  id: totrans-140
  prefs: []
  type: TYPE_TB
  zh: '| `TCPDOPTS` | 这些是要使用的选项。通常使用的选项包括`nodnslookup`，它可以防止POP3守护程序尝试解析每个连接的名称，以及`-noidentlookup`，它可以防止它尝试对传入连接进行`ident`查询。指定这两个设置可以减少身份验证用户连接所需的时间。'
- en: '| `MAILDIRPATH` | This is the path to a typical user''s `maildir`. Specify
    the appropriate value for your system, for example, `.maildir`. |'
  id: totrans-141
  prefs: []
  type: TYPE_TB
  zh: '| `MAILDIRPATH` | 这是典型用户的`maildir`路径。指定适合您系统的值，例如`.maildir`。 |'
- en: 'A sample `pop3d` configuration file is shown here:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 此处显示了一个示例`pop3d`配置文件：
- en: '[PRE22]'
  id: totrans-143
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Once the POP3 server has been configured, it is time to test it. If you are
    using a distribution-supplied version of Courier-IMAP, use the distributors' startup
    script called `/etc/init.d/courier-imap`. This will attempt to start `imapd` as
    well as `pop3d`, but as most of the configuration will have been done by the distributors,
    IMAP should start successfully.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦配置了POP3服务器，就该是时候测试了。如果您使用的是由分发商提供的Courier-IMAP版本，请使用名为`/etc/init.d/courier-imap`的分发商启动脚本。这将尝试启动`imapd`以及`pop3d`，但由于大部分配置将由分发商完成，因此IMAP应该能够成功启动。
- en: Note
  id: totrans-145
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: If you are using Courier-IMAP version 4.0 or later, then `courier-authdaemon`
    must be running before the POP3 or IMAP services. Ensure that you start them as
    described previously.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您使用的是Courier-IMAP 4.0或更高版本，则必须在启动POP3或IMAP服务之前运行`courier-authdaemon`。确保按照前面描述的方式启动它们。
- en: 'To start the POP3 service for testing, run the following command:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 要启动POP3服务进行测试，请运行以下命令：
- en: '[PRE23]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: Once the POP3 and IMAP services are configured correctly, they can be started
    automatically when the machine boots. This is explained in the *Testing the IMAP
    service* section. The instructions can be followed, even if IMAP is not required.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦正确配置了POP3和IMAP服务，它们可以在机器启动时自动启动。这在*测试IMAP服务*部分有解释。即使不需要IMAP，也可以按照说明进行操作。
- en: Testing the POP3 Service
  id: totrans-150
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 测试POP3服务
- en: The easiest way to test a service such as POP3 is by using the **telnet** utility
    and connecting to the appropriate port. This avoids any problems there may be
    with network connectivity or client configuration. POP3 uses port `110`, so connect
    telnet to port `110` on the local machine.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 测试POP3等服务的最简单方法是使用**telnet**实用程序并连接到适当的端口。这样可以避免网络连接或客户端配置可能出现的任何问题。POP3使用端口`110`，因此将telnet连接到本地机器的端口`110`。
- en: '[PRE24]'
  id: totrans-152
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: Connection closed by foreign host.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 外部主机关闭连接。
- en: The POP3 protocol is based on text commands, and so it is easy to emulate a
    client with telnet. Initially, use the `USER` and `PASS` commands to authenticate
    a user. If the user is authenticated correctly, the `STAT` command lists all e-mails
    and their combined size in bytes. `LIST` lists each e-mail and its size. The `RETR`
    command retrieves (or lists) an e-mail when the e-mail number is specified with
    the command. The `DELE` command (not shown in the example) will delete an e-mail
    from the server.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: POP3协议基于文本命令，因此可以使用telnet模拟客户端。最初，使用`USER`和`PASS`命令对用户进行身份验证。如果用户成功通过身份验证，则`STAT`命令将列出所有电子邮件及其组合大小（以字节为单位）。`LIST`列出每封电子邮件及其大小。`RETR`命令在指定命令时检索（或列出）一封电子邮件。`DELE`命令（未在示例中显示）将从服务器中删除一封电子邮件。
- en: Now that POP3 is working, it is time to configure an e-mail client to collect
    e-mails.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 现在POP3正在运行，是时候配置电子邮件客户端来收取电子邮件了。
- en: Retrieving E-mail via POP3 with Windows Live Mail
  id: totrans-156
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 通过Windows Live Mail使用POP3检索电子邮件
- en: Windows Live Mail is a popular e-mail client, available for download for versions
    of Windows from XP onwards. It includes the ability to connect to POP3-and IMAP-enabled
    servers. It is available for download at [http://download.live.com/wlmail](http://download.live.com/wlmail).
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: Windows Live Mail是一款流行的电子邮件客户端，适用于从XP版本开始的Windows版本。它包括连接到支持POP3和IMAP的服务器的功能。可在[http://download.live.com/wlmail](http://download.live.com/wlmail)下载。
- en: 'The following are the steps to configure it:'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是配置它的步骤：
- en: 'Start Windows Live Mail by locating it in the Start menu hierarchy: **Start
    | All Programs | Windows Live | Windows Live Mail**. When it is run for the first
    time, the interface will automatically display the wizard to create new account.
    Otherwise, click on **Add e-mail account** in the navigation bar.![Retrieving
    E-mail via POP3 with Windows Live Mail](img/8648_03_3.jpg)'
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过在开始菜单层次结构中找到它来启动Windows Live Mail：**开始 | 所有程序 | Windows Live | Windows Live
    Mail**。第一次运行时，界面将自动显示创建新帐户的向导。否则，点击导航栏中的**添加电子邮件帐户**。![通过Windows Live Mail使用POP3检索电子邮件](img/8648_03_3.jpg)
- en: The first page of the new account wizard will be displayed.![Retrieving E-mail
    via POP3 with Windows Live Mail](img/8648_03_4.jpg)
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将显示新帐户向导的第一页。![通过Windows Live Mail使用POP3检索电子邮件](img/8648_03_4.jpg)
- en: Enter the full e-mail address in `username@domain` format. You may decide whether
    you want to enter the password—if you do not check **Remember password**, you
    will be prompted for the password every time you start Windows Live Mail. The
    **Display Name** should be your first and last name—this will appear on outgoing
    e-mails. There is no need to check the **Manually configure server settings for
    e-mail account** checkbox.
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以`username@domain`格式输入完整的电子邮件地址。您可以决定是否要输入密码 - 如果不勾选**记住密码**，则每次启动Windows Live
    Mail时都会提示输入密码。**显示名称**应为您的名字和姓氏 - 这将显示在发件邮件上。无需勾选**手动配置电子邮件帐户的服务器设置**复选框。
- en: Click on **Next**. The next page of the wizard requires some server details.![Retrieving
    E-mail via POP3 with Windows Live Mail](img/8648_03_5.jpg)
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**下一步**。向导的下一页需要一些服务器详细信息。![通过Windows Live Mail使用POP3检索电子邮件](img/8648_03_5.jpg)
- en: The default is for a **POP3** server. The **Incoming server** should be the
    name (or IP address) of the mail server. The default **Port** of **110** can be
    kept unchanged. Do not check the box for an SSL connection, and keep the authentication
    method as **Clear text authentication**. The **Login ID** should be kept as the
    username part of the e-mail address entered in the first screen. The **Outgoing
    server** should be as provided for **Incoming server**, and the remainder of the
    form can be left with the default values.
  id: totrans-163
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 默认情况下是**POP3**服务器。**传入服务器**应该是邮件服务器的名称（或IP地址）。默认的**端口**为**110**可以保持不变。不要勾选SSL连接的框，并将认证方法保持为**明文认证**。**登录ID**应保持为在第一个屏幕中输入的电子邮件地址的用户名部分。**传出服务器**应该与**传入服务器**提供的相同，表单的其余部分可以保持默认值。
- en: Press **Next**. You will be presented with a confirmation screen.![Retrieving
    E-mail via POP3 with Windows Live Mail](img/8648_03_6.jpg)
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按下**下一步**。您将看到一个确认屏幕。![使用Windows Live Mail通过POP3检索电子邮件](img/8648_03_6.jpg)
- en: When you click on **Finish**, Windows Live Mail will attempt to connect to the
    e-mail server and download e-mail.
  id: totrans-165
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当您单击**完成**时，Windows Live Mail将尝试连接到电子邮件服务器并下载电子邮件。
- en: If there are any errors, then right-click the account in the navigation pane,
    and select **Properties**. You can then check and modify any settings.
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果有任何错误，那么右键点击导航窗格中的帐户，然后选择**属性**。然后您可以检查和修改任何设置。
- en: Now that POP3 has been successfully configured, it is time to move on to IMAP.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 现在POP3已经成功配置，是时候转向IMAP了。
- en: Using IMAP
  id: totrans-168
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用IMAP
- en: As mentioned in the introduction, with IMAP, the mail is held on the server
    and might not be held on the client. This makes it ideal for organizations with
    a central administrative function, as it eases backups and also allows users to
    change the client computers they work at. However, this also means that the disk
    storage required to store an entire organizations e-mail will inevitably increase
    over time. This is particularly true when large attachments are sent or received.
    If users rely on being able to access their mailbox, they will be inconvenienced
    if the mail server is unavailable during their working hours. Some e-mail clients
    can be configured to make copies of e-mails, and so avoid interruption. By using
    IMAPs ability to create folders and move e-mails between them, this can sometimes
    be achieved in a relatively straightforward manner.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，使用IMAP，邮件保存在服务器上，可能不保存在客户端上。这使得它非常适合具有中央管理功能的组织，因为它简化了备份，并且还允许用户更改他们工作的客户计算机。但是，这也意味着随着时间的推移，存储整个组织电子邮件所需的磁盘存储空间将不可避免地增加。当发送或接收大附件时，这一点尤为真实。如果用户依赖于能够访问他们的邮箱，那么如果邮件服务器在他们的工作时间内不可用，他们将感到不便。一些电子邮件客户端可以配置为复制电子邮件，从而避免中断。通过使用IMAP的创建文件夹和在它们之间移动电子邮件的能力，有时可以以相对简单的方式实现这一点。
- en: Configuring Courier for IMAP
  id: totrans-170
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 配置IMAP的Courier
- en: After Courier-IMAP has been installed, either from package or from source as
    described earlier, it needs to be configured before it can be used.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 安装了Courier-IMAP后，无论是从软件包还是从之前描述的源，都需要在使用之前进行配置。
- en: Note
  id: totrans-172
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: If you have configured and tested POP3 as described earlier, you should stop
    the Courier-IMAP daemons while you configure IMAP. If you are using a version
    of Courier-IMAP greater than 4.0, then you can leave the authentication daemon
    running.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您已经按照前面描述的方式配置和测试了POP3，那么在配置IMAP时应停止Courier-IMAP守护程序。如果您使用的是Courier-IMAP大于4.0的版本，则可以保持认证守护程序运行。
- en: If Courier-IMAP was built from source, the configuration files are located in
    `/usr/lib/courier-imap/etc/courier-imap/`. In a packaged distribution, they may
    be located in `/etc/courier-imap`. The `imapd` file contains the settings for
    the IMAP server.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 如果Courier-IMAP是从源代码构建的，则配置文件位于`/usr/lib/courier-imap/etc/courier-imap/`。在打包的发行版中，它们可能位于`/etc/courier-imap`。`imapd`文件包含IMAP服务器的设置。
- en: 'If you are using a packaged distribution of Courier-IMAP, the configuration
    files can be found with this command:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您使用的是Courier-IMAP的打包发行版，则可以使用此命令找到配置文件：
- en: '[PRE25]'
  id: totrans-176
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: '[PRE26]'
  id: totrans-177
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'Once the file has been located, it can be modified as appropriate. Here are
    the main configuration directives:'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 找到文件后，可以根据需要进行修改。以下是主要的配置指令：
- en: '| Setting | Description |'
  id: totrans-179
  prefs: []
  type: TYPE_TB
  zh: '| 设置 | 描述 |'
- en: '| --- | --- |'
  id: totrans-180
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| `PIDFILE` | The `imapd` daemon keeps track of the process ID that it uses.
    It specifies a valid path and a name, which suggests the use of the file. Typically,
    this might be `/var/run/imapd.pid`. Ensure that the setting points to a valid
    directory. |'
  id: totrans-181
  prefs: []
  type: TYPE_TB
  zh: '| `PIDFILE` | `imapd`守护程序跟踪其使用的进程ID。它指定一个有效的路径和名称，这表明文件的使用。通常，这可能是`/var/run/imapd.pid`。确保设置指向有效的目录。
    |'
- en: '| `MAXDAEMONS` | This specifies the maximum number of `imapd` processes that
    can run at a time. This number limits the number of users that can connect at
    one time. A number higher than the expected number of users may be wasteful, but
    users attempting to connect are also included in this number. Set this to a number
    around the maximum number of users who may connect at one time, or a little higher.
    |'
  id: totrans-182
  prefs: []
  type: TYPE_TB
  zh: '| `MAXDAEMONS` | 这指定可以同时运行的`imapd`进程的最大数量。此数字限制可以同时连接的用户数量。高于预期用户数量的数字可能是浪费的，但尝试连接的用户也包括在此数字中。将其设置为最大可能同时连接的用户数量左右，或者略高一些的数字。
    |'
- en: '| `PORT` | This specifies the port that the daemon listens on. The standard
    port is `143`, and a different one should only be chosen if all client software
    is configured to use the non‑standard port. |'
  id: totrans-183
  prefs: []
  type: TYPE_TB
  zh: '| `PORT` | 这指定守护程序侦听的端口。标准端口是`143`，只有当所有客户端软件都配置为使用非标准端口时，才应选择不同的端口。 |'
- en: '| `ADDRESS` | This specifies the IP address to listen on. If the machine has
    multiple network interfaces, Courier-IMAP can be configured to listen only on
    one of the addresses. A value of `0` indicates that all network interfaces should
    be used. |'
  id: totrans-184
  prefs: []
  type: TYPE_TB
  zh: '| `ADDRESS` | 这指定要侦听的IP地址。如果机器有多个网络接口，Courier-IMAP可以配置为仅侦听其中一个地址。值`0`表示应使用所有网络接口。
    |'
- en: '| `TCPDOPTS` | These are options to be used. Typical ones include `-nodnslookup`
    that prevents the IMAP daemon from attempting to resolve the name of each connection,
    and `-noidentlookup` that prevents it from attempting an `ident` query for the
    incoming connection. Specifying both of these settings can decrease the time taken
    to authenticate a user connection. |'
  id: totrans-185
  prefs: []
  type: TYPE_TB
  zh: '| `TCPDOPTS` | 这些是要使用的选项。典型的选项包括`-nodnslookup`，它可以防止IMAP守护程序尝试解析每个连接的名称，以及`-noidentlookup`，它可以防止它尝试对传入连接进行`ident`查询。指定这两个设置可以减少身份验证用户连接所需的时间。|'
- en: '| `MAILDIRPATH` | This is the path to a typical user''s `maildir`. Specify
    the appropriate value for your system, for example, `.maildir`. |'
  id: totrans-186
  prefs: []
  type: TYPE_TB
  zh: '| `MAILDIRPATH` | 这是典型用户的`maildir`的路径。为您的系统指定适当的值，例如`.maildir`。|'
- en: '| `MAXPERIP` | This specifies the maximum number of connections from each IP
    address. A low number prevents malicious acts such as denial-of-service attacks,
    where an attempt is made to use up all the connections on the mail server. Some
    e-mail clients make multiple connections to a server, and so a low value such
    as `5` may affect operation of client software. |'
  id: totrans-187
  prefs: []
  type: TYPE_TB
  zh: '| `MAXPERIP` | 这指定了每个IP地址的最大连接数。较低的数字可以防止恶意行为，例如拒绝服务攻击，即试图使用邮件服务器上的所有连接。一些电子邮件客户端会对服务器进行多次连接，因此诸如`5`之类的较低值可能会影响客户端软件的操作。|'
- en: '| `IMAP_CAPABILITY` | This describes the IMAP capabilities that the server
    reports to clients. It should be left on the default setting. |'
  id: totrans-188
  prefs: []
  type: TYPE_TB
  zh: '| `IMAP_CAPABILITY` | 这描述了服务器向客户端报告的IMAP功能。应该保持默认设置。|'
- en: '| `IMAP_EMPTYTRASH` | This specifies how long e-mail messages should be kept
    in certain folders. Messages older than the date specified are automatically deleted
    when the user logs in or logs out. This can be used to automatically delete e-mail
    from the `Trash` folder after a certain period. This works for all folders, so
    e-mail in the `Sent items` folder could be deleted after a longer period has expired.For
    example, `IMAP_EMPTYTRASH=Trash:7,Sent:30` specifies that e-mails in the `Trash`
    folder are deleted after 7 days, and those in the `Sent` folder will be deleted
    after 30 days.If very large numbers of e-mails are present in the folders specified,
    performance will suffer, as each file will be checked every time the user logs
    in or logs out of the IMAP server. In this case, it would be better to disable
    this setting and run a separate script regularly to remove old files. |'
  id: totrans-189
  prefs: []
  type: TYPE_TB
  zh: '| `IMAP_EMPTYTRASH` | 这指定了电子邮件消息在某些文件夹中应保留的时间。在指定日期之前的消息在用户登录或注销时将自动删除。这可以用于在一定时间后自动从`Trash`文件夹中删除电子邮件。这适用于所有文件夹，因此`Sent
    items`文件夹中的电子邮件可以在较长时间后被删除。例如，`IMAP_EMPTYTRASH=Trash:7,Sent:30`指定`Trash`文件夹中的电子邮件在7天后被删除，`Sent`文件夹中的电子邮件将在30天后被删除。如果指定的文件夹中存在大量电子邮件，性能将受到影响，因为每次用户登录或注销IMAP服务器时都会检查每个文件。在这种情况下，最好禁用此设置，并定期运行一个单独的脚本来删除旧文件。|'
- en: '| `IMAP_IDLETIMEOUT` | This is the length of time (in seconds) that a client
    can be idle for (not make any request to the server), before the connection is
    closed. Values lower than the default of 60 may result in client connections being
    terminated prematurely, but a well-written client will reconnect without notifying
    the user. Higher values should be used if users report problems. |'
  id: totrans-190
  prefs: []
  type: TYPE_TB
  zh: '| `IMAP_IDLETIMEOUT` | 这是客户端在空闲状态（未向服务器发出任何请求）多长时间（以秒为单位）之后，连接将被关闭。低于默认值60的数值可能会导致客户端连接过早终止，但是一个良好编写的客户端将会在不通知用户的情况下重新连接。如果用户报告问题，应该使用更高的数值。|'
- en: '| `IMAP_TRASHFOLDERNAME` | This specifies the folder to be used when e-mail
    is deleted. |'
  id: totrans-191
  prefs: []
  type: TYPE_TB
  zh: '| `IMAP_TRASHFOLDERNAME` | 这指定了在删除电子邮件时要使用的文件夹。|'
- en: '| `SENDMAIL` | This specifies the path to `sendmail`, for sending e-mail. You
    should ensure that this points to the executable file installed by Postfix in
    [Chapter 2](ch02.html "Chapter 2. Setting up Postfix"). |'
  id: totrans-192
  prefs: []
  type: TYPE_TB
  zh: '| `SENDMAIL` | 这指定了用于发送电子邮件的`sendmail`的路径。您应该确保它指向由[第2章](ch02.html "第2章。设置Postfix")中安装的Postfix安装的可执行文件。|'
- en: 'Here is a sample `imapd` configuration file:'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个`imapd`配置文件示例：
- en: '[PRE27]'
  id: totrans-194
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: Testing the IMAP service
  id: totrans-195
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 测试IMAP服务
- en: 'To start the IMAP service for testing, run the following command:'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 要启动IMAP服务进行测试，请运行以下命令：
- en: '[PRE28]'
  id: totrans-197
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'The easiest way to test a service such as IMAP is by using the telnet utility
    and connecting to the appropriate port. This avoids any problems with network
    connectivity or client configuration. IMAP uses port `143`, so telnet to port
    `143` on the local machine:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 测试IMAP等服务的最简单方法是使用telnet实用程序并连接到适当的端口。这样可以避免与网络连接或客户端配置相关的任何问题。IMAP使用端口`143`，因此在本地机器上telnet到端口`143`：
- en: '[PRE29]'
  id: totrans-199
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: Each command is prefixed with an identifier—here we use incremental numbers.
    The first command asks the IMAP server to list its capabilities. The second command
    is a user login, and includes the username and password. If this is successful,
    then the final namespace command shows that the server has accepted the login
    and the client can determine where in the folder hierarchy the user is placed.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 每个命令都以标识符为前缀-这里我们使用递增的数字。第一个命令要求IMAP服务器列出其功能。第二个命令是用户登录，包括用户名和密码。如果成功，那么最终的命名空间命令将显示服务器已接受登录，并且客户端可以确定用户在文件夹层次结构中的位置。
- en: This is enough to confirm that the user can log in and issue commands. The whole
    IMAP command set is quite large and complex, and does not lend itself to be used
    by telnet.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 这足以确认用户可以登录并发出命令。整个IMAP命令集非常庞大和复杂，并不适合通过telnet使用。
- en: 'Once the POP3 and IMAP services are configured correctly, they can be started
    automatically when the machine boots. If you have installed from a package, then
    the distributor will probably have created a suitable startup script in `/etc/init.d`.
    Depending on the distribution, this may start when the machine boots. For Red
    Hat Linux, the command will be:'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦正确配置了POP3和IMAP服务，它们可以在计算机启动时自动启动。如果您是从软件包安装的，那么发行商可能已经在`/etc/init.d`中创建了一个适当的启动脚本。根据发行版的不同，这可能会在计算机启动时启动。对于Red
    Hat Linux，命令将是：
- en: '[PRE30]'
  id: totrans-203
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'For other distributions, the `chkconfig` command might be used:'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 对于其他发行版，可能会使用`chkconfig`命令：
- en: '[PRE31]'
  id: totrans-205
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: Now that IMAP is configured correctly, it is time to configure an e-mail client.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 现在IMAP已经正确配置，是时候配置电子邮件客户端了。
- en: Retrieving mail via IMAP with Mozilla Thunderbird
  id: totrans-207
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用Mozilla Thunderbird通过IMAP检索邮件
- en: Mozilla Thunderbird is a popular open source e-mail client and can be downloaded
    from [http://www.mozilla.org/](http://www.mozilla.org/). It can be used with a
    variety of operating systems, including Windows and Linux.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: Mozilla Thunderbird是一款流行的开源电子邮件客户端，可以从[http://www.mozilla.org/](http://www.mozilla.org/)下载。它可以与各种操作系统一起使用，包括Windows和Linux。
- en: 'Here are steps to configure it to connect to a Courier-IMAP server:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是配置连接到Courier-IMAP服务器的步骤：
- en: From the main Thunderbird screen, select **Tools | Account Settings**.
  id: totrans-210
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从主Thunderbird屏幕中，选择**工具|账户设置**。
- en: '![Retrieving mail via IMAP with Mozilla Thunderbird](img/8648_03_7.jpg)'
  id: totrans-211
  prefs: []
  type: TYPE_IMG
  zh: '![使用Mozilla Thunderbird通过IMAP检索邮件](img/8648_03_7.jpg)'
- en: Click on the **Add Account...** button. On the next screen, choose **E-mail
    Account** and then click **Next**. The identity screen opens. Enter your user
    name and e-mail address, then click **Next**.
  id: totrans-212
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加帐户...**按钮。在下一个屏幕上，选择**电子邮件帐户**，然后点击**下一步**。身份屏幕将打开。输入您的用户名和电子邮件地址，然后点击**下一步**。
- en: '![Retrieving mail via IMAP with Mozilla Thunderbird](img/8648_03_08.jpg)'
  id: totrans-213
  prefs: []
  type: TYPE_IMG
  zh: '![使用Mozilla Thunderbird通过IMAP检索邮件](img/8648_03_08.jpg)'
- en: On the **Server Information** screen, select **IMAP** as the server type, and
    enter the name or the IP address of the server for incoming e-mail. Then click
    the **Next** button.
  id: totrans-214
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**服务器信息**屏幕上，选择**IMAP**作为服务器类型，并输入传入电子邮件服务器的名称或IP地址。然后点击**下一步**按钮。
- en: '![Retrieving mail via IMAP with Mozilla Thunderbird](img/8648_03_9.jpg)'
  id: totrans-215
  prefs: []
  type: TYPE_IMG
  zh: '![使用Mozilla Thunderbird通过IMAP检索邮件](img/8648_03_9.jpg)'
- en: On the next screen, enter the **Incoming User Name**. This will normally be
    the Linux account name.
  id: totrans-216
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个屏幕上，输入**传入用户名**。这通常是Linux帐户名。
- en: '![Retrieving mail via IMAP with Mozilla Thunderbird](img/8648_03_10.jpg)'
  id: totrans-217
  prefs: []
  type: TYPE_IMG
  zh: '![使用Mozilla Thunderbird通过IMAP检索邮件](img/8648_03_10.jpg)'
- en: Finally, provide a useful tag for the e-mail account in the **Account Name**
    field, in case another account is defined in the future. Click **Next**.
  id: totrans-218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，在**账户名称**字段中为电子邮件帐户提供一个有用的标签，以防将来定义另一个帐户。点击**下一步**。
- en: '![Retrieving mail via IMAP with Mozilla Thunderbird](img/8648_03_11.jpg)'
  id: totrans-219
  prefs: []
  type: TYPE_IMG
  zh: '![使用Mozilla Thunderbird通过IMAP检索邮件](img/8648_03_11.jpg)'
- en: On the next screen, the details are summarized. Click **Finish** to save the
    account details and to exit the **Account Wizard**.
  id: totrans-220
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个屏幕上，总结了详细信息。点击**完成**保存帐户详细信息并退出**帐户向导**。
- en: '![Retrieving mail via IMAP with Mozilla Thunderbird](img/8648_03_12.jpg)'
  id: totrans-221
  prefs: []
  type: TYPE_IMG
  zh: '![使用Mozilla Thunderbird通过IMAP检索邮件](img/8648_03_12.jpg)'
- en: Finally, the **Account Settings** screen is shown, listing the account you just
    defined. Click **OK**.
  id: totrans-222
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，显示**账户设置**屏幕，列出您刚刚定义的帐户。点击**确定**。
- en: '![Retrieving mail via IMAP with Mozilla Thunderbird](img/8648_03_13.jpg)'
  id: totrans-223
  prefs: []
  type: TYPE_IMG
  zh: '![使用Mozilla Thunderbird通过IMAP检索邮件](img/8648_03_13.jpg)'
- en: To retrieve messages, click on **File | Get New Messages**, and select the account
    you just created from the menu.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 要检索消息，点击**文件|获取新消息**，并从菜单中选择您刚刚创建的帐户。
- en: Thunderbird will prompt you for the password. Enter the correct password and
    press *Enter*. Thunderbird will then connect to Courier-IMAP and retrieve details
    of all the e-mail. If you click on an e-mail, Thunderbird will retrieve it using
    the IMAP protocol.
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: Thunderbird将提示您输入密码。输入正确的密码并按*Enter*。然后Thunderbird将连接到Courier-IMAP并检索所有电子邮件的详细信息。如果您点击一封电子邮件，Thunderbird将使用IMAP协议检索它。
- en: Summary
  id: totrans-226
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter we saw the two mail protocols for retrieving e-mail, POP3 and
    IMAP, and explained some strengths and weaknesses. We then covered Courier-IMAP,
    which can provide both POP3 and IMAP services, and advised you to use a package
    from your Linux distributor. We also described how to build it from source, should
    this be required. We then discussed how to configure and test both the POP3 and
    IMAP services, including configuration of popular e-mail clients.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们看到了用于检索电子邮件的两种邮件协议，POP3和IMAP，并解释了一些优缺点。然后介绍了Courier-IMAP，它可以提供POP3和IMAP服务，并建议您使用Linux发行版的软件包。我们还描述了如何根据需要从源代码构建它。然后讨论了如何配置和测试POP3和IMAP服务，包括配置流行的电子邮件客户端。
