# 前言

《精通 Linux Shell 脚本编程》将成为你的圣经，也是一个手册，用于在 Linux、OS X 或 Unix 中创建和编辑 bash shell 脚本。从基础知识开始，我们迅速帮助你用实际示例创建有用的脚本。这样，你的学习变得高效而迅速。每一章中，我们都提供了代码的解释和示例，因此这本书不仅是一本学习书，还可以作为一个现成的参考书，如果你需要了解如何编写特定任务的程序。

# 本书内容

第一章，“Bash 脚本的什么和为什么”，解释了如何创建和命名脚本。一旦你创建了脚本，你就可以将其设置为可执行，并欢迎自己进入这个世界。如果你对脚本几乎一无所知，那么你可以从这里开始。

第二章，“创建交互式脚本”，介绍了我们需要以更灵活的方式工作并在脚本执行过程中接受参数甚至提示用户输入的脚本。我相信你已经看到过类似的脚本，询问安装目录或要连接的服务器。

第三章，“附加条件”，介绍了关键词的使用，比如“if”，以及像“test”这样的命令。它告诉我们如何在代码中开始创建决策结构，然后在没有提供参数的情况下提示用户输入；否则，我们可以静默运行。

第四章，“创建代码片段”，介绍了非常强大的 vim 文本编辑器，还有语法高亮帮助我们编辑脚本。然而，我们也可以读取当前脚本的文件。通过这种方式，我们可以创建代表常用代码块的代码片段。

第五章，“替代语法”，告诉我们如何将测试命令缩写为单个，我们还可以根据需要使用[[和((。

第六章，“循环迭代”，介绍了循环也是条件语句。我们可以在条件为真或假时重复一段代码。通过使用 for、while 或 until，我们可以让脚本完成重复的代码序列。

第七章，“使用函数创建构建块”，介绍了函数如何封装我们在脚本中需要重复的代码。这可以提高可读性，以及脚本的易维护性。

第八章，“介绍 sed”，流编辑器，告诉我们如何使用 sed 动态编辑文件并在脚本中实现它。在这一章中，我们将学习如何使用和处理 sed。

第九章，“自动化 Apache 虚拟主机”，介绍了当我们创建一个脚本来在 Apache HTTPD 服务器上创建虚拟主机时，我们可以带走的实用配方。我们在脚本中使用 sed 来编辑用于定义虚拟主机的模板。

第十章，“Awk 基础”，介绍了我们如何开始处理命令行中的文本数据，使用 awk 是 Linux 中另一个非常强大的工具。

[第十一章，*使用 Awk 总结日志*，告诉我们关于我们在 awk 中查看的第一个实际示例，允许我们处理 Web 服务器上的日志文件。它还介绍了如何报告最经常访问服务器的 IP 地址，以及发生了多少错误以及错误的类型。

第十二章，*使用 Awk 进行更好的 lastlog*，查看了我们可以在 awk 中使用的更多示例，以过滤和格式化 lastlog 命令提供的数据。它深入到我们想要的具体信息，并删除我们不需要的信息。

第十三章，*使用 Perl 作为 Bash 脚本的替代方案*，介绍了 Perl 脚本语言及其提供的优势。我们不仅限于使用 bash，还有 Perl 作为脚本语言。

第十四章，*使用 Python 作为 Bash 脚本的替代方案*，向您介绍了 Python 和 Python 之禅，这将帮助您学习所有编程语言。与 Perl 一样，Python 是一种可以扩展脚本功能的脚本语言。

# 本书所需内容

使用带有 bash shell 的任何 Linux 发行版应该足以完成本书。在本书中，我们使用的是在 Raspberry Pi 上使用 Raspbian 发行版生成的示例；但是，任何 Linux 发行版都应该足够。如果您在苹果系统的 OS X 命令行中，则应该能够完成大部分练习，而无需 Linux。

# 本书适合人群

*精通 Linux Shell 脚本*是为那些想要在日常生活中自动化任务、节省时间和精力的 Linux 管理员编写的。您需要具有命令行经验，并熟悉需要自动化的任务。预期具有基本的脚本知识。

# 约定

在本书中，您将找到一些文本样式，用于区分不同类型的信息。以下是一些这些样式的示例及其含义的解释。

文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄显示如下："我们再次看到`basename`首先被评估，但我们没有看到运行该命令所涉及的更详细的步骤。"

代码块设置如下：

```
#!/bin/bash
echo "You are using $0"
echo "Hello $*"
exit 0
```

当我们希望引起您对代码块的特定部分的注意时，相关行或项目将以粗体显示：

```
#!/bin/bash
echo "You are using $0"
echo "Hello $*"
exit 0
```

任何命令行输入或输出都将按以下方式编写：

```
$ bash -x $HOME/bin/hello2.sh fred

```

**新术语**和**重要单词**以粗体显示。您在屏幕上看到的单词，例如菜单或对话框中的单词，会以这样的方式出现在文本中："单击**下一步**按钮将您移至下一个屏幕。"

### 注意

警告或重要说明会以这样的方式出现在一个框中。

### 提示

提示和技巧会以这种方式出现。

# 读者反馈

我们的读者的反馈总是受欢迎的。让我们知道您对本书的看法——您喜欢或不喜欢什么。读者的反馈对我们很重要，因为它有助于我们开发您真正能够充分利用的书籍。

要向我们发送一般反馈，只需发送电子邮件至`<feedback@packtpub.com>`，并在您的消息主题中提及书名。

如果您在某个专题上有专业知识，并且有兴趣编写或为书籍做出贡献，请参阅我们的作者指南[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在您是 Packt 书籍的自豪所有者，我们有很多事情可以帮助您充分利用您的购买。

## 下载示例代码

您可以从[`www.packtpub.com`](http://www.packtpub.com)的帐户中下载您购买的所有 Packt Publishing 图书的示例代码文件。如果您在其他地方购买了这本书，您可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)注册，直接将文件发送到您的电子邮件。

## 下载本书的彩色图片

我们还为您提供了一个 PDF 文件，其中包含本书中使用的截图/图表的彩色图片。彩色图片将帮助您更好地理解输出中的变化。您可以从以下网址下载此文件：[`www.packtpub.com/sites/default/files/downloads/MasteringLinuxShellScripting_ColorImages.pdf`](http://www.packtpub.com/sites/default/files/downloads/MasteringLinuxShellScripting_ColorImages.pdf)。

## 勘误

尽管我们已经尽一切努力确保内容的准确性，但错误还是会发生。如果您在我们的书中发现错误——可能是文本或代码中的错误——我们将不胜感激，如果您能向我们报告。通过这样做，您可以帮助其他读者避免挫败感，并帮助我们改进本书的后续版本。如果您发现任何勘误，请访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)报告，选择您的书，点击**勘误提交表**链接，并输入您的勘误详情。一旦您的勘误经过验证，您的提交将被接受，并且勘误将被上传到我们的网站或添加到该书标题的勘误部分的任何现有勘误列表中。

要查看先前提交的勘误，请转到[`www.packtpub.com/books/content/support`](https://www.packtpub.com/books/content/support)并在搜索字段中输入书名。所需信息将出现在**勘误**部分下。

## 盗版

互联网上侵犯版权材料的盗版问题是所有媒体的持续问题。在 Packt，我们非常重视版权和许可的保护。如果您在互联网上发现我们作品的任何形式的非法副本，请立即向我们提供位置地址或网站名称，以便我们采取补救措施。

请通过链接`<copyright@packtpub.com>`与我们联系，提供涉嫌盗版材料的链接。

我们感谢您在保护我们的作者和我们为您提供有价值的内容的能力方面的帮助。

## 问题

如果您对本书的任何方面有问题，可以通过`<questions@packtpub.com>`与我们联系，我们将尽力解决问题。
