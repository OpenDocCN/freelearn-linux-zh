- en: Preface
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 前言
- en: '*Mastering Linux Shell Scripting* will become your Bible and a handbook to
    create and edit bash shell scripts in Linux, OS X, or Unix. Starting with the
    fundamentals, we quickly move onto helping you create useful scripts with practical
    examples. In this way, your learning becomes effective and quick. With each chapter,
    we provide explanations of the code and code examples, so from a learning book
    this becomes a book that you can use as a ready reference, if you need to understand
    how to program a specific task.'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 《精通Linux Shell脚本编程》将成为你的圣经，也是一个手册，用于在Linux、OS X或Unix中创建和编辑bash shell脚本。从基础知识开始，我们迅速帮助你用实际示例创建有用的脚本。这样，你的学习变得高效而迅速。每一章中，我们都提供了代码的解释和示例，因此这本书不仅是一本学习书，还可以作为一个现成的参考书，如果你需要了解如何编写特定任务的程序。
- en: What this book covers
  id: totrans-2
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书内容
- en: '[Chapter 1](part0014_split_000.html#DB7S1-747571d9b4814e1dbffcdef2eb0dec8d
    "Chapter 1. What and Why of Scripting with Bash"), *What and Why of Scripting
    with Bash*, explains how to create and name scripts. Once you have the script
    created you can make it executable and welcome yourself to the world. If you have
    little or no knowledge of scripting then you can start here.'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 第1章，“Bash脚本的什么和为什么”，解释了如何创建和命名脚本。一旦你创建了脚本，你就可以将其设置为可执行，并欢迎自己进入这个世界。如果你对脚本几乎一无所知，那么你可以从这里开始。
- en: '[Chapter 2](part0020_split_000.html#J2B81-747571d9b4814e1dbffcdef2eb0dec8d
    "Chapter 2. Creating Interactive Scripts"), *Creating Interactive Scripts*, covers
    the scripts we will need to work in a more flexible manner and accept arguments
    or even prompt the user for input during the script execution. I am sure that
    you have seen scripts similar to this asking for installation directories or server''s
    tp connect to.'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 第2章，“创建交互式脚本”，介绍了我们需要以更灵活的方式工作并在脚本执行过程中接受参数甚至提示用户输入的脚本。我相信你已经看到过类似的脚本，询问安装目录或要连接的服务器。
- en: '[Chapter 3](part0028_split_000.html#QMFO1-747571d9b4814e1dbffcdef2eb0dec8d
    "Chapter 3. Conditions Attached"), *Conditions Attached*, covers the use of keywords,
    such as "if", and commands like "test". It tells us how we can start creating
    decision structures in the code and then prompt the user for input, if we have
    not provided arguments; otherwise, we can run silently.'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 第3章，“附加条件”，介绍了关键词的使用，比如“if”，以及像“test”这样的命令。它告诉我们如何在代码中开始创建决策结构，然后在没有提供参数的情况下提示用户输入；否则，我们可以静默运行。
- en: '[Chapter 4](part0037_split_000.html#1394Q1-747571d9b4814e1dbffcdef2eb0dec8d
    "Chapter 4. Creating Code Snippets"), *Creating Code Snippets*, covers the vim
    text editor, which is very powerful and also syntax highlighting to help us edit
    the script. However, we can also read into files of the current script. In this
    way, we can create snippets of code to represent commonly used blocks.'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 第4章，“创建代码片段”，介绍了非常强大的vim文本编辑器，还有语法高亮帮助我们编辑脚本。然而，我们也可以读取当前脚本的文件。通过这种方式，我们可以创建代表常用代码块的代码片段。
- en: '[Chapter 5](part0040_split_000.html#164MG1-747571d9b4814e1dbffcdef2eb0dec8d
    "Chapter 5. Alternative Syntax"), *Alternative Syntax*, tells us how we can abbreviate
    the test command to just a single [, we can also use [[ and (( depending on your
    needs.'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 第5章，“替代语法”，告诉我们如何将测试命令缩写为单个[，我们还可以根据需要使用[[和((。
- en: '[Chapter 6](part0046_split_000.html#1BRPS1-747571d9b4814e1dbffcdef2eb0dec8d
    "Chapter 6. Iterating with Loops"), *Iterating with* *Loops*, covers how loops
    are also conditional statements. We can repeat a block of code while a condition
    is true or false. In this way, using for, while, or until we can have the script
    complete the repetitive code sequences.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 第6章，“循环迭代”，介绍了循环也是条件语句。我们可以在条件为真或假时重复一段代码。通过使用for、while或until，我们可以让脚本完成重复的代码序列。
- en: '[Chapter 7](part0051_split_000.html#1GKCM1-747571d9b4814e1dbffcdef2eb0dec8d
    "Chapter 7. Creating Building Blocks with Functions"), *Creating Building Blocks*
    *with Functions*, covers how functions can encapsulate the code that we need to
    repeat within the script. This can help with readability and how easy a script
    is to maintain.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 第7章，“使用函数创建构建块”，介绍了函数如何封装我们在脚本中需要重复的代码。这可以提高可读性，以及脚本的易维护性。
- en: '[Chapter 8](part0056_split_000.html#1LCVG2-747571d9b4814e1dbffcdef2eb0dec8d
    "Chapter 8. Introducing sed"), *Introducing sed*, the stream editor, tells us
    how sed can be used to edit files dynamically and implement it in scripts. In
    this chapter, we look at how to use and work with sed.'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 第8章，“介绍sed”，流编辑器，告诉我们如何使用sed动态编辑文件并在脚本中实现它。在这一章中，我们将学习如何使用和处理sed。
- en: '[Chapter 9](part0060_split_000.html#1P71O2-747571d9b4814e1dbffcdef2eb0dec8d
    "Chapter 9. Automating Apache Virtual Hosts"), *Automating* *Apache Virtual Hosts*,
    covers the practical recipes that we can take away when we create a script to
    create virtual hosts on an Apache HTTPD server. We use sed within the scripts
    to edit the template used to define virtual hosts.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 第9章，“自动化Apache虚拟主机”，介绍了当我们创建一个脚本来在Apache HTTPD服务器上创建虚拟主机时，我们可以带走的实用配方。我们在脚本中使用sed来编辑用于定义虚拟主机的模板。
- en: '[Chapter 10](part0063_split_000.html#1S2JE1-747571d9b4814e1dbffcdef2eb0dec8d
    "Chapter 10. Awk Fundamentals"), *Awk Fundamentals*, looks at how we can start
    to process text date from the command line and using awk is another very powerful
    tool in Linux.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 第10章，“Awk基础”，介绍了我们如何开始处理命令行中的文本数据，使用awk是Linux中另一个非常强大的工具。
- en: '[Chapter 11](part0069_split_000.html#21PMQ1-747571d9b4814e1dbffcdef2eb0dec8d
    "Chapter 11. Summarizing Logs with Awk"), *Summarizing Logs with Awk*, tells us
    about the first practical example we look at with awk, allowing us to process
    log files on the web server. It also looks at how to report the IP address that
    has access to the server most often, as well as, how many errors occur and of
    which type.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '[第11章](part0069_split_000.html#21PMQ1-747571d9b4814e1dbffcdef2eb0dec8d "第11章。使用Awk总结日志")，*使用Awk总结日志*，告诉我们关于我们在awk中查看的第一个实际示例，允许我们处理Web服务器上的日志文件。它还介绍了如何报告最经常访问服务器的IP地址，以及发生了多少错误以及错误的类型。'
- en: '[Chapter 12](part0075_split_000.html#27GQ61-747571d9b4814e1dbffcdef2eb0dec8d
    "Chapter 12. A Better lastlog with Awk"), *A Better lastlog with Awk*, looks at
    more examples that we can use in awk to filter and format data provided by the
    lastlog command. It drills down to the specific information that we want and removes
    information we do not need.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '[第12章](part0075_split_000.html#27GQ61-747571d9b4814e1dbffcdef2eb0dec8d "第12章。使用Awk进行更好的lastlog")，*使用Awk进行更好的lastlog*，查看了我们可以在awk中使用的更多示例，以过滤和格式化lastlog命令提供的数据。它深入到我们想要的具体信息，并删除我们不需要的信息。'
- en: '[Chapter 13](part0079_split_000.html#2BASE1-747571d9b4814e1dbffcdef2eb0dec8d
    "Chapter 13. Using Perl as a Bash Scripting Alternative"), *Using Perl as a Bash
    Scripting Alternative*, introduces the Perl scripting language and the advantages
    that it can offer. We are not restricted to just using bash we also have Perl
    as a scripting language.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '[第13章](part0079_split_000.html#2BASE1-747571d9b4814e1dbffcdef2eb0dec8d "第13章。使用Perl作为Bash脚本的替代方案")，*使用Perl作为Bash脚本的替代方案*，介绍了Perl脚本语言及其提供的优势。我们不仅限于使用bash，还有Perl作为脚本语言。'
- en: '[Chapter 14](part0085_split_000.html#2H1VQ1-747571d9b4814e1dbffcdef2eb0dec8d
    "Chapter 14. Using Python as a Bash Scripting Alternative"), *Using Python as
    a Bash Scripting Alternative*, introduces you to Python and the Zen of Python
    that will help you with all programming languages. Like Perl, Python is a scripting
    language that can extend the functionality of your scripts.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '[第14章](part0085_split_000.html#2H1VQ1-747571d9b4814e1dbffcdef2eb0dec8d "第14章。使用Python作为Bash脚本的替代方案")，*使用Python作为Bash脚本的替代方案*，向您介绍了Python和Python之禅，这将帮助您学习所有编程语言。与Perl一样，Python是一种可以扩展脚本功能的脚本语言。'
- en: What you need for this book
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书所需内容
- en: Using any Linux distribution with the bash shell should be sufficient to complete
    this book. In the book we use examples that are produced using the Raspbian distribution
    on a Raspberry Pi; however, Linux distribution should be sufficient. If you have
    access to the command line in OS X on Apple systems, then you should be able to
    carry out most of the exercises without Linux.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 使用带有bash shell的任何Linux发行版应该足以完成本书。在本书中，我们使用的是在Raspberry Pi上使用Raspbian发行版生成的示例；但是，任何Linux发行版都应该足够。如果您在苹果系统的OS
    X命令行中，则应该能够完成大部分练习，而无需Linux。
- en: Who this book is for
  id: totrans-19
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书适合人群
- en: '*Mastering Linux Shell Scripting* has been written for Linux administrators
    who want to automate tasks in their daily lives, saving time and effort. You need
    to have command-line experience and be familiar with the tasks that you need to
    automate. A basic knowledge of scripting is expected.'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '*精通Linux Shell脚本*是为那些想要在日常生活中自动化任务、节省时间和精力的Linux管理员编写的。您需要具有命令行经验，并熟悉需要自动化的任务。预期具有基本的脚本知识。'
- en: Conventions
  id: totrans-21
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 约定
- en: In this book, you will find a number of text styles that distinguish between
    different kinds of information. Here are some examples of these styles and an
    explanation of their meaning.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书中，您将找到一些文本样式，用于区分不同类型的信息。以下是一些这些样式的示例及其含义的解释。
- en: 'Code words in text, database table names, folder names, filenames, file extensions,
    pathnames, dummy URLs, user input, and Twitter handles are shown as follows: "We
    again see that the `basename` is evaluated first, but we do not see the more detailed
    steps involved in running that command."'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟URL、用户输入和Twitter句柄显示如下："我们再次看到`basename`首先被评估，但我们没有看到运行该命令所涉及的更详细的步骤。"
- en: 'A block of code is set as follows:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 代码块设置如下：
- en: '[PRE0]'
  id: totrans-25
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'When we wish to draw your attention to a particular part of a code block, the
    relevant lines or items are set in bold:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们希望引起您对代码块的特定部分的注意时，相关行或项目将以粗体显示：
- en: '[PRE1]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Any command-line input or output is written as follows:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 任何命令行输入或输出都将按以下方式编写：
- en: '[PRE2]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '**New terms** and **important words** are shown in bold. Words that you see
    on the screen, for example, in menus or dialog boxes, appear in the text like
    this: "Clicking the **Next** button moves you to the next screen."'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: '**新术语**和**重要单词**以粗体显示。您在屏幕上看到的单词，例如菜单或对话框中的单词，会以这样的方式出现在文本中："单击**下一步**按钮将您移至下一个屏幕。"'
- en: Note
  id: totrans-31
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Warnings or important notes appear in a box like this.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 警告或重要说明会以这样的方式出现在一个框中。
- en: Tip
  id: totrans-33
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: Tips and tricks appear like this.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 提示和技巧会以这种方式出现。
- en: Reader feedback
  id: totrans-35
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 读者反馈
- en: Feedback from our readers is always welcome. Let us know what you think about
    this book—what you liked or disliked. Reader feedback is important for us as it
    helps us develop titles that you will really get the most out of.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的读者的反馈总是受欢迎的。让我们知道您对本书的看法——您喜欢或不喜欢什么。读者的反馈对我们很重要，因为它有助于我们开发您真正能够充分利用的书籍。
- en: To send us general feedback, simply e-mail `<[feedback@packtpub.com](mailto:feedback@packtpub.com)>`,
    and mention the book's title in the subject of your message.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 要向我们发送一般反馈，只需发送电子邮件至`<[feedback@packtpub.com](mailto:feedback@packtpub.com)>`，并在您的消息主题中提及书名。
- en: If there is a topic that you have expertise in and you are interested in either
    writing or contributing to a book, see our author guide at [www.packtpub.com/authors](http://www.packtpub.com/authors).
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您在某个专题上有专业知识，并且有兴趣编写或为书籍做出贡献，请参阅我们的作者指南[www.packtpub.com/authors](http://www.packtpub.com/authors)。
- en: Customer support
  id: totrans-39
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 客户支持
- en: Now that you are the proud owner of a Packt book, we have a number of things
    to help you to get the most from your purchase.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您是Packt书籍的自豪所有者，我们有很多事情可以帮助您充分利用您的购买。
- en: Downloading the example code
  id: totrans-41
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 下载示例代码
- en: You can download the example code files from your account at [http://www.packtpub.com](http://www.packtpub.com)
    for all the Packt Publishing books you have purchased. If you purchased this book
    elsewhere, you can visit [http://www.packtpub.com/support](http://www.packtpub.com/support)
    and register to have the files e-mailed directly to you.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从[http://www.packtpub.com](http://www.packtpub.com)的帐户中下载您购买的所有Packt Publishing图书的示例代码文件。如果您在其他地方购买了这本书，您可以访问[http://www.packtpub.com/support](http://www.packtpub.com/support)注册，直接将文件发送到您的电子邮件。
- en: Downloading the color images of this book
  id: totrans-43
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 下载本书的彩色图片
- en: 'We also provide you with a PDF file that has color images of the screenshots/diagrams
    used in this book. The color images will help you better understand the changes
    in the output. You can download this file from: [http://www.packtpub.com/sites/default/files/downloads/MasteringLinuxShellScripting_ColorImages.pdf](http://www.packtpub.com/sites/default/files/downloads/MasteringLinuxShellScripting_ColorImages.pdf).'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还为您提供了一个PDF文件，其中包含本书中使用的截图/图表的彩色图片。彩色图片将帮助您更好地理解输出中的变化。您可以从以下网址下载此文件：[http://www.packtpub.com/sites/default/files/downloads/MasteringLinuxShellScripting_ColorImages.pdf](http://www.packtpub.com/sites/default/files/downloads/MasteringLinuxShellScripting_ColorImages.pdf)。
- en: Errata
  id: totrans-45
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 勘误
- en: Although we have taken every care to ensure the accuracy of our content, mistakes
    do happen. If you find a mistake in one of our books—maybe a mistake in the text
    or the code—we would be grateful if you could report this to us. By doing so,
    you can save other readers from frustration and help us improve subsequent versions
    of this book. If you find any errata, please report them by visiting [http://www.packtpub.com/submit-errata](http://www.packtpub.com/submit-errata),
    selecting your book, clicking on the **Errata** **Submission** **Form** link,
    and entering the details of your errata. Once your errata are verified, your submission
    will be accepted and the errata will be uploaded to our website or added to any
    list of existing errata under the Errata section of that title.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管我们已经尽一切努力确保内容的准确性，但错误还是会发生。如果您在我们的书中发现错误——可能是文本或代码中的错误——我们将不胜感激，如果您能向我们报告。通过这样做，您可以帮助其他读者避免挫败感，并帮助我们改进本书的后续版本。如果您发现任何勘误，请访问[http://www.packtpub.com/submit-errata](http://www.packtpub.com/submit-errata)报告，选择您的书，点击**勘误提交表**链接，并输入您的勘误详情。一旦您的勘误经过验证，您的提交将被接受，并且勘误将被上传到我们的网站或添加到该书标题的勘误部分的任何现有勘误列表中。
- en: To view the previously submitted errata, go to [https://www.packtpub.com/books/content/support](https://www.packtpub.com/books/content/support)
    and enter the name of the book in the search field. The required information will
    appear under the **Errata** section.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 要查看先前提交的勘误，请转到[https://www.packtpub.com/books/content/support](https://www.packtpub.com/books/content/support)并在搜索字段中输入书名。所需信息将出现在**勘误**部分下。
- en: Piracy
  id: totrans-48
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 盗版
- en: Piracy of copyrighted material on the Internet is an ongoing problem across
    all media. At Packt, we take the protection of our copyright and licenses very
    seriously. If you come across any illegal copies of our works in any form on the
    Internet, please provide us with the location address or website name immediately
    so that we can pursue a remedy.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 互联网上侵犯版权材料的盗版问题是所有媒体的持续问题。在Packt，我们非常重视版权和许可的保护。如果您在互联网上发现我们作品的任何形式的非法副本，请立即向我们提供位置地址或网站名称，以便我们采取补救措施。
- en: Please contact us at `<[copyright@packtpub.com](mailto:copyright@packtpub.com)>`
    with a link to the suspected pirated material.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 请通过链接`<[copyright@packtpub.com](mailto:copyright@packtpub.com)>`与我们联系，提供涉嫌盗版材料的链接。
- en: We appreciate your help in protecting our authors and our ability to bring you
    valuable content.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 我们感谢您在保护我们的作者和我们为您提供有价值的内容的能力方面的帮助。
- en: Questions
  id: totrans-52
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 问题
- en: If you have a problem with any aspect of this book, you can contact us at `<[questions@packtpub.com](mailto:questions@packtpub.com)>`,
    and we will do our best to address the problem.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您对本书的任何方面有问题，可以通过`<[questions@packtpub.com](mailto:questions@packtpub.com)>`与我们联系，我们将尽力解决问题。
