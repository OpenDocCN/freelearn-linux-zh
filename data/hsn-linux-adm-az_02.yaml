- en: 'Chapter 2: Getting Started with the Azure Cloud'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第2章：开始使用Azure云
- en: In the first chapter, we covered the history of, and the ideas behind, virtualization
    and cloud computing. After that, you read about the Microsoft Azure cloud. This
    chapter will help you take your first steps into the world of Azure, get access
    to Azure, explore the different Linux offerings, and deploy your first Linux virtual
    machine.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在第一章中，我们介绍了虚拟化和云计算的历史和理念。之后，你了解了微软Azure云。本章将帮助你迈出Azure世界的第一步，获取Azure访问权限，探索不同的Linux提供，并部署你的第一个Linux虚拟机。
- en: After deployment, you will need access to your virtual machine using **Secure
    Shell** (**SSH**) with password authentication or using an SSH key pair.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 部署后，你将需要使用**安全外壳**（**SSH**）进行密码验证或使用SSH密钥对访问你的虚拟机。
- en: 'To take the first steps on your journey into the Azure cloud, it is important
    to complete all the exercises and examine the outcomes. In this chapter, we will
    be using PowerShell as well as the Azure CLI. Feel free to follow whichever you''re
    comfortable with; however, learning both won''t hurt. The key objectives of this
    chapter are:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始你的Azure云之旅，完成所有练习并检查结果非常重要。在本章中，我们将使用PowerShell以及Azure CLI。随意选择你喜欢的方式进行跟随；然而，学习两者都不会有坏处。本章的关键目标是：
- en: Setting up your Azure account.
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置你的Azure帐户。
- en: Logging in to Azure using the Azure CLI and PowerShell.
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Azure CLI和PowerShell登录Azure。
- en: Interacting with **Azure Resource Manager** (**ARM**) to create network and
    storage resources.
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与**Azure资源管理器**（**ARM**）交互以创建网络和存储资源。
- en: Understanding Linux distributions and Microsoft-endorsed distributions.
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 了解Linux发行版和微软认可的发行版。
- en: Deploying your first Linux virtual machine.
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 部署你的第一个Linux虚拟机。
- en: Note
  id: totrans-9
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 注意
- en: Everything in this chapter is tested on macOS, Windows Subsystem for Linux,
    and the latest versions of CentOS and openSUSE LEAP.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中的所有内容都在macOS、Linux子系统和最新版本的CentOS和openSUSE LEAP上进行了测试。
- en: Technical Requirements
  id: totrans-11
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'If you want to try all the examples in this chapter, you''ll need a browser
    at the very least. For stability reasons, it''s important to use a very recent
    version of a browser. Microsoft offers a list of supported browsers in the official
    Azure documentation:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想尝试本章中的所有示例，至少需要一个浏览器。出于稳定性的考虑，使用最新版本的浏览器非常重要。微软在官方Azure文档中提供了支持的浏览器列表：
- en: Microsoft Edge (latest version)
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 微软Edge（最新版本）
- en: Internet Explorer 11
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Internet Explorer 11
- en: Safari (latest version, Mac only)
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Safari（最新版本，仅限Mac）
- en: Chrome (latest version)
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Chrome（最新版本）
- en: Firefox (latest version)
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Firefox（最新版本）
- en: Based on personal experience, we recommend using Google Chrome or a browser
    based on a recent version of its engine, such as Vivaldi.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 根据个人经验，我们建议使用Google Chrome或基于其引擎最新版本的浏览器，如Vivaldi。
- en: You can do all the exercises in your browser, even the exercises involving the
    command line. In practice, it's a good idea to use a local installation of the
    Azure CLI or PowerShell; it's faster, it's easier to copy and paste code, and
    you can save history and the output from the commands.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在浏览器中完成所有练习，甚至包括命令行练习。实际上，使用本地安装的Azure CLI或PowerShell是个好主意；它更快，更容易复制和粘贴代码，你还可以保存历史和命令的输出。
- en: Getting Access to Azure
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 获取Azure访问权限
- en: To start with Azure, the first thing you'll need is an account. Go to [https://azure.microsoft.com](https://azure.microsoft.com)
    and get yourself a free account to get started, or use the corporate account that
    is already in use. Another possibility is to use Azure with a Visual Studio Professional
    or Enterprise subscription, which will give you **Microsoft Developer Network**
    (**MSDN**) credits for Azure. If your organization already has an Enterprise Agreement
    with Microsoft, you can use your Enterprise subscription, or you can sign up for
    a pay-as-you-go subscription (if you have already used your free trial).
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 开始使用Azure，你需要的第一件事是一个帐户。前往[https://azure.microsoft.com](https://azure.microsoft.com)并获取一个免费帐户开始，或者使用已经在使用的公司帐户。另一个可能性是使用Visual
    Studio专业版或企业版订阅的Azure，这将为你提供Azure的**微软开发者网络**（**MSDN**）积分。如果你的组织已经与微软签订了企业协议，你可以使用你的企业订阅，或者你可以注册一个按使用量付费的订阅（如果你已经使用了免费试用）。
- en: If you are using a free account, you'll get some credits to start, some of the
    popular services for a limited time, and some services that will stay free always,
    such as the container service. You can find the most recent list of free services
    at [https://azure.microsoft.com/en-us/free](https://azure.microsoft.com/en-us/free).
    You won't be charged during the trial period, except for virtual machines that
    need additional licensing, but you do need a credit card to identify yourself.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用的是免费帐户，你将获得一些信用额度来开始，一些流行的服务有限时间内免费，以及一些永远免费的服务，如容器服务。你可以在[https://azure.microsoft.com/en-us/free](https://azure.microsoft.com/en-us/free)找到最新的免费服务列表。在试用期间，除了需要额外许可的虚拟机外，你不会被收费，但你需要一张信用卡来验证身份。
- en: Logging in Using the Azure portal
  id: totrans-23
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用Azure门户登录
- en: Point your browser to [https://portal.azure.com](https://portal.azure.com) and
    use your credentials to log in. You are ready to start using Azure, or, in other
    words, to start using your subscription. In Azure, a subscription permits you
    to create and deploy resources using the Azure portal/the Azure CLI/PowerShell
    with your account. It is also used for accounting and billing.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 将浏览器指向[https://portal.azure.com](https://portal.azure.com)并使用你的凭据登录。你现在可以开始使用Azure，或者换句话说，开始使用你的订阅。在Azure中，订阅允许你使用你的帐户使用Azure门户/Azure
    CLI/PowerShell创建和部署资源。它也用于会计和计费。
- en: 'The Azure portal takes you to a dashboard that you can modify to meet your
    monitoring needs. You can now:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: Azure门户将带你到一个仪表板，你可以根据自己的监控需求进行修改。你现在可以：
- en: Inspect your resources.
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检查你的资源。
- en: Create new resources.
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建新资源。
- en: Visit the Marketplace, which is an online store where you can purchase and deploy
    applications or services that are built for the Azure cloud.
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 访问Marketplace，这是一个在线商店，你可以购买和部署专为Azure云构建的应用程序或服务。
- en: Get insights into your billing.
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 了解您的计费情况。
- en: You can use the web interface, doing everything graphically, or use Azure Cloud
    Shell via the web interface, which provides a Bash or PowerShell interface.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用网络界面，以图形方式执行所有操作，或者通过网络界面使用 Azure Cloud Shell，它提供了 Bash 或 PowerShell 界面。
- en: Getting Command-line Access to Azure
  id: totrans-31
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 获取对 Azure 的命令行访问
- en: 'There are several good reasons to use the command line. That''s why, in this
    book, we''ll mostly cover Azure command-line access:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 有几个很好的理由使用命令行。这就是为什么在本书中，我们将主要介绍 Azure 命令行访问的原因：
- en: It can help you to understand the architecture of Azure. In the graphical interface,
    often you can do many things in one configuration window without understanding
    the relationships between the different fields and components.
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它可以帮助您了解 Azure 的架构。在图形界面中，通常可以在一个配置窗口中执行许多操作，而不必了解不同字段和组件之间的关系。
- en: It is the first step in automation and orchestration.
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这是自动化和编排的第一步。
- en: 'The web interface is still in active development; the web interface can, and
    will, change over time:'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络界面仍在积极开发中；网络界面可以并且将会随着时间改变：
- en: Some features and options are not available yet.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 某些功能和选项目前尚不可用。
- en: It is possible that Microsoft will relocate features and options in the web
    interface.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 微软可能会在网络界面中重新定位功能和选项。
- en: The command-line interface, on the other hand, is very stable in syntax and
    output.
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 另一方面，命令行界面在语法和输出方面非常稳定。
- en: In this book, we will use both the Azure CLI in the Bash shell and PowerShell
    with the PowerShell Az module. Both are well-suited, platform-agnostic, and there
    is, besides one or two exceptions, no difference between them in terms of features.
    Choose your favorite because you're already familiar with it, or give both interfaces
    a try and choose afterward.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书中，我们将在 Bash shell 中使用 Azure CLI 和带有 PowerShell Az 模块的 PowerShell。两者都非常适合，与平台无关，并且除了一两个例外之外，在功能上没有区别。选择您喜欢的，因为您已经熟悉它，或者尝试两种界面，然后选择。
- en: Note
  id: totrans-40
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 注意
- en: Please note that copying and pasting commands from this book might give you
    some errors due to spaces and indentations. For better results, always type in
    commands. Also, this will help you get used to the commands.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，从本书中复制和粘贴命令可能会由于空格和缩进而导致错误。为了获得更好的结果，请始终输入命令。此外，这将帮助您熟悉命令。
- en: Installing the Azure CLI
  id: totrans-42
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装 Azure CLI
- en: If you use the Bash interface within Azure Cloud Shell, there is a pretty complete
    Linux environment Azure command-line interface installing available to play with.
    It also provides Azure-specific commands, such as the `az` command.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您在 Azure Cloud Shell 中使用 Bash 界面，那么可以使用完整的 Linux 环境来安装 Azure 命令行界面。它还提供了 Azure
    特定的命令，比如 `az` 命令。
- en: You can also install this utility on Windows, macOS, and Linux. A Docker container
    is available as well. You can find detailed installation instructions for all
    these platforms at [https://docs.microsoft.com/en-us/cli/azure](https://docs.microsoft.com/en-us/cli/azure).
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 您也可以在 Windows、macOS 和 Linux 上安装此实用程序。还提供了 Docker 容器。您可以在 [https://docs.microsoft.com/en-us/cli/azure](https://docs.microsoft.com/en-us/cli/azure)
    找到所有这些平台的详细安装说明。
- en: 'Let''s use CentOS/ **Red Hat Enterprise Linux** (**RHEL**) 7 as an example
    to install the Azure CLI:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们以 CentOS/**Red Hat Enterprise Linux** (**RHEL**) 7 为例来安装 Azure CLI：
- en: 'Import the Microsoft repository''s **GNU Privacy Guard** (**GPG**) key:'
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导入 Microsoft 存储库的 **GNU 隐私卫士** (**GPG**) 密钥：
- en: '[PRE0]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Add the repository:'
  id: totrans-48
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加存储库：
- en: '[PRE1]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Install the software:'
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装软件：
- en: '[PRE2]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'To install the Azure CLI on an Ubuntu- or Debian-based system, use this:'
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要在基于 Ubuntu 或 Debian 的系统上安装 Azure CLI，请使用以下命令：
- en: '[PRE3]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: On macOS, you have to install Homebrew first, a free and open-source package
    management system that simplifies the installation of, mostly, open-source software.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 在 macOS 上，您必须首先安装 Homebrew，这是一个免费的开源软件包管理系统，简化了大多数开源软件的安装。
- en: 'Open a Terminal and execute the following:'
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开终端并执行以下操作：
- en: '[PRE4]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Update Homebrew and install the Azure CLI:'
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 更新 Homebrew 并安装 Azure CLI：
- en: '[PRE5]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'After installing the Azure CLI, you can verify the version installed using
    this:'
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装 Azure CLI 后，您可以使用以下命令验证已安装的版本：
- en: '[PRE6]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Logging in with the Azure CLI
  id: totrans-61
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用 Azure CLI 登录
- en: 'The Azure CLI is a command-line tool that''s used to access or manage Azure
    resources, and the good thing is that it''s available for macOS, Linux, and Windows
    platforms. Before you can use the CLI, you have to log in:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: Azure CLI 是用于访问或管理 Azure 资源的命令行工具，好处是它适用于 macOS、Linux 和 Windows 平台。在使用 CLI 之前，您必须登录：
- en: '[PRE7]'
  id: totrans-63
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: This command will open a browser and requires you to log in with your Microsoft
    account. If you are getting an error stating that the shell was not able to open
    the interactive browser, use `az login –use-device-code`. This will generate a
    code, and you can use it in [https://www.microsoft.com/devicelogin](https://www.microsoft.com/devicelogin)
    to complete the authentication.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 此命令将打开浏览器，并要求您使用 Microsoft 帐户登录。如果出现错误，指出 shell 无法打开交互式浏览器，请使用 `az login –use-device-code`。这将生成一个代码，您可以在
    [https://www.microsoft.com/devicelogin](https://www.microsoft.com/devicelogin)
    中使用它完成身份验证。
- en: 'If this is successful, it will give you some output in JSON format regarding
    your subscription, such as your username:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 如果成功，它将以 JSON 格式给出一些关于您的订阅的输出，比如您的用户名：
- en: '[PRE8]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'To get this information again, type the following:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 要再次获取此信息，请输入以下内容：
- en: '[PRE9]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: You can always format the output in JSON, JSONC, TABLE, or TSV formats by using
    extra parameters.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以始终使用额外的参数将输出格式化为 JSON、JSONC、TABLE 或 TSV 格式。
- en: 'JSON (or JSONC, the colored variant) format is easier to parse in programming
    and scripting languages:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: JSON（或 JSONC，彩色变体）格式在编程和脚本语言中更容易解析：
- en: '![The output showing the subscription details on the command prompt in JSON
    format](img/B15455_02_01.jpg)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
  zh: '![在命令提示符中显示订阅详细信息的输出以 JSON 格式](img/B15455_02_01.jpg)'
- en: 'Figure 2.1: Subscription details in JSONC format'
  id: totrans-72
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图 2.1：以 JSONC 格式显示的订阅详细信息
- en: '**Tab-Separated Values** (**TSV**) is a good idea if the output is a single
    value, if you want to use text-filtering utilities such as AWK, or if you want
    to export the output to a spreadsheet:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: '**制表符分隔值**（**TSV**）是一个很好的主意，如果输出是单个值，如果您想要使用文本过滤实用程序（如AWK），或者如果您想要将输出导出到电子表格中：'
- en: '![The output showing the subscription details on the command prompt separated
    by Tabs](img/B15455_02_02.jpg)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![输出显示命令提示符上的订阅详细信息，由制表符分隔](img/B15455_02_02.jpg)'
- en: 'Figure 2.2: Tab-separated subscription details'
  id: totrans-75
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图2.2：以制表符分隔的订阅详细信息
- en: 'The table output is very human-readable, but is more limited than the default
    output:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 表格输出非常易于阅读，但比默认输出更受限制：
- en: '![The output showing the subscription details on the command prompt in table
    format](img/B15455_02_03.jpg)'
  id: totrans-77
  prefs: []
  type: TYPE_IMG
  zh: '![输出显示命令提示符上的订阅详细信息，以表格格式显示](img/B15455_02_03.jpg)'
- en: 'Figure 2.3: Subscription details in tabular format'
  id: totrans-78
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图2.3：表格格式的订阅详细信息
- en: 'To get a list of subscriptions that the logged-in account has access to in
    a table format, execute the following command:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 要以表格格式获取已登录帐户具有访问权限的订阅列表，请执行以下命令：
- en: '[PRE10]'
  id: totrans-80
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'To make reading the JSON output easier, you can also query for specific fields:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 为了更容易阅读JSON输出，您还可以查询特定字段：
- en: '[PRE11]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: If you already have a lot of resources or accounts, going through the entire
    list will be very hard. Luckily, there is a way to drill down the output and get
    just the info that you need. Chaining the command with the `--query` parameter
    will help you do this, using a powerful query language called JMESPATH ([http://jmespath.org](http://jmespath.org)).
    Look at the JSON output of the `az account list` command again. This query is
    searching for the `user` field and the `name` property.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您已经拥有大量资源或帐户，浏览整个列表将非常困难。幸运的是，有一种方法可以深入了解输出并仅获取所需的信息。使用`--query`参数链接命令将帮助您执行此操作，使用称为JMESPATH（[http://jmespath.org](http://jmespath.org)）的强大查询语言。再次查看`az
    account list`命令的JSON输出。此查询正在搜索`user`字段和`name`属性。
- en: 'Let''s go back to the login procedure. Doing this every time, again and again,
    may not be the most user-friendly procedure. A better way to do it is by creating
    a service principal, also known as an app registration, to provide a credential
    for a specific application:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们回到登录过程。每次都这样做可能不是最用户友好的过程。更好的方法是创建服务主体，也称为应用程序注册，为特定应用程序提供凭据：
- en: '[PRE12]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'You can provide a name for your application, but certain special characters
    are not allowed. The reason is that `APP_NAME` will create a URL, so all the characters
    that are forbidden in URLs cannot be added to `APP_NAME` (for example, @ and %).
    The output, again in JSON format, will provide an application ID (the `appID`
    parameter):'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以为应用程序提供名称，但是某些特殊字符是不允许的。原因是`APP_NAME`将创建一个URL，因此在URL中禁止的所有字符都不能添加到`APP_NAME`中（例如@和%）。再次以JSON格式输出，将提供应用程序ID（`appID`参数）：
- en: '[PRE13]'
  id: totrans-87
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Please note down the output on a notepad because we will be using these values
    for authentication. An application or service principal represents an object in
    the Azure tenant. A tenant refers to an organization, often denoted as <yourcompany/yourname>.onmicrosoft.com,
    which manages and owns an instance of Microsoft cloud services. If we look from
    an Azure perspective, all services deployed will be associated with a subscription,
    and the subscription will be mapped to a tenant. A tenant can have multiple subscriptions
    hosting different services. From the preceding output, we''ll get the following
    values:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 请在记事本上记下输出，因为我们将使用这些值进行身份验证。应用程序或服务主体代表Azure租户中的对象。租户是指一个组织，通常表示为<yourcompany/yourname>.onmicrosoft.com，它管理和拥有Microsoft云服务的实例。从Azure的角度来看，部署的所有服务都将与订阅相关联，并且订阅将映射到租户。一个租户可以拥有托管不同服务的多个订阅。从前面的输出中，我们将获得以下值：
- en: '`appID`: The application ID is similar to the username of the application.
    We will be using this ID as our username when logging in.'
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`appID`：应用程序ID类似于应用程序的用户名。我们将在登录时使用此ID作为用户名。'
- en: '`displayName`: A friendly name given to the application when we created the
    app. We set the name via the `name` parameter.'
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`displayName`：在创建应用程序时为应用程序指定的友好名称。我们通过`name`参数设置名称。'
- en: '`name`: A URL based on the name we have given.'
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`name`：基于我们给定的名称的URL。'
- en: '`password`: This is the password of the service principal we created. When
    logging in, we''ll use this value in the password field.'
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`password`：这是我们创建的服务主体的密码。在登录时，我们将在密码字段中使用此值。'
- en: '`tenant`: The tenant ID; we discussed tenants in the previous paragraph.'
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`tenant`：租户ID；我们在前一段中讨论了租户。'
- en: An application that requires access must be represented by a security principal.
    The security principal defines the access policy and permissions for the user/application
    in the tenant. This enables the authentication of the user/application during
    sign-in and role-based authorization during resource access. To summarize, you
    can use `appID` to sign in.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 需要访问的应用程序必顶由安全主体表示。安全主体定义了租户中用户/应用程序的访问策略和权限。这使得在登录期间对用户/应用程序进行身份验证，并在资源访问期间进行基于角色的授权成为可能。总之，您可以使用`appID`进行登录。
- en: 'List the roles that are assigned to the newly created `appID`:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 列出分配给新创建的`appID`的角色：
- en: '[PRE14]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: By default, the contributor role is used. This role has full permissions to
    read and write to your Azure account.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下使用贡献者角色。此角色具有对Azure帐户的读写权限。
- en: 'Now, it''s a good idea to test this and log out:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，测试一下并注销：
- en: '[PRE15]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Now, log in again using `appID`. You can use the values you copied earlier
    to complete the authentication:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，再次使用`appID`登录。您可以使用之前复制的值来完成身份验证：
- en: '[PRE16]'
  id: totrans-101
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'Unfortunately, there is no way to store the username, `appID`, or `tenant id`
    in a configuration file. Optionally, you can add `--password` to the command:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 不幸的是，没有办法将用户名、`appID`或`tenant id`存储在配置文件中。可选地，您可以将`--password`添加到命令中：
- en: '[PRE17]'
  id: totrans-103
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Instead of typing complete commands using the `az` command, you can also open
    it in interactive shell mode:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 除了使用`az`命令输入完整命令之外，还可以以交互式shell模式打开它：
- en: '[PRE18]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: One of the greatest features of this shell is that it splits the terminal into
    two windows. In the upper screen, you can type your commands; in the lower screen,
    you'll get help while typing commands. There is also auto-complete support for
    commands, parameters, and often parameter values.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 这个shell最大的特点之一是它将终端分成两个窗口。在上屏幕上，您可以输入命令；在下屏幕上，您在输入命令时会得到帮助。命令、参数和通常参数值也支持自动完成。
- en: PowerShell
  id: totrans-107
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: PowerShell
- en: 'PowerShell is a Microsoft-developed scripting language that is integrated into
    .NET Framework. It was designed by Jeffrey Snover, Bruce Payette, and James Truher
    in 2006\. PowerShell is not only available for Windows, but also for Linux and
    macOS. You can find detailed instructions for using PowerShell with these operating
    systems on the GitHub repository for PowerShell: [https://github.com/PowerShell](https://github.com/PowerShell).'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: PowerShell是由Microsoft开发的脚本语言，集成到.NET Framework中。它是由Jeffrey Snover、Bruce Payette和James
    Truher于2006年设计的。PowerShell不仅适用于Windows，还适用于Linux和macOS。您可以在PowerShell的GitHub存储库上找到使用这些操作系统的详细说明：[https://github.com/PowerShell](https://github.com/PowerShell)。
- en: 'For instance, to install it in RHEL or CentOS, follow these steps:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，在RHEL或CentOS中安装它，请按照以下步骤操作：
- en: 'Import the Microsoft repository''s GPG key if you didn''t do so while following
    the installation procedure for the Azure CLI:'
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您在安装Azure CLI时没有导入Microsoft存储库的GPG密钥，请执行此操作：
- en: '[PRE19]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Add the repository:'
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加存储库：
- en: '[PRE20]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'Install the software:'
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装软件：
- en: '[PRE21]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: Use `pwsh -v` to show the installed version.
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`pwsh -v`显示已安装的版本。
- en: 'Enter PowerShell:'
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入PowerShell：
- en: '[PRE22]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'On macOS, you''ll need Homebrew and Homebrew Cask. Cask extends Homebrew to
    install more and bigger applications:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 在macOS上，您需要Homebrew和Homebrew Cask。Cask扩展了Homebrew以安装更多和更大的应用程序：
- en: 'Install Homebrew Cask:'
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装Homebrew Cask：
- en: '[PRE23]'
  id: totrans-121
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'Install PowerShell:'
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装PowerShell：
- en: '[PRE24]'
  id: totrans-123
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: Use `pwsh -v` to show the installed version.
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`pwsh -v`显示已安装的版本。
- en: 'To enter PowerShell:'
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 进入PowerShell：
- en: '[PRE25]'
  id: totrans-126
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'After the installation of PowerShell, you''re ready to install the Az module.
    Downloading the module may take some time, depending upon your internet speed.
    You''ll be able to see the progress of the download in the shell:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 安装PowerShell后，您可以安装Az模块。根据您的互联网速度，下载模块可能需要一些时间。您将能够在shell中看到下载的进度：
- en: '[PRE26]'
  id: totrans-128
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'PowerShell uses the `PowerShellGet` cmdlet to download the module and its dependencies
    from the PowerShell Gallery, an online repository that hosts many modules. Please
    note that you''ll need administrator privileges in Windows and Linux to do this.
    The PowerShell Gallery isn''t configured as a trusted repository:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: PowerShell使用`PowerShellGet` cmdlet从PowerShell Gallery下载模块及其依赖项，PowerShell Gallery是一个托管许多模块的在线存储库。请注意，您需要在Windows和Linux中具有管理员权限才能执行此操作。PowerShell
    Gallery未配置为受信任的存储库：
- en: '[PRE27]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: Answer the question in the listing with `[A] Yes to All`.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 在列表中用`[A] Yes to All`回答问题。
- en: 'It is possible now, due to the `force` parameter, that you have multiple versions
    of the Az module installed. You can verify the existence of multiple versions
    with the following command:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 现在可能由于`force`参数，您安装了多个Az模块的版本。您可以使用以下命令验证多个版本的存在：
- en: '[PRE28]'
  id: totrans-133
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: The latest version will be used by default, unless you use the `-RequiredVersion`
    parameter when importing the module.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下将使用最新版本，除非在导入模块时使用`-RequiredVersion`参数。
- en: Logging in with PowerShell
  id: totrans-135
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用PowerShell登录
- en: 'After the installation is complete, import the module:'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 安装完成后，导入模块：
- en: '[PRE29]'
  id: totrans-137
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: If you don't create a PowerShell script and only execute commands within the
    PowerShell environment when playing with Azure, you'll need to execute this command
    again. But, if you want, you can automatically load the modules.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您不创建PowerShell脚本，而只在与Azure交互时在PowerShell环境中执行命令，您将需要再次执行此命令。但是，如果您愿意，您可以自动加载模块。
- en: 'First, find out where your PowerShell profile is on your filesystem by executing
    the following:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，通过执行以下命令找出您的PowerShell配置文件在文件系统上的位置：
- en: '[PRE30]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'Open or create this file in a text editor and add the following line:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 在文本编辑器中打开或创建此文件，并添加以下行：
- en: '[PRE31]'
  id: totrans-142
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: Note
  id: totrans-143
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 注意
- en: It may be necessary to create the directory structure before you can actually
    create this file.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 在实际创建此文件之前，可能需要创建目录结构。
- en: Now you can execute all the available commands for Azure.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您可以执行所有可用的Azure命令。
- en: 'Log in using the following cmdlet:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下cmdlet登录：
- en: '[PRE32]'
  id: totrans-147
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'This will open an interactive browser window, where you can use your credentials
    to authenticate. If the result doesn''t show you a tenant ID, execute this:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 这将打开一个交互式浏览器窗口，您可以使用您的凭据进行身份验证。如果结果没有显示租户ID，请执行此操作：
- en: '[PRE33]'
  id: totrans-149
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'And now, log in again using the tenant ID you have found:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，使用您找到的租户ID再次登录：
- en: '[PRE34]'
  id: totrans-151
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'If you have multiple subscriptions, you can add the `-Subscription` parameter
    and the subscription ID as well. As discussed before, it''s maybe a good idea
    to create a service principal:'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您有多个订阅，您可以添加`-Subscription`参数和订阅ID。如前所述，创建服务主体可能是一个好主意：
- en: '[PRE35]'
  id: totrans-153
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'If you don''t mention `DisplayName`, which is the friendly name for the service
    principal, Azure will generate a name in the format azure-powershell-MM-dd-yyyy-HH-mm-ss.
    Next, you need to retrieve the application ID for the newly created service principal:'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您不提及`DisplayName`，这是服务主体的友好名称，Azure将以格式azure-powershell-MM-dd-yyyy-HH-mm-ss生成一个名称。接下来，您需要检索新创建的服务主体的应用程序ID：
- en: '[PRE36]'
  id: totrans-155
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: 'And the password can be stored to a variable, which will be encrypted, and
    we must decrypt it:'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 密码可以存储到一个变量中，该变量将被加密，我们必须解密它：
- en: '[PRE37]'
  id: totrans-157
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: The `$UnsecureSecret` variable contains the password for your service principal.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: '`$UnsecureSecret`变量包含服务主体的密码。'
- en: 'To be able to authenticate, we need the credentials of the service principal:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 为了能够进行身份验证，我们需要服务主体的凭据：
- en: '[PRE38]'
  id: totrans-160
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: 'Provide the `ApplicationID` and the password, which are stored in the `$newsp.ApplicationId`
    and `$UnsecureSecret` variables respectively. Now we have everything we need to
    connect to Azure using these credentials:'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 提供`ApplicationID`和密码，它们分别存储在`$newsp.ApplicationId`和`$UnsecureSecret`变量中。现在我们有了使用这些凭据连接到Azure所需的一切：
- en: '[PRE39]'
  id: totrans-162
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: 'Now, save the context:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，保存上下文：
- en: '[PRE40]'
  id: totrans-164
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: 'Overwrite the existing content if necessary. Exit the PowerShell environment
    and execute PowerShell. Make sure that you are logged into Azure and verify the
    context using the following command:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 必要时覆盖现有内容。退出PowerShell环境并执行PowerShell。确保你已登录到Azure并使用以下命令验证上下文：
- en: '[PRE41]'
  id: totrans-166
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: Azure Resource Manager
  id: totrans-167
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Azure资源管理器
- en: Before you can start the deployment of your first Linux virtual machine, it's
    important to know more about **Azure Resource Manager** (**ARM**).
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始部署你的第一个Linux虚拟机之前，了解**Azure资源管理器**（**ARM**）更加重要。
- en: Basically, ARM enables you to work with resources such as storage and virtual
    machines. To do so, you have to create one or more resource groups so you can
    execute life cycle operations, such as deploying, updating, and deleting all the
    resources in a resource group, in a single operation.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 基本上，ARM使你能够使用诸如存储和虚拟机之类的资源。为此，你必须创建一个或多个资源组，以便你可以执行生命周期操作，如在一个操作中部署、更新和删除资源组中的所有资源。
- en: Note
  id: totrans-170
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 注意
- en: A resource group must be created in a region, also known as a location. Please
    notice that there may be differences between the services offered in different
    regions. To find out more about these differences, please visit [https://azure.microsoft.com/en-us/global-infrastructure/services/](https://azure.microsoft.com/en-us/global-infrastructure/services/).
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 资源组必须在一个区域中创建，也被称为位置。请注意，不同区域提供的服务可能会有所不同。要了解更多关于这些差异的信息，请访问[https://azure.microsoft.com/en-us/global-infrastructure/services/](https://azure.microsoft.com/en-us/global-infrastructure/services/)。
- en: 'Azure has more than 54 regions. If a location is not available, it needs to
    be whitelisted for your account. For that, you can reach out to Microsoft Support.
    To get a list of the available locations and supported resource providers for
    your account, execute the following command in PowerShell:'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: Azure有超过54个区域。如果一个位置不可用，需要为你的账户加入白名单。为此，你可以联系微软支持。要获取你的账户可用位置和支持的资源提供程序列表，请在PowerShell中执行以下命令：
- en: '[PRE42]'
  id: totrans-173
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: 'You can also execute the following in Bash:'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 你也可以在Bash中执行以下操作：
- en: '[PRE43]'
  id: totrans-175
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: 'Then, create a resource group in one of the regions:'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，在其中一个区域创建一个资源组：
- en: '[PRE44]'
  id: totrans-177
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: 'Now, verify the result:'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，验证结果：
- en: '[PRE45]'
  id: totrans-179
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: 'This is the Bash version of the preceding command:'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 这是前述命令的Bash版本：
- en: '[PRE46]'
  id: totrans-181
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: 'To verify the result of **Azure Resource Manager (ARM)** this command, execute
    the following:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 要验证**Azure资源管理器（ARM）**的结果，执行以下命令：
- en: '[PRE47]'
  id: totrans-183
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: 'Besides working with regions and resource groups, you have to understand the
    concept of storage redundancy. The available replication options are as follows:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 除了使用区域和资源组，你还必须了解存储冗余的概念。可用的复制选项如下：
- en: 'Standard_LRS: Locally redundant storage'
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Standard_LRS：本地冗余存储
- en: 'Premium_LRS: Same as LRS, but it supports File Storage as well.'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: Premium_LRS：与LRS相同，但也支持文件存储。
- en: 'Standard_GRS: Geo-redundant storage'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: Standard_GRS：地理冗余存储
- en: 'Standard_RAGRS: Read-access geo-redundant storage'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: Standard_RAGRS：读取访问地理冗余存储
- en: 'Standard_ZRS: Zone-redundant storage; ZRS doesn''t support Blob storage'
  id: totrans-189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Standard_ZRS：区域冗余存储；ZRS不支持Blob存储
- en: Note
  id: totrans-190
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 注意
- en: 'More information is available on the Microsoft website: [https://docs.microsoft.com/en-us/azure/storage/common/storage-redundancy](https://docs.microsoft.com/en-us/azure/storage/common/storage-redundancy).'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 更多信息可在微软网站上找到：[https://docs.microsoft.com/en-us/azure/storage/common/storage-redundancy](https://docs.microsoft.com/en-us/azure/storage/common/storage-redundancy)。
- en: 'Understanding this concept is important because, together with your resource
    group, a storage account is needed in a region. A storage account provides a unique
    namespace in Azure to store data (such as diagnostics) and the possibility to
    use services such as Azure Files. To configure redundancy for this data, you have
    to specify the SKU that stands for the redundancy option in this context:'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 理解这个概念很重要，因为与你的资源组一起，一个存储账户在一个区域是必需的。存储账户在Azure中提供了一个唯一的命名空间来存储数据（如诊断）和使用Azure
    Files等服务的可能性。要为这些数据配置冗余，你必须指定在这种情况下代表冗余选项的SKU：
- en: '[PRE48]'
  id: totrans-193
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: 'Or you can do it via the Azure CLI:'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 或者你可以通过Azure CLI执行：
- en: '[PRE49]'
  id: totrans-195
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: The storage account name must be unique across Azure, be between 3 and 24 characters
    in length, and use numbers and lowercase letters only.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 存储账户名称必须在Azure中是唯一的，长度在3到24个字符之间，并且只能使用数字和小写字母。
- en: Linux and Azure
  id: totrans-197
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Linux和Azure
- en: 'Linux is almost everywhere, on many different devices, and in many different
    environments. There are many different flavors, and the choice of what to use
    is yours. So, what do you choose? There are many questions, and many different
    answers are possible. But one thing''s for sure: in corporate environments, support
    is important.'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: Linux几乎无处不在，出现在许多不同的设备和环境中。有许多不同的风味，你可以选择使用什么。那么，你会选择什么？有很多问题，也有很多不同的答案。但有一件事是肯定的：在企业环境中，支持是很重要的。
- en: Linux distributions
  id: totrans-199
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Linux发行版
- en: 'As noted earlier, there are many different Linux distributions around. But
    there are reasons why there are so many options:'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，周围有许多不同的Linux发行版。但为什么有这么多选择呢？有很多原因：
- en: A Linux distribution is a collection of software. Some collections are there
    for a specific objective. A good example of such a distribution is Kali Linux,
    which is an advanced penetration testing Linux distribution.
  id: totrans-201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Linux发行版是一组软件。有些集合是为了特定的目标。这样一个发行版的一个很好的例子是Kali Linux，它是一个先进的渗透测试Linux发行版。
- en: Linux is a multi-purpose operating system. Thanks to the large number of customization
    options we have for Linux, if you don't want a particular package or feature on
    your operating system, you can remove it and add your own. This is one of the
    primary reasons why there are so many distributions.
  id: totrans-202
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Linux是一个多用途操作系统。由于我们对Linux有很多定制选项，如果你不想要操作系统上的特定软件包或功能，你可以删除它并添加自己的。这是为什么有这么多发行版的主要原因之一。
- en: Open source is Darwinian by nature. Sometimes, a project is forked, for instance,
    because some other developers don't like the goal of the project or think they
    can do better and patches of the project are not accepted. Only the strongest
    projects will survive.
  id: totrans-203
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 开源天生是达尔文主义的。有时，一个项目会被分叉，例如因为其他开发人员不喜欢项目的目标，或者认为他们可以做得更好，而项目的补丁没有被接受。只有最强大的项目才能生存下来。
- en: It is a matter of taste. Different people have different tastes and opinions.
    Some people like the Debian `apt` package manager; other people may like SUSE's
    Zypper tool.
  id: totrans-204
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这是一个品味问题。不同的人有不同的品味和观点。有些人喜欢Debian的`apt`软件包管理器；其他人可能喜欢SUSE的Zypper工具。
- en: Another big difference is that some distributions are collected and supported
    by vendors such as Red Hat, SUSE, and Canonical, whereas others, such as Debian,
    are community-driven.
  id: totrans-205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 另一个重要的区别是，一些发行版是由Red Hat、SUSE和Canonical等供应商收集和支持的，而另一些如Debian则是由社区驱动的。
- en: 'In production environments, support is important. Before pushing their production
    workloads to a distribution, organizations will be concerned with certain factors,
    such as SLA, downtime, and security updates, and the following questions might
    arise:'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 在生产环境中，支持是很重要的。在将他们的生产工作负载推送到一个发行版之前，组织将关注某些因素，如SLA、停机时间和安全更新，可能会出现以下问题：
- en: Who is responsible for the updates, and what kind of information comes with
    the updates?
  id: totrans-207
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 谁负责更新，更新中包含什么样的信息？
- en: Who is responsible for support, and who am I going to call if there is a problem?
  id: totrans-208
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 谁负责支持，如果出现问题我该找谁？
- en: Who is going to advise me if there are legal problems with the software licensing?
  id: totrans-209
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果软件许可存在法律问题，谁会为我提供建议？
- en: Microsoft-endorsed Linux Distributions
  id: totrans-210
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 微软认可的Linux发行版
- en: In the Azure Marketplace, there are Linux images provided by third parties,
    also called Microsoft partners. These are Microsoft-endorsed Linux distributions.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 在Azure市场上，有第三方提供的Linux映像，也称为微软合作伙伴提供的Microsoft认可的Linux发行版。
- en: Microsoft works Microsoft-endorsed Linux distributions together with these partners
    and the Linux community to make sure that these Linux distributions work well
    on Azure.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft与这些合作伙伴和Linux社区一起合作，以确保这些Linux发行版在Azure上运行良好。
- en: It is possible to import your own image, or even your own Linux distribution,
    into Azure. Microsoft contributes directly to the Linux kernel, providing Linux
    Integration Services for Hyper-V and Azure, and because of this you can run every
    Linux distribution on Azure as long as support is compiled into the kernel. Also,
    on every Linux image in the Azure Marketplace, the Azure Linux Agent is installed,
    and the source code of this agent is available on GitHub as well, so you can install
    it in your image. Microsoft is even willing to guide you if you have issues with
    Linux; just buy a support plan!
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以将自己的映像，甚至自己的Linux发行版导入Azure。微软直接为Linux内核做出贡献，为Hyper-V和Azure提供Linux集成服务，因此只要支持编译到内核中，您就可以在Azure上运行任何Linux发行版。此外，在Azure市场上的每个Linux映像中都安装了Azure
    Linux代理，并且该代理的源代码也可以在GitHub上找到，因此您可以在映像中安装它。微软甚至愿意在您遇到Linux问题时为您提供指导；只需购买支持计划！
- en: 'For some commercial Linux distributions, there are great support options available:'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 对于一些商业Linux发行版，有很好的支持选项：
- en: 'Red Hat: Microsoft Support will help you to use the Azure platform or services,
    and will also support issues within Red Hat, but this requires a support plan.'
  id: totrans-215
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Red Hat：Microsoft支持将帮助您使用Azure平台或服务，并且还将支持Red Hat内部的问题，但这需要一个支持计划。
- en: 'Oracle Linux: Microsoft offers a support plan; additional commercial support
    can be bought from Oracle.'
  id: totrans-216
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Oracle Linux：Microsoft提供支持计划；还可以从Oracle购买额外的商业支持。
- en: 'SUSE: There are premium images supported by Microsoft; if needed, they will
    call SUSE for you. This SUSE premium image includes all software, updates, and
    patches.'
  id: totrans-217
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SUSE：有Microsoft支持的高级映像；如果需要，他们会为您调用SUSE。这个SUSE高级映像包括所有软件、更新和补丁。
- en: 'Other vendors: There are Microsoft support plans to cover other vendors; you
    don''t have to buy a separate plan for this. Microsoft plan details are available
    at [https://azure.microsoft.com/en-us/support/plans/](https://azure.microsoft.com/en-us/support/plans/).'
  id: totrans-218
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他供应商：有Microsoft支持计划来覆盖其他供应商；您不必为此购买单独的计划。Microsoft计划详情可在[https://azure.microsoft.com/en-us/support/plans/](https://azure.microsoft.com/en-us/support/plans)上找到。
- en: Note
  id: totrans-219
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 注意
- en: 'Please visit the Microsoft website for a recent list of endorsed distributions
    and versions, as well as details about the support that is available for a distribution:'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 请访问微软网站获取最新的认可发行版和版本列表，以及有关发行版可用支持的详细信息：
- en: '[https://docs.microsoft.com/en-us/azure/virtual-machines/linux/endorsed-distros](https://docs.microsoft.com/en-us/azure/virtual-machines/linux/endorsed-distros
    )'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://docs.microsoft.com/en-us/azure/virtual-machines/linux/endorsed-distros](https://docs.microsoft.com/en-us/azure/virtual-machines/linux/endorsed-distros
    )'
- en: Deploying a Linux Virtual Machine
  id: totrans-222
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 部署Linux虚拟机
- en: We've covered the Linux distributions available in Azure and the level of support
    you can get. In the previous section, we set up the initial environment by creating
    the resource group and storage; now it's time to deploy our first virtual machine.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经介绍了Azure中可用的Linux发行版以及您可以获得的支持水平。在上一节中，我们通过创建资源组和存储来设置了初始环境；现在是时候部署我们的第一个虚拟机了。
- en: Your First Virtual Machine
  id: totrans-224
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 您的第一个虚拟机
- en: The resource group has been created, a storage account has been created in this
    resource group, and now you are ready to create your first Linux virtual machine
    in Azure.
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 资源组已创建，此资源组中已创建存储帐户，现在您可以在Azure中创建您的第一个Linux虚拟机了。
- en: 'In PowerShell, use the following command:'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 在PowerShell中，使用以下命令：
- en: '[PRE50]'
  id: totrans-227
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: 'The cmdlet will prompt you to provide a username and password for your virtual
    machine:'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 该cmdlet将提示您为虚拟机提供用户名和密码：
- en: '![To provide username and password in Powershell for your virtual machine](img/B15455_02_04.jpg)'
  id: totrans-229
  prefs: []
  type: TYPE_IMG
  zh: '![在Powershell中为您的虚拟机提供用户名和密码](img/B15455_02_04.jpg)'
- en: 'Figure 2.4: Providing user credentials for your virtual machine'
  id: totrans-230
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图2.4：为您的虚拟机提供用户凭据
- en: 'In Bash, you can use the following command:'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 在Bash中，您可以使用以下命令：
- en: '[PRE51]'
  id: totrans-232
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: This was very easy, but if you create a virtual machine instance this way, the
    number of options you can set is very limited. This process will create multiple
    resources required by the virtual machine, such as the disk, NIC, and public IP,
    using default settings.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 这非常简单，但是如果您以这种方式创建虚拟机实例，则可以设置的选项数量非常有限。 此过程将使用默认设置创建虚拟机所需的多个资源，例如磁盘、NIC和公共IP。
- en: Let's dive a little bit further into the details and get some information about
    the choices made.
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们深入了解一下细节，并获取有关所做选择的一些信息。
- en: Images
  id: totrans-235
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 图像
- en: 'In our example, we deployed a virtual machine with the image name `UbuntuLTS`.
    You can choose between several Linux images:'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的示例中，我们部署了一个名为`UbuntuLTS`的图像的虚拟机。 您可以在几个Linux图像之间进行选择：
- en: CentOS
  id: totrans-237
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: CentOS
- en: Debian
  id: totrans-238
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Debian
- en: RHEL
  id: totrans-239
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: RHEL
- en: UbuntuLTS
  id: totrans-240
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: UbuntuLTS
- en: CoreOS
  id: totrans-241
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: CoreOS
- en: openSUSE
  id: totrans-242
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: openSUSE
- en: SUSE Linux Enterprise
  id: totrans-243
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SUSE Linux Enterprise
- en: But there are many more images offered by different vendors, called publishers.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 但是，不同供应商提供了许多更多的图像，称为发布商。
- en: 'Let''s get a list of these publishers. In PowerShell, use this command:'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们获取这些发布商的列表。 在PowerShell中，使用此命令：
- en: '[PRE52]'
  id: totrans-246
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: 'As you can see in the following screenshot, Azure has a lot of publishers,
    and we''ll pick one of these for the demonstration:'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 如您在以下截图中所见，Azure有很多发布商，我们将从中选择一个进行演示：
- en: '![The list of various image publishers and their location in Powershell](img/B15455_02_05.jpg)'
  id: totrans-248
  prefs: []
  type: TYPE_IMG
  zh: '![Powershell中各种图像发布商及其位置的列表](img/B15455_02_05.jpg)'
- en: 'Figure 2.5: Listing image publishers in PowerShell'
  id: totrans-249
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图2.5：在PowerShell中列出图像发布商
- en: 'In Bash, you can run the following command to get the list of publishers:'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 在Bash中，您可以运行以下命令来获取发布商的列表：
- en: '[PRE53]'
  id: totrans-251
  prefs: []
  type: TYPE_PRE
  zh: '[PRE53]'
- en: 'The list is the same:'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 列表是相同的：
- en: '![The list of various image publishers and their location in Bash](img/B15455_02_06.jpg)'
  id: totrans-253
  prefs: []
  type: TYPE_IMG
  zh: '![Bash中各种图像发布商及其位置的列表](img/B15455_02_06.jpg)'
- en: 'Figure 2.6: Listing image publishers in Bash'
  id: totrans-254
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图2.6：在Bash中列出图像发布商
- en: 'Now you know the publishers, you can get a list of images provided by a publisher
    using:'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您知道发布商，可以使用以下命令获取发布商提供的图像列表：
- en: '[PRE54]'
  id: totrans-256
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: 'We have selected `Canonical` as the publisher, and now we are trying to get
    the list of offers available. `UbuntuServer` is one of the offers, and we will
    be using this one:'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经选择了`Canonical`作为发布商，现在我们正在尝试获取可用的优惠列表。 `UbuntuServer`是其中之一，我们将使用这个：
- en: '![Selecting Canonical as the publisher and selecting offers for it in Powershell](img/B15455_02_07.jpg)'
  id: totrans-258
  prefs: []
  type: TYPE_IMG
  zh: '![在Powershell中选择Canonical作为发布商并选择其优惠](img/B15455_02_07.jpg)'
- en: 'Figure 2.7: Listing offers for Canonical publisher'
  id: totrans-259
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图2.7：列出Canonical发布商的优惠
- en: 'Alternatively, in the Azure CLI, run the following command:'
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，在Azure CLI中运行以下命令：
- en: '[PRE55]'
  id: totrans-261
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: The output is a list of so-called *offers*. An offer is the name of a group
    of related images created by a publisher.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 输出是所谓的*优惠*列表。 优惠是由发布商创建的一组相关图像的名称。
- en: 'Now we need to know what SKUs are available for the image. SKU refers to the
    major release of a distribution. Here is an example using Ubuntu:'
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们需要知道图像的可用SKU。 SKU是指发行版的主要版本。 以下是使用Ubuntu的示例：
- en: '[PRE56]'
  id: totrans-264
  prefs: []
  type: TYPE_PRE
  zh: '[PRE56]'
- en: 'Now that we have the values for the publisher and offer, let''s go ahead and
    see the major distributions (SKUs) that are available for `UbuntuServer` published
    by `Canonical`:'
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经获得了发布商和优惠的值，让我们继续查看由`Canonical`发布的`UbuntuServer`可用的主要发行版（SKU）：
- en: '![The list of various SKUs offered by Canonical publisher for UbuntuServer](img/B15455_02_08.jpg)'
  id: totrans-266
  prefs: []
  type: TYPE_IMG
  zh: '![Canonical发布商为UbuntuServer提供的各种SKU的列表](img/B15455_02_08.jpg)'
- en: 'Figure 2.8: Listing SKUs for UbuntuServer published by Canonical'
  id: totrans-267
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图2.8：在Azure CLI中列出由Canonical发布的UbuntuServer的SKU
- en: 'Alternatively, in the Azure CLI, run the following command:'
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，在Azure CLI中运行以下命令：
- en: '[PRE57]'
  id: totrans-269
  prefs: []
  type: TYPE_PRE
  zh: '[PRE57]'
- en: 'Query for a specific instance within this offer:'
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 查询此优惠中的特定实例：
- en: '[PRE58]'
  id: totrans-271
  prefs: []
  type: TYPE_PRE
  zh: '[PRE58]'
- en: 'Let''s again go through the values we have. So, using the publisher name, offer,
    and SKU, we''re going to get the version that''s available. In the following screenshot,
    you can see that image version `19.10.201912170` is available. Let''s take this
    image for our virtual machine:'
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们再次查看我们拥有的值。 因此，使用发布商名称、优惠和SKU，我们将获取可用的版本。 在以下截图中，您可以看到图像版本`19.10.201912170`可用。
    让我们为我们的虚拟机选择此图像：
- en: '![Version detail of the available image using publisher''s name, offer and
    SKUs in Azure CLI](img/B15455_02_09.jpg)'
  id: totrans-273
  prefs: []
  type: TYPE_IMG
  zh: '![在Azure CLI中使用发布商的名称、优惠和SKU获取可用图像的版本详细信息](img/B15455_02_09.jpg)'
- en: 'Figure 2.9: Selecting available image version in Azure CLI'
  id: totrans-274
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图2.9：在Azure CLI中选择可用的图像版本
- en: This was the latest version available at the time of writing this chapter. If
    there are any new releases, you might see another version number.
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 这是在撰写本章时提供的最新版本。 如果有任何新版本发布，您可能会看到另一个版本号。
- en: 'Alternatively, in the Azure CLI, use the following command:'
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，在Azure CLI中使用以下命令：
- en: '[PRE59]'
  id: totrans-277
  prefs: []
  type: TYPE_PRE
  zh: '[PRE59]'
- en: 'To reduce the output to the latest version, parameters were added to select
    the last line. The information collected contains parameters for the `Set-AzVMSourceImage`
    cmdlet; however, before using this command, we need to create a new virtual machine
    configuration using `New-AzVMConfig`:'
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 为了将输出减少到最新版本，添加了参数以选择最后一行。 收集的信息包含`Set-AzVMSourceImage` cmdlet的参数; 但是，在使用此命令之前，我们需要使用`New-AzVMConfig`创建一个新的虚拟机配置：
- en: '[PRE60]'
  id: totrans-279
  prefs: []
  type: TYPE_PRE
  zh: '[PRE60]'
- en: 'Finally, we are creating a new virtual machine with a size of `Standard_A1`,
    and we''re instructing PowerShell to use image version `19.10.201912170` of the
    major `19_10-daily-gen2` distribution in the `UbuntuServer` offer published by
    `Canonical`:'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们正在创建一个大小为`Standard_A1`的新虚拟机，并指示PowerShell使用`Canonical`发布的`UbuntuServer`优惠中的`19_10-daily-gen2`发行版的图像版本`19.10.201912170`：
- en: '![Creating a new virtual machine with a size of Standard_A1 by instructing
    Powershell to use image version](img/B15455_02_10.jpg)'
  id: totrans-281
  prefs: []
  type: TYPE_IMG
  zh: '![通过指示Powershell使用图像版本创建一个大小为Standard_A1的新虚拟机](img/B15455_02_10.jpg)'
- en: 'Figure 2.10: Creating a virtual machine of Standard_A1 size'
  id: totrans-282
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图2.10：创建一个Standard_A1大小的虚拟机
- en: 'In Bash, the collected information contains parameters for the `az vm create`
    command:'
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 在Bash中，收集的信息包含`az vm create`命令的参数：
- en: '[PRE61]'
  id: totrans-284
  prefs: []
  type: TYPE_PRE
  zh: '[PRE61]'
- en: Note
  id: totrans-285
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 注意
- en: In both Bash and PowerShell, it's possible to use the word *latest* instead
    of a specific version. The collected information is not sufficient to create the
    virtual machine, though. More parameters are needed.
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: 在Bash和PowerShell中，可以使用单词*latest*代替特定版本。收集的信息不足以创建虚拟机。需要更多参数。
- en: Virtual Machine Sizing
  id: totrans-287
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 虚拟机大小
- en: Another thing you have to take care of is a decision regarding the virtual machine's
    size based on your needs and costs. More information on the available sizes and
    the pricing is available at [https://azure.microsoft.com/en-us/pricing/details/virtual-machines/linux](https://azure.microsoft.com/en-us/pricing/details/virtual-machines/linux).
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 另一件您需要注意的事情是根据您的需求和成本决定虚拟机的大小。有关可用大小和定价的更多信息，请访问[https://azure.microsoft.com/en-us/pricing/details/virtual-machines/linux](https://azure.microsoft.com/en-us/pricing/details/virtual-machines/linux)。
- en: 'The list on this website, which includes the prices of the instances, changes
    often! You can get a list (without displaying the costs) on the command line:'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 该网站上的列表（包括实例的价格）经常更改！您可以在命令行上获取列表（而不显示成本）：
- en: '[PRE62]'
  id: totrans-290
  prefs: []
  type: TYPE_PRE
  zh: '[PRE62]'
- en: A small virtual machine is enough to execute the exercises in this book. At
    the time of writing, `Standard_B1ls` is ideal for the necessary base-level performance.
    But it's a good idea to recheck the virtual machine sizing/pricing list, as mentioned
    earlier on.
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 一个小型虚拟机足以执行本书中的练习。在撰写本文时，`Standard_B1ls`是必要的基本性能。但最好重新检查虚拟机的大小/定价列表，如前面提到的。
- en: 'In PowerShell, the `New-AzVM` cmdlet can take the `-size` parameter, or you
    can use it in the `New-AzVMConfig` cmdlet:'
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 在PowerShell中，`New-AzVM` cmdlet可以使用`-size`参数，或者可以在`New-AzVMConfig` cmdlet中使用它：
- en: '[PRE63]'
  id: totrans-293
  prefs: []
  type: TYPE_PRE
  zh: '[PRE63]'
- en: In Bash, add the `--size` parameter of the `az vm create` command.
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 在Bash中，添加`az vm create`命令的`--size`参数。
- en: Virtual Machine Networking
  id: totrans-295
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 虚拟机网络
- en: 'Azure virtual networks allow communication between virtual machines, the internet,
    and other Azure services over a secure network. When we created the first virtual
    machine at the beginning of this chapter, several items regarding networking were
    created automatically:'
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: Azure虚拟网络允许虚拟机、互联网和其他Azure服务之间通过安全网络进行通信。当我们在本章开头创建第一个虚拟机时，有关网络的几个项目是自动创建的：
- en: Virtual network
  id: totrans-297
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 虚拟网络
- en: Virtual subnet
  id: totrans-298
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 虚拟子网
- en: Virtual network interface attached to the virtual machine and plugged into the
    virtual network
  id: totrans-299
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 附加到虚拟机并插入虚拟网络的虚拟网络接口
- en: Private IP address configured on the virtual network interface
  id: totrans-300
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置在虚拟网络接口上的私有IP地址
- en: Public IP address
  id: totrans-301
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 公共IP地址
- en: 'The network resources will be covered in *Chapter 4, Managing Azure*; for now,
    we''re just going to query the private and public IP addresses of the virtual
    machines. Use this command to get the list of public IP addresses:'
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: 网络资源将在*第4章，管理Azure*中介绍；目前，我们只会查询虚拟机的私有和公共IP地址。使用此命令获取公共IP地址列表：
- en: '[PRE64]'
  id: totrans-303
  prefs: []
  type: TYPE_PRE
  zh: '[PRE64]'
- en: 'To get the list of private IP addresses of all your virtual machines, use this
    command:'
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: 要获取所有虚拟机的私有IP地址列表，请使用以下命令：
- en: '[PRE65]'
  id: totrans-305
  prefs: []
  type: TYPE_PRE
  zh: '[PRE65]'
- en: 'The preceding command may look a little complicated, but it is a handy script
    for getting the list of private IPs. If you want to get the private IP address
    of virtual machines in a resource group, you can use this command:'
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的命令可能看起来有点复杂，但这是一个方便的脚本，用于获取私有IP列表。如果您想要获取资源组中虚拟机的私有IP地址，可以使用以下命令：
- en: '[PRE66]'
  id: totrans-307
  prefs: []
  type: TYPE_PRE
  zh: '[PRE66]'
- en: 'The output obtained will be in JSON format, and you can see the private IP
    address under `IpConfigurations`:'
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: 获取的输出将以JSON格式显示，并且您可以在`IpConfigurations`下看到私有IP地址：
- en: '![The output displaying private IP address of virtual machines in a resource
    group in JSON format](img/B15455_02_11.jpg)'
  id: totrans-309
  prefs: []
  type: TYPE_IMG
  zh: '![以JSON格式显示资源组中虚拟机的私有IP地址的输出](img/B15455_02_11.jpg)'
- en: 'Figure 2.11: Private IP address of virtual machines in the resource group'
  id: totrans-310
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图2.11：资源组中虚拟机的私有IP地址
- en: 'This can be also accomplished using the Azure CLI. To get a list of the private
    IP addresses of virtual machines, use this:'
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: 这也可以使用Azure CLI来完成。要获取虚拟机的私有IP地址列表，请使用以下命令：
- en: '[PRE67]'
  id: totrans-312
  prefs: []
  type: TYPE_PRE
  zh: '[PRE67]'
- en: The public IP address is the IP address that makes the virtual machine accessible
    via the internet. The incoming traffic virtual machine networking on this IP address
    undergoes **network address translation** (**NAT**) to the private IP address
    configured on the network interface of the Linux virtual machine.
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: 公共IP地址是使虚拟机通过互联网访问的IP地址。进入此IP地址的虚拟机网络流量经历**网络地址转换**（**NAT**）以配置在Linux虚拟机的网络接口上的私有IP地址。
- en: Virtual Machine Information
  id: totrans-314
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 虚拟机信息
- en: 'After the deployment of the virtual machine, all the information attached to
    the virtual machine is available using PowerShell and Bash, such as the state.
    Querying the state is important; there are several states:'
  id: totrans-315
  prefs: []
  type: TYPE_NORMAL
  zh: 虚拟机部署后，可以使用PowerShell和Bash获取附加到虚拟机的所有信息，例如状态。查询状态很重要；有几种状态：
- en: Running
  id: totrans-316
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 运行中
- en: Stopped
  id: totrans-317
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 已停止
- en: Failed
  id: totrans-318
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 失败
- en: Deallocated
  id: totrans-319
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 已停止
- en: 'If a virtual machine is not deallocated, Microsoft will charge you for it.
    The `Failed` state means that the virtual machine is not able to boot. To query
    the state, execute the following command:'
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 如果虚拟机未停止，Microsoft将向您收费。`Failed`状态表示虚拟机无法启动。要查询状态，请执行以下命令：
- en: '[PRE68]'
  id: totrans-321
  prefs: []
  type: TYPE_PRE
  zh: '[PRE68]'
- en: 'In Bash, it is possible to receive the state of the deployed virtual machines,
    but if we need to narrow down the output to a single instance, it''s not possible
    without using complex queries:'
  id: totrans-322
  prefs: []
  type: TYPE_NORMAL
  zh: 在Bash中，可以接收部署的虚拟机的状态，但如果需要将输出缩小到单个实例，则无法使用复杂的查询：
- en: '[PRE69]'
  id: totrans-323
  prefs: []
  type: TYPE_PRE
  zh: '[PRE69]'
- en: 'To deallocate a virtual machine, first stop it:'
  id: totrans-324
  prefs: []
  type: TYPE_NORMAL
  zh: 要停止虚拟机，首先停止它：
- en: '[PRE70]'
  id: totrans-325
  prefs: []
  type: TYPE_PRE
  zh: '[PRE70]'
- en: 'Now you are able to deallocate it:'
  id: totrans-326
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您可以将其停止：
- en: '[PRE71]'
  id: totrans-327
  prefs: []
  type: TYPE_PRE
  zh: '[PRE71]'
- en: 'You can get much more information about the deployed virtual machines. In PowerShell,
    it''s quite difficult to receive the properties of the virtual machine. First,
    create a variable:'
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以获取有关部署的虚拟机的更多信息。在PowerShell中，很难接收虚拟机的属性。首先，创建一个变量：
- en: '[PRE72]'
  id: totrans-329
  prefs: []
  type: TYPE_PRE
  zh: '[PRE72]'
- en: 'Now ask for the properties and methods of this `MYVM` object:'
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: 现在要求此`MYVM`对象的属性和方法：
- en: '[PRE73]'
  id: totrans-331
  prefs: []
  type: TYPE_PRE
  zh: '[PRE73]'
- en: 'View the `HardwareProfile` property to see the size of this instance:'
  id: totrans-332
  prefs: []
  type: TYPE_NORMAL
  zh: 查看`HardwareProfile`属性以查看此实例的大小：
- en: '[PRE74]'
  id: totrans-333
  prefs: []
  type: TYPE_PRE
  zh: '[PRE74]'
- en: 'Or, to be more virtual machine information precise, use the following command:'
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，为了更精确地查看虚拟机信息，使用以下命令：
- en: '[PRE75]'
  id: totrans-335
  prefs: []
  type: TYPE_PRE
  zh: '[PRE75]'
- en: You can also try `NetworkProfile`, `OSProfile`, and `StorageProfile.ImageReference`.
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 你也可以尝试`NetworkProfile`、`OSProfile`和`StorageProfile.ImageReference`。
- en: 'If you want to use the `az` command in Bash, the first command you may want
    to try is this:'
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想在Bash中使用`az`命令，你可能想尝试的第一个命令是这个：
- en: '[PRE76]'
  id: totrans-338
  prefs: []
  type: TYPE_PRE
  zh: '[PRE76]'
- en: 'The only problem here is that it shows all the information about all the virtual
    machines at the same time; luckily, there is a `show` command as well, which reduces
    the output to a single virtual machine:'
  id: totrans-339
  prefs: []
  type: TYPE_NORMAL
  zh: 唯一的问题是它同时显示了所有虚拟机的所有信息；幸运的是，也有一个`show`命令，可以将输出减少到单个虚拟机：
- en: '[PRE77]'
  id: totrans-340
  prefs: []
  type: TYPE_PRE
  zh: '[PRE77]'
- en: 'And it''s a good idea to limit the output by using queries. For example, if
    you want to see the storage profile of a particular virtual machine, you can query
    as follows:'
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: 并且最好通过使用查询来限制输出。例如，如果你想查看特定虚拟机的存储配置文件，可以查询如下：
- en: '[PRE78]'
  id: totrans-342
  prefs: []
  type: TYPE_PRE
  zh: '[PRE78]'
- en: 'The preceding command should give you the following output:'
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令应该给出以下输出：
- en: '![Command to see the storage profile of SUSE virtual machine](img/B15455_02_12.jpg)'
  id: totrans-344
  prefs: []
  type: TYPE_IMG
  zh: '![查看SUSE虚拟机存储配置文件的命令](img/B15455_02_12.jpg)'
- en: 'Figure 2.12: Storage profile of the SUSE virtual machine'
  id: totrans-345
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图2.12：SUSE虚拟机的存储配置文件
- en: Connecting to Linux
  id: totrans-346
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 连接到Linux
- en: The virtual machine is running, ready for you to log in remotely using the credentials
    (username and password) you provided during the deployment of your first virtual
    machine. Another, more secure method to connect to your Linux virtual machine
    is by using SSH key pairs. SSH keys are more secure due to their complexity and
    length. On top of this, Linux on Azure supports sign-in using **Azure Active Directory**
    (**Azure AD**), where users will be able to authenticate using their AD credentials.
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: 虚拟机正在运行，准备让您远程登录，使用您在部署第一台虚拟机时提供的凭据（用户名和密码）。另一种更安全的连接到Linux虚拟机的方法是使用SSH密钥对。由于其复杂性和长度，SSH密钥更安全。此外，Azure上的Linux支持使用**Azure活动目录**（**Azure
    AD**）进行登录，用户将能够使用其AD凭据进行身份验证。
- en: Logging into Your Linux virtual machine Using Password Authentication
  id: totrans-348
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用密码身份验证登录到您的Linux虚拟机
- en: In the *Virtual Machine Networking* section, the public IP address of a virtual
    machine was queried. We will be using this public IP to connect to the virtual
    machine via SSH using an SSH client installed locally.
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: 在*虚拟机网络*部分，查询了虚拟机的公共IP地址。我们将使用这个公共IP通过本地安装的SSH客户端连接到虚拟机。
- en: '**SSH**, or **Secure Shell**, is an encrypted network protocol used to manage
    and communicate with servers. Linux, macOS, **Windows Subsystem for Linux** (**WSL**),
    and the recent update of Windows 10 come with the command-line-based OpenSSH client,
    but there are more advanced clients available. Here are a few examples:'
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: '**SSH**，或**安全外壳**，是一种加密的网络协议，用于管理和与服务器通信。Linux、macOS、**Windows子系统**（**WSL**）和最近更新的Windows
    10都配备了基于命令行的OpenSSH客户端，但也有更高级的客户端可用。以下是一些示例：'
- en: 'Windows: PuTTY, MobaXterm, and Bitvise Tunnelier'
  id: totrans-351
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows：PuTTY、MobaXterm和Bitvise Tunnelier
- en: 'Linux: PuTTY, Remmina, and Pac Manager'
  id: totrans-352
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Linux：PuTTY、Remmina和Pac Manager
- en: 'macOS: PuTTY, Termius, and RBrowser'
  id: totrans-353
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: macOS：PuTTY、Termius和RBrowser
- en: 'Using the OpenSSH command-line client, connect to the virtual machine:'
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: 使用OpenSSH命令行客户端连接到虚拟机：
- en: '[PRE79]'
  id: totrans-355
  prefs: []
  type: TYPE_PRE
  zh: '[PRE79]'
- en: Logging into your Linux Virtual Machine with an SSH private key
  id: totrans-356
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用SSH私钥登录到您的Linux虚拟机
- en: Using a username and password is not the best way to log into a remote machine.
    It is not a completely insecure operation, but you're still sending your username
    and password over the connection. It's also difficult to use if you want to execute
    scripts remotely, perform back-up operations, and so forth.
  id: totrans-357
  prefs: []
  type: TYPE_NORMAL
  zh: 使用用户名和密码不是登录远程机器的最佳方式。这不是完全不安全的操作，但你仍然在连接中发送你的用户名和密码。如果你想远程执行脚本、执行备份操作等，这也很难使用。
- en: 'An alternative and more secure way to log into your system is by using SSH
    key pairs. This is a pair of two cryptographically secured keys: a private and
    a public key.'
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种更安全的登录系统的方法是使用SSH密钥对。这是一对两个密码安全的密钥：私钥和公钥。
- en: The private key is retained by the client and should not be copied to any other
    computer. It should be kept absolutely secret. And it is a good idea, during the
    creation of the key pair, to protect the private key with a passphrase.
  id: totrans-359
  prefs: []
  type: TYPE_NORMAL
  zh: 私钥由客户端保留，不应复制到任何其他计算机。它应该绝对保密。在创建密钥对时，最好用密码保护私钥。
- en: The public key, on the other hand, can be copied to all the remote computers
    you want to administer. This public key is used to encrypt the messages that only
    the private key can decrypt. When you try to log in, the server verifies that
    the client owns the private key using this property of working with keys. No password
    is sent over the connection.
  id: totrans-360
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，公钥可以复制到您想要管理的所有远程计算机上。这个公钥用于加密只有私钥才能解密的消息。当您尝试登录时，服务器通过使用密钥的这个属性来验证客户端拥有私钥。没有密码发送到连接中。
- en: 'There are multiple ways to create an SSH key pair; for instance, PuTTY and
    MobaXterm both provide tooling to create them. You have to do this from every
    workstation that needs access to the remote machine. In this book, we are using
    `ssh-keygen` because it''s available for every operating system:'
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
  zh: 有多种方法可以创建SSH密钥对；例如，PuTTY和MobaXterm都提供了创建工具。你必须在每台需要访问远程机器的工作站上执行此操作。在本书中，我们使用`ssh-keygen`，因为它适用于每个操作系统：
- en: '[PRE80]'
  id: totrans-362
  prefs: []
  type: TYPE_PRE
  zh: '[PRE80]'
- en: 'The output of the preceding command should look like this:'
  id: totrans-363
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令的输出应该如下所示：
- en: '![Creation of SSH key pair using ssh-keygen command](img/B15455_02_13.jpg)'
  id: totrans-364
  prefs: []
  type: TYPE_IMG
  zh: '![使用ssh-keygen命令创建SSH密钥对](img/B15455_02_13.jpg)'
- en: 'Figure 2.13: Using ssh-keygen to create SSH key pair'
  id: totrans-365
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 图2.13：使用ssh-keygen创建SSH密钥对
- en: Don't forget to enter a passphrase!
  id: totrans-366
  prefs: []
  type: TYPE_NORMAL
  zh: 不要忘记输入密码！
- en: 'To understand how to use the SSH key pair to access your virtual machines,
    let''s create a new virtual machine. If you recall, when we created the Linux
    machine earlier, we used the `az vm create` command and `authentication-type`
    as password, but in the following command, we are using a `--generate-ssh-keys`
    parameter. This will generate an SSH key pair and will be added to the `.ssh`
    directory in your home folder, which can be used to access the virtual machine:'
  id: totrans-367
  prefs: []
  type: TYPE_NORMAL
  zh: 要了解如何使用SSH密钥对访问您的虚拟机，让我们创建一个新的虚拟机。如果您还记得，当我们之前创建Linux机器时，我们使用了`az vm create`命令和`authentication-type`作为密码，但在下面的命令中，我们使用了`--generate-ssh-keys`参数。这将生成一个SSH密钥对，并将其添加到您的主目录中的`.ssh`目录中，可用于访问虚拟机：
- en: '[PRE81]'
  id: totrans-368
  prefs: []
  type: TYPE_PRE
  zh: '[PRE81]'
- en: If you want to do it in PowerShell, use the `Add-AzVMSshPublicKey` cmdlet. For
    more information on the command, refer to [https://docs.microsoft.com/en-us/powershell/module/azurerm.compute/add-azurermvmsshpublickey?view=azurermps-6.13.0](https://docs.microsoft.com/en-us/powershell/module/azurerm.compute/add-azurermvmsshpublickey?view=azurermps-6.13.0).
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您想在PowerShell中执行此操作，请使用`Add-AzVMSshPublicKey` cmdlet。有关该命令的更多信息，请参阅[https://docs.microsoft.com/en-us/powershell/module/azurerm.compute/add-azurermvmsshpublickey?view=azurermps-6.13.0](https://docs.microsoft.com/en-us/powershell/module/azurerm.compute/add-azurermvmsshpublickey?view=azurermps-6.13.0)。
- en: 'Once the virtual machine has been created, you will be able to access it using
    this command:'
  id: totrans-370
  prefs: []
  type: TYPE_NORMAL
  zh: 虚拟机创建后，您将能够使用此命令访问它：
- en: '[PRE82]'
  id: totrans-371
  prefs: []
  type: TYPE_PRE
  zh: '[PRE82]'
- en: Summary
  id: totrans-372
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 总结
- en: This chapter covered the first steps into Microsoft Azure. The first step always
    involves creating a new account or using an existing company account. With an
    account, you're able to log in and start discovering the Azure cloud.
  id: totrans-373
  prefs: []
  type: TYPE_NORMAL
  zh: 本章介绍了Microsoft Azure的第一步。第一步始终涉及创建一个新帐户或使用现有的公司帐户。有了帐户，您就可以登录并开始发现Azure云。
- en: 'In this chapter, the discovery of the Azure cloud was done using the Azure
    CLI command `az`, or via PowerShell; example by example, you learned about the
    following:'
  id: totrans-374
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，使用Azure CLI命令`az`或通过PowerShell发现了Azure云；通过示例，您了解了以下内容：
- en: The Azure login process
  id: totrans-375
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Azure登录过程
- en: Regions
  id: totrans-376
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 区域
- en: The storage account
  id: totrans-377
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 存储帐户
- en: Images provided by publishers
  id: totrans-378
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 由出版商提供的图像
- en: The creation of virtual machines
  id: totrans-379
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 虚拟机的创建
- en: Querying information attached to a virtual machine
  id: totrans-380
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 查询附加到虚拟机的信息
- en: What Linux is and the support available for Linux virtual machines
  id: totrans-381
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Linux是什么以及Linux虚拟机的支持
- en: Accessing your Linux virtual machine using SSH and an SSH keypair
  id: totrans-382
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用SSH和SSH密钥对访问Linux虚拟机
- en: 'The next chapter starts here, with a new journey: the Linux operating system.'
  id: totrans-383
  prefs: []
  type: TYPE_NORMAL
  zh: 下一章从这里开始，带着一个新的旅程：Linux操作系统。
- en: Questions
  id: totrans-384
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 问题
- en: What are the advantages of using the command line to access Microsoft Azure?
  id: totrans-385
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用命令行访问Microsoft Azure的优势是什么？
- en: What is the purpose of a storage account?
  id: totrans-386
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 存储帐户的目的是什么？
- en: Can you think of a reason why you would get the following error message?
  id: totrans-387
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您是否能想到为什么会收到以下错误消息？
- en: '[PRE83]'
  id: totrans-388
  prefs: []
  type: TYPE_PRE
  zh: '[PRE83]'
- en: What is the difference between an offer and an image?
  id: totrans-389
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供的报价和图像之间有什么区别？
- en: What is the difference between a stopped and a deallocated virtual machine?
  id: totrans-390
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 停止和取消分配虚拟机之间有什么区别？
- en: What is the advantage of using the private SSH key for authentication to your
    Linux virtual machine?
  id: totrans-391
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用私有SSH密钥进行身份验证访问Linux虚拟机的优势是什么？
- en: The `az vm create` command has a `--generate-ssh-keys` parameter. Which keys
    are created, and where are they stored?
  id: totrans-392
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`az vm create`命令有一个`--generate-ssh-keys`参数。创建了哪些密钥，它们存储在哪里？'
- en: Further Reading
  id: totrans-393
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: 'By no means is this chapter a tutorial on using PowerShell. But if you want
    a better understanding of the examples, or want to learn more about PowerShell,
    we can recommend you read *Mastering Windows PowerShell Scripting – Second Edition*
    (ISBN: 9781787126305), by Packt Publishing. We suggest that you start with the
    second chapter, *Working with PowerShell*, and continue until at least the fourth
    chapter, *Working with Objects in PowerShell*.'
  id: totrans-394
  prefs: []
  type: TYPE_NORMAL
  zh: 这一章绝不是关于使用PowerShell的教程。但是，如果您想更好地理解示例，或者想更多地了解PowerShell，我们建议您阅读Packt Publishing的*Mastering
    Windows PowerShell Scripting – Second Edition*（ISBN：9781787126305）。我们建议您从第二章*使用PowerShell*开始，并至少继续到第四章*在PowerShell中使用对象*。
- en: 'You can find plenty of online documentation about using SSH. A very good place
    to start is this wikibook: [https://en.wikibooks.org/wiki/OpenSSH](https://en.wikibooks.org/wiki/OpenSSH).'
  id: totrans-395
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在网上找到大量关于使用SSH的文档。一个很好的起点是这本wikibook：[https://en.wikibooks.org/wiki/OpenSSH](https://en.wikibooks.org/wiki/OpenSSH)。
- en: If you wish to explore more about Linux administration, *Linux Administration
    Cookbook* by Packt Publishing is a good resource, especially for system engineers.
  id: totrans-396
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您希望更多地了解Linux管理，Packt Publishing的*Linux Administration Cookbook*是一个很好的资源，特别是对于系统工程师。
- en: 'To dive deep into security and admin tasks, this is a good read: *Mastering
    Linux Security and Hardening*, written by Donald A. Tevault and published by Packt
    Publishing.'
  id: totrans-397
  prefs: []
  type: TYPE_NORMAL
  zh: 要深入了解安全性和管理任务，这是一个很好的阅读材料：*Mastering Linux Security and Hardening*，作者是Donald
    A. Tevault，由Packt Publishing出版。
