# 第十六章：评估

# 第一章：设计方法简介

1.  问题陈述→信息收集→解决方案提议→实施。

1.  因为它允许建立正确的要求。

1.  为客户选择合适的解决方案留出空间。

1.  在“分析问题并提出正确问题”部分进行了探讨。

1.  概念验证。

1.  实际的解决方案已交付并测试。

1.  它使我们能够探索解决方案的不同概念，以及实际工作环境的解决方案。

# 第二章：定义 GlusterFS 存储

1.  第五章，*在 Gluster 系统中分析性能*进一步分析了这一点。

1.  文件存储更适合 GlusterFS 的工作方式。

1.  几乎所有云提供商现在都提供对象存储。

1.  文件存储、块存储（通过 iSCSI Initiator）和对象存储（通过插件）。

1.  不，但它确实为项目做出了贡献。

1.  GlusterFS 是免费的开源软件；只需从您喜欢的软件包管理器下载即可。

1.  它通过地理复制功能实现。

# 第三章：设计存储集群

1.  这取决于所使用的卷类型，但 2 个 CPU 和 4GB 以上的 RAM 是一个很好的起点。

1.  GlusterFS 将使用 brick 的文件系统缓存机制。

1.  这是一个快速的存储层，I/O 将在此处提供，而不是转到较慢的存储。缓存可以是 RAM 或更快的存储介质，如固态硬盘。

1.  随着并发性的增加，软件将需要更多的 CPU 周期来处理请求。

1.  分布式将聚合空间，复制将镜像数据，因此“减半”空间，分散将聚合空间，但将消耗一个节点用于奇偶校验。将其视为 RAID5。

1.  取决于许多变量，如保留期、数据进入等等...

1.  预期的数据增长量。

1.  吞吐量是一定时间内给定数据量的函数，通常显示为 MB/s 或每秒兆字节

**每秒输入输出操作数**（**IOPS**）是每秒一定数量的操作的函数

**I/O 大小**指的是设备执行的请求大小

1.  GlusterFS 使用的存储位置的布局。

1.  GlusterFS 的数据从一个集群复制到另一个集群的过程，通常位于不同的地理位置。

# 第四章：在云基础架构上使用 GlusterFS

1.  GlusterFS 用于存储实际数据的存储位置。

1.  Z 文件系统，由 Sun Microsystems 创建并后来开源的高级文件系统。

1.  一个 ZFS 存储池。

1.  用于读取请求的磁盘，通常比 zpool 中使用的磁盘更快，延迟更低。

1.  通常通过操作系统的软件包管理器，如 yum。

1.  一组 GlusterFS 节点，将参与同一集群。

1.  Gluster 卷创建<卷名称><卷类型><节点数><节点和 brick 路径>。

1.  此设置控制将用于缓存的内存量。

1.  自适应替换缓存，这是 ZFS 的缓存算法。

# 第五章：在 Gluster 系统中分析性能

1.  每秒兆字节，吞吐量测量。

1.  显示 ZFS 的 I/O 统计信息。

1.  sysstat 软件包的一部分，用于块设备 I/O 统计。

1.  这是读取延迟，以毫秒为单位测量。

1.  CPU 等待未完成 I/O 的时间量。

1.  灵活 I/O 测试，用于 I/O 基准测试的工具。

1.  通过配置文件或直接通过命令传递参数。

1.  一个告诉 FIO 如何运行测试的文件。

1.  通过故意杀死其中一个节点。

1.  通过增加节点上的资源或增加磁盘大小。

# 第六章：创建高可用的自愈架构

1.  主要的 Kubernetes 组件分为控制平面和 API 对象。

1.  它们三个都是由三个主要的公共云提供商 Google、亚马逊和微软提供的托管 Kubernetes 解决方案。

1.  容器的攻击面较小，但这并不意味着它们不会受到利用，但主要的容器运行时项目都得到了很好的维护，如果检测到利用，将会迅速解决。

1.  这将取决于您尝试运行的应用程序类型以及您对技术的熟悉程度。将应用程序迁移到容器通常很容易，但以最有效的方式进行迁移需要工作。

1.  不，您可以在 Windows 上找到 Docker Engine，并且在撰写本文时，Kubernetes Windows 节点处于测试版。

# 第七章：理解 Kubernetes 集群的核心组件

1.  Kubernetes，在撰写本文时，是市场上最主要的容器编排器。

1.  Kubernetes 由组成集群的二进制文件和称为 API 对象的逻辑对象组成。

1.  Kubernetes API 对象是编排器管理的逻辑对象。

1.  我们可以运行编排的容器化工作负载。

1.  容器编排器是负责管理我们运行的容器和与保持我们的工作负载高度可用相关的不同任务的工具。

1.  Pod 是 Kubernetes 的最小逻辑对象，它封装了一个或多个共享命名空间中的容器。

1.  部署是由 Kubernetes 复制控制器管理的一组复制的 Pod。

# 第八章：在 Azure 上设计 Kubernetes

1.  由于 ETCD 的大多数机制，通常首选奇数以便能够始终获得多数票。

1.  是的，但它也可以在单独的一组笔记本上运行。

1.  由于心跳和领导者选举频率，建议使用较低的延迟。

1.  工作节点或节点是负责运行容器工作负载的集群成员。

1.  工作负载的类型以及每种工作负载将运行的容器数量。

1.  所有存储提供商或提供者都可以在此处找到：[`kubernetes.io/docs/concepts/storage/storage-classes/#provisioner`](https://kubernetes.io/docs/concepts/storage/storage-classes/#provisioner)

1.  需要负载均衡器来将请求发送到所有复制的 Pod。

1.  命名空间可用于逻辑上分区我们的集群，并为每个逻辑分区分配角色和资源。

# 第九章：部署和配置 Kubernetes

1.  有几种安装 Kubernetes 的方法，从自动配置工具如`kubeadm`和`kubespray`到完全手动安装。您可以在以下链接找到有关安装方法的更多信息：[`kubernetes.io/docs/setup/`](https://kubernetes.io/docs/setup/)

1.  `kubeconfig`文件包含与 API 服务器通信和认证所需的所有必要信息。

1.  您可以使用多种工具创建 SSL 证书，在本书中我们使用了`cffssl`。但您也可以使用`openssl`和`easyrsa`。

1.  **Azure Kubernetes Services**（**AKS**）是微软为其公共云 Azure 提供的托管 Kubernetes 解决方案。

1.  Azure CLI 可以在任何操作系统中使用，因为它是基于 Python 的命令行界面。

1.  您可以通过 Azure CLI、PowerShell 或 Azure GUI 创建资源组。

1.  您可以在以下链接找到安装 etcd 的不同方法：[`play.etcd.io/install`](http://play.etcd.io/install)

# 第十章：使用 ELK 堆栈进行监控

1.  积极收集数据的过程。

1.  通过了解使用趋势，可以根据实际数据做出购买更多资源等决策。

1.  通过将数据放在一个地方，可以在事件发生之前主动检测到事件。

1.  通过了解存储系统的正常行为，从而为性能提供基线。

1.  当看到不应该出现的峰值时，这可能意味着不稳定的行为。

1.  与通过环境中的每个主机进行检查相比，可以通过单个集中位置进行检查。

1.  用于数据索引和分析的软件。

1.  Elasticsearch 以 json 格式存储数据。

1.  Logstash 是一个数据处理解析器，允许在发送到 Elasticsearch 之前对数据进行操作。

1.  Kibana 为 Elasticsearch 提供可视化界面，允许数据轻松可视化。

# 第十一章：设计 ELK 堆栈

1.  至少需要 2 个 CPU 核心才能在较小的部署中实现最佳功能。

1.  至少 2GHz。

1.  较慢或少于 2 个 CPU 主要影响 Elasticsearch 的启动时间、索引速率和延迟。

1.  内核使用可用的 RAM 来缓存对文件系统的请求。

1.  如果发生交换，搜索延迟将受到严重影响。

1.  如果内存不足，Elasticsearch 将无法启动，一旦运行，如果内存不足，OOM 将终止 Elasticsearch。

1.  最低要求是 2.5GB，但建议使用 4GB。

1.  `/var/lib/elasticsearch`

1.  较低的延迟有助于索引/搜索延迟。

1.  2GB RAM 和 1 个 CPU。

1.  这是一个存储位置，logstash 将在崩溃的情况下持续存储队列。

1.  有多少用户将同时访问仪表板。

# 第十二章：使用 Elasticsearch、Logstash 和 Kibana 管理日志

1.  Elasticsearch 可以通过软件包管理器安装。

1.  这是通过 parted 完成的。

1.  将磁盘的 UUID 添加到`/etc/fstab`。

1.  `/etc/elasticsearch/elasticsearch.yml`

1.  这给集群命名，名称应在节点之间保持一致，以便每个节点加入相同的集群。

1.  数字由`(N/2)+1`决定。

1.  通过使用相同的 cluster.name 设置，第二个节点将加入相同的集群。

1.  添加存储库，通过`yum`安装，为 logstash 分区磁盘。

1.  这是一个存储位置，logstash 将在崩溃的情况下持续存储队列。

1.  协调节点是一个 Elasticsearch 节点，不接受输入，不存储数据，也不参与主/从选举。

1.  Beats 是来自 Elastic.co 的轻量级数据船运工具。

1.  Filebeat 的功能是从诸如`syslog`、apache 和其他来源收集日志，然后将其发送到 Elasticsearch 或 Logstash。

# 第十三章：用 Salty Solutions 解决管理问题

1.  是维护现有 IT 基础设施的任务。

1.  集中所有基础设施，无论其操作系统或架构如何。

1.  Puppet、Chef、Ansible、Spacewalk、SaltStack 等等。

1.  编写期望状态的特定语言，可以描述 IT 基础设施的状态。

1.  推送和拉取。

1.  Salt 是一个开源项目/软件，旨在解决系统管理的许多挑战。

1.  主节点和从节点。

# 第十四章：设计盐溶液并安装软件

1.  任何 Linux 发行版。

1.  一个自管理节点是最低要求。

1.  为我们的 SaltStack 提供高可用性和负载平衡。

1.  手动安装二进制文件，以及通过引导脚本。

1.  通过它们的密钥。

1.  通过`test.ping`函数。

1.  Grains 包含特定于从属者的信息（元数据）或标签。Pillars 包含配置和敏感信息。

# 第十五章：设计最佳实践

1.  HIPAA 代表《健康保险可携带性和责任法》，这是处理健康和医疗数据的标准。

1.  类型 1/类型 2 的 Hypervisors（基于内核的虚拟机（KVM），Linux 容器（LXC），XEN）

用于 SAP HANA 的 Linux

Apache Hadoop

用于 Oracle DB 的 Linux

大型 MongoDB 部署用于内存缓存

高性能计算（HPC）

1.  是的，理想情况下，虚拟化程序需要访问资源，以更有效地为虚拟机提供资源。

1.  是的，CPU 是主要的共享资源，因为物理 CPU 必须为同一节点中的所有 VM 提供周期。

1.  允许不同的网络流量通过不同的 NIC /子网。

1.  这是一种迁移方法，可以将现有工作负载从本地迁移到云端。

1.  这是一种迁移方法，利用架构的一些变化，以利用云端提供的解决方案。

1.  这是一种迁移方法，涉及将解决方案重新架构到云端。
