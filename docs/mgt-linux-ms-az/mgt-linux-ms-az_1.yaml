- en: '1\. Linux: History and future in the cloud'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 1. Linux：云中的历史和未来
- en: '"Microsoft ♡ Linux" was written on the closing slide of a presentation given
    by Microsoft CEO Satya Nadella in 2015\. This announced a wave of changes that
    were going to happen, and Satya Nadella wanted to address Microsoft''s interest
    in Linux and **Open-Source Software** (**OSS**) technologies. Everyone felt that
    there was some contradiction here, wondering why Microsoft was working with OSS
    technologies. Wired magazine reported that Nadella is not interested in fighting
    old battles—especially, when, like it or not, Linux has become a vital part of
    today''s business technology. "If you don''t jump on the new," Nadella told Wired,
    "you don''t survive."'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 2015年，微软首席执行官萨提亚·纳德拉在一次演讲的结束幻灯片上写着"Microsoft ♡ Linux"。这宣布了即将发生的一系列变化，萨提亚·纳德拉希望表明微软对Linux和开源软件技术的兴趣。每个人都觉得这里有一些矛盾，想知道为什么微软要与开源软件技术合作。《连线》杂志报道说，纳德拉对抗争旧战斗不感兴趣，尤其是当Linux不管喜欢与否，已经成为当今商业技术的重要组成部分时。纳德拉告诉《连线》说："如果你不跟上新的，你就无法生存。"
- en: At the time of writing, more than 50% of Microsoft Azure is ruled by Linux.
    There are a lot of misconceptions around migrating existing Linux workloads to
    Microsoft Azure and this book will help in understanding the complexities, simplifying
    the migration process.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在撰写本文时，超过50%的Microsoft Azure由Linux支配。关于将现有的Linux工作负载迁移到Microsoft Azure存在许多误解，本书将帮助您了解复杂性，简化迁移过程。
- en: We will start off with a brief history of Linux and the events that led to its
    development. Along with that, we will talk about some of the competitors of Linux
    and the use cases for both Linux and these competitors. We will cover some of
    the key roles that Linux servers play in IT infrastructure, touching on why the
    cloud is better for running these workloads compared to on-premises solutions.
    As most organizations are going with a cloud transformation strategy, the demand
    for virtual machines, containers, container orchestration solutions, big data,
    and so on is increasing, and Microsoft Azure provides a platform to run all these
    mission-critical workloads.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将从Linux的简要历史和导致其发展的事件开始。除此之外，我们还将讨论一些Linux的竞争对手以及Linux和这些竞争对手的用例。我们将涵盖Linux服务器在IT基础设施中扮演的一些关键角色，涉及为什么云比本地解决方案更适合运行这些工作负载。由于大多数组织都采用云转型战略，对虚拟机、容器、容器编排解决方案、大数据等的需求正在增加，而微软Azure提供了一个运行所有这些关键工作负载的平台。
- en: In order to understand the complexity of migrating Linux workloads to Azure,
    you need to understand the history of IT, operating systems, Unix, Linux, and
    Windows, before the cloud and virtualization. This chapter will provide some important
    background information about Linux to enable those who are not very familiar with
    it to learn the terminology.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 为了理解将Linux工作负载迁移到Azure的复杂性，您需要了解IT、操作系统、Unix、Linux和Windows的历史，以及云和虚拟化。本章将提供一些重要的关于Linux的背景信息，以便那些对它不太熟悉的人学习相关术语。
- en: The public cloud has many benefits over self-hosted environments. We will talk
    about them, particularly covering how Azure is designed to support Linux workloads.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 公共云比自托管环境有许多优势。我们将讨论它们，特别是Azure如何设计来支持Linux工作负载。
- en: While we will briefly mention some typically difficult aspects of Linux systems,
    you will also learn that Azure is evolving rapidly. Azure now has out-of-the-box
    features that will make Linux sysadmins' lives much easier.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管我们将简要提及Linux系统的一些通常困难的方面，但您也将了解到Azure正在迅速发展。Azure现在具有开箱即用的功能，将使Linux系统管理员的生活变得更加轻松。
- en: 'This chapter covers the following key topics:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 本章涵盖以下关键主题：
- en: Brief history and evolution of Linux
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Linux的简要历史和发展
- en: Use cases of Linux in IT infrastructure
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Linux在IT基础设施中的用例
- en: Challenges in on-premises infrastructure
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 本地基础设施中的挑战
- en: Cloud economics
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 云经济学
- en: Advantages of migrating to Azure
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 迁移到Azure的优势
- en: Simplifying the complexity associated with migration
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 简化与迁移相关的复杂性
- en: Let's get started with a brief history of Linux.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从Linux的简要历史开始。
- en: A brief history of Linux
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Linux的简要历史
- en: Before we talk about the history of Linux, it's a good idea to start with the
    events that led to its development. You might have seen pictures of old computers
    that were as big as a car or a house. It's hard to imagine how cumbersome it would
    be to handle a system this big now that we live in a world of handheld devices
    and thin clients. It's not just the massive size; the different operating systems
    that used to run on these devices made things more complicated. Every piece of
    software was designed to serve a single purpose and was impossible to run on another
    computer. In short, we had a compatibility issue. On top of these problems, the
    cost of buying these computers was huge. Purchasing a computer was not a dream
    that came true for normal people.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 在谈论Linux的历史之前，从导致其发展的事件开始是一个好主意。您可能已经看过旧计算机的图片，它们像汽车或房子一样大。现在我们生活在一个手持设备和薄客户端的世界，很难想象处理这么大的系统会有多麻烦。不仅是巨大的尺寸；过去在这些设备上运行的不同操作系统使事情变得更加复杂。每个软件都是为了服务一个单一目的而设计的，不可能在另一台计算机上运行。简而言之，我们有兼容性问题。除了这些问题，购买这些计算机的成本也是巨大的。购买计算机并不是普通人的梦想成真。
- en: Unix
  id: totrans-17
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Unix
- en: The aforementioned shortcomings led to the development of a project called **Unix**,
    which was started in the mid-1970s by a group of developers at Bell Laboratories.
    The main intention of this project was to make a common software for all computers,
    rather than having individual pieces of software for each computer. The project
    used the C language instead of assembly language; it was indeed refined and uncomplicated.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 上述缺点导致了一个名为Unix的项目的开发，该项目始于20世纪70年代中期，由贝尔实验室的一群开发人员发起。该项目的主要目的是为所有计算机制作一个通用软件，而不是为每台计算机制作单独的软件。该项目使用了C语言而不是汇编语言；它确实变得更加精致和简单。
- en: The Unix operating system was widely adopted by government organizations, universities,
    and schools. It existed for many systems, ranging from personal computers all
    the way to supercomputers. Though the advent of Unix resolved some issues, it
    hadn't dealt with the pricing problem; these systems were still expensive.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: Unix操作系统被政府组织、大学和学校广泛采用。它存在于许多系统中，从个人计算机一直到超级计算机。尽管Unix的出现解决了一些问题，但它并没有解决定价问题；这些系统仍然很昂贵。
- en: During the early 1980s, organizations began developing their own versions of
    Unix. As a result of the multiple development branches, we ended up with lots
    of different versions, or dialects. Every developer and organization wanted to
    create a free Unix-like operating system and, in 1983 at MIT, Richard Stallman
    developed the GNU project. The goal of this project was to create a free operating
    system (in the sense of licensing, and not necessarily cost). This project didn't
    gain much popularity, as expected; nevertheless, GNU tools were adopted by Linux
    when it came into existence.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 在20世纪80年代初，组织开始开发他们自己的Unix版本。由于多个开发分支，我们最终得到了许多不同的版本或方言。每个开发者和组织都希望创建一个类似Unix的自由操作系统，1983年在麻省理工学院，理查德·斯托曼开发了GNU项目。该项目的目标是创建一个自由的操作系统（在许可方面，而不一定是成本）。这个项目并没有像预期的那样受到很多欢迎；然而，当Linux出现时，GNU工具被采用了。
- en: Linux
  id: totrans-21
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Linux
- en: 'In 1991, Linus Torvalds developed Linux as a freely distributable Unix while
    he was a student at the University of Helsinki, Finland. Linus was motivated by
    Andrew Tanenbaum''s Minix operating system, which was another free Unix for PCs.
    Linus wanted to author a freely available academic version of Unix that could
    run on Intel 386-based PCs for Minix users who wanted to get more out of their
    computers. The project was initially named "Freax," a fun project that ended up
    as one of the biggest revolutions in the history of computers with the name "Linux."
    On a public forum (comp.os.minix) during the initial days of Linux, Linus referred
    to his work as "a better Minix than Minix." Quoting his own words:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 1991年，Linus Torvalds在芬兰赫尔辛基大学时开发了Linux作为一个可自由分发的Unix。Linus受到安德鲁·塔能鲍姆的Minix操作系统的启发，这是另一个免费的个人计算机Unix。Linus想要编写一个可在基于Intel
    386的个人计算机上运行的Unix的学术版本，以满足想要充分利用计算机的Minix用户。该项目最初被命名为“Freax”，这个有趣的项目最终成为了计算机历史上最大的革命之一，名为“Linux”。在Linux最初的日子里，Linus在一个公共论坛（comp.os.minix）上将他的工作称为“比Minix更好的Minix”。引用他自己的话：
- en: '*"After that it was plain sailing: hairy coding still, but I had some devices,
    and debugging was easier. I started using C at this stage, and it certainly speeds
    up development. This is also when I start to get serious about my megalomaniac
    ideas to make "a better Minix than Minix." I was hoping I''d be able to recompile
    gcc under Linux some day...*'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: “之后就一帆风顺了：仍然是头发乱糟糟的编码，但我有了一些设备，调试也更容易了。在这个阶段我开始使用C语言，它确实加快了开发速度。这也是我开始认真考虑我的狂妄的想法，要做一个‘比Minix更好的Minix’。我希望有一天能在Linux下重新编译gcc…”
- en: '*"Two months for basic setup, but then only slightly longer until I had a disk
    driver (seriously buggy, but it happened to work on my machine) and a small filesystem.
    That was about when I made 0.01 available [around late August of 1991]: it wasn''t
    pretty, it had no floppy drive, and it couldn''t do much of anything. I don''t
    think anybody ever compiled that version. But by then I was hooked, and didn''t
    want to stop until I could chuck out Minix."*'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: “基本设置需要两个月的时间，但直到我有了一个磁盘驱动器（严重有bug，但碰巧在我的机器上运行）和一个小型文件系统，才花了更长的时间。大约在1991年8月底左右，我发布了0.01版：它并不美观，没有软盘驱动器，也不能做太多事情。我不认为有人编译过那个版本。但那时我已经上瘾了，不想停下来，直到我能抛弃Minix。”
- en: If only he had guessed how widely adopted Linux would be 30 years on.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 如果他当时猜到Linux在30年后会被广泛采用就好了。
- en: Linux version history
  id: totrans-26
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Linux版本历史
- en: For the first version of Linux (v0.01), there were no executables. To play with
    this version, you needed a Minix machine to compile, as the intention was to make
    the Minix system better. In 1991, v0.02 was launched and is now referred to as
    the first official version of Linux. The current Linux systems that we see have
    immense provisions for a variety of things, such as user support, documentation,
    and software repositories. However, this was not the case during the early stages
    of Linux. In v0.02, Bash (GNU Bourne Again Shell) and gcc (GNU compiler) were
    the only things that were running, and the main focus was kernel development.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 对于Linux的第一个版本（v0.01），没有可执行文件。要玩这个版本，你需要一个Minix机器来编译，因为意图是让Minix系统更好。1991年，v0.02发布，现在被称为Linux的第一个官方版本。我们现在看到的当前Linux系统为各种事情提供了巨大的支持，如用户支持、文档和软件存储库。然而，在Linux的早期阶段并非如此。在v0.02中，Bash（GNU
    Bourne Again Shell）和gcc（GNU编译器）是唯一运行的东西，主要关注点是内核开发。
- en: After v0.02 came v0.03, and so on; revisions were made until Linux reached v0.95
    in 1992, with the goal of a bug-free v1.0\. After two years with a couple of revisions
    in between, v1.0 came out in March 1994\. After 25+ years of v1.0, we are currently
    in v5.x and, at the time of writing, the last version released is v5.9\. We are
    expecting v5.10 soon.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 在v0.02之后，v0.03等等；直到1992年Linux达到v0.95，目标是一个无bug的v1.0。经过两年，中间有几次修订，v1.0在1994年3月发布。在v1.0发布25年后，我们目前处于v5.x，在撰写本文时，最后发布的版本是v5.9。我们期待着很快会有v5.10。
- en: As mentioned earlier, Linux adopted GNU tools, and these tools played an inevitable
    role in the making of Linux. Without these, Linux might not have made the impact
    that we see today. Along with GNU, **Berkeley Software Distribution** (**BSD**)
    played a role in making Linux popular. Though BSD was not initially adopted in
    the early stages of Linux, later versions had tools that were ported from BSD.
    The networking daemon and several other utilities are perfect examples of BSD's
    contributions to Linux that have made it the subject of admiration.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 正如前面提到的，Linux采用了GNU工具，这些工具在Linux的制作过程中发挥了不可避免的作用。没有这些工具，Linux可能不会产生我们今天看到的影响。除了GNU，伯克利软件发行版（BSD）也在使Linux受欢迎方面发挥了作用。尽管BSD最初并未在Linux的早期阶段被采用，但后来的版本中有一些工具是从BSD移植过来的。网络守护程序和其他一些实用工具都是BSD对Linux的贡献的完美例子，使得Linux成为了人们仰慕的对象。
- en: Linux evolution and distributions
  id: totrans-30
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Linux的发展和发行版
- en: Linux evolved over these years and the fun project started by Linus Torvalds
    is now used by millions of computers, smartphones, servers, and even supercomputers
    across the globe. Today, Linux is capable of running web, mail, emacs, the X Windows
    System…the list goes on. Linux not only dominates on-premises but has a major
    share of the workload in Azure too. Currently, we have a lot of Linux flavors
    tailored for enterprise use as well as personal use.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: Linux在这些年里发生了变化，由Linus Torvalds发起的有趣项目现在被全球数百万台计算机、智能手机、服务器甚至超级计算机使用。今天，Linux能够运行Web、邮件、emacs、X
    Windows系统等等。Linux不仅在本地占据主导地位，而且在Azure的工作负载中也占有很大的份额。目前，我们有很多专为企业使用和个人使用量身定制的Linux版本。
- en: As already stated, Linux isn't something that is developed by a single organization.
    It is a combination of different parts or modules, such as the kernel, GNU shell
    utilities, the X server, the desktop environments, system services, daemons, and
    Terminal commands—all of these come from different developers and they are developed
    independently. If you want, you can take source code for the kernel, shell, and
    other components and assemble it. There are projects such as **Linux from Scratch**
    (**LFS**) and **Beyond Linux from Scratch** (**BLFS**) where users can download
    these pieces of software that are licensed under open-source software, compile
    them, and make their own Linux flavor.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 正如前面所述，Linux并不是由单个组织开发的。它是由不同的部分或模块组合而成，如内核、GNU shell工具、X服务器、桌面环境、系统服务、守护进程和终端命令，所有这些都来自不同的开发人员，它们是独立开发的。如果你愿意，你可以获取内核、shell和其他组件的源代码并进行组装。有一些项目，如Linux
    from Scratch（LFS）和Beyond Linux from Scratch（BLFS），用户可以下载这些在开源软件许可下的软件组件，进行编译，并制作自己的Linux版本。
- en: Although exciting, the amount of work needed for this is heavy and you have
    to invest a lot of time for these components to work together properly. Linux
    distributions (often referred to as **distros**) make this hectic task easier.
    Distros will take all the code from the repositories and compile them, finally
    creating a single operating system that you can boot up on your computer. Examples
    of distros include Ubuntu, Fedora, CentOS, RHEL, Mint, and SUSE Linux. Some distros,
    such as RHEL, SUSE, and Ubuntu, have an enterprise server–grade version as well,
    which is used by organizations to host their mission-critical workloads.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管令人兴奋，但这需要大量的工作量，你必须投入大量时间才能使这些组件正常工作。Linux发行版（通常称为发行版）使这项繁重的任务变得更加容易。发行版将从存储库中获取所有的代码并进行编译，最终创建一个可以在计算机上启动的单一操作系统。发行版的例子包括Ubuntu、Fedora、CentOS、RHEL、Mint和SUSE
    Linux。一些发行版，如RHEL、SUSE和Ubuntu，还有企业服务器级版本，被组织用来托管其关键任务的工作负载。
- en: Linux for Enterprise is a new realm altogether. It began with Red Hat, which
    used to have a monopoly. However, more competitors soon appeared, including Canonical
    and SUSE, as well as the non-commercial CentOS. Azure supports all of the preceding
    enterprise-grade Linux operating systems, so each and every organization can migrate
    their Linux workloads to Azure.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 企业级Linux是一个全新的领域。它始于红帽公司，曾经垄断市场。然而，很快就出现了更多的竞争对手，包括Canonical和SUSE，以及非商业的CentOS。Azure支持所有上述企业级Linux操作系统，因此每个组织都可以将其Linux工作负载迁移到Azure。
- en: Before we talk about the benefits of moving workloads to Azure, let's understand
    the common use case scenarios for these Linux servers in IT infrastructure, along
    with some of the challenges associated with on-premises approaches.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们讨论将工作负载迁移到Azure的好处之前，让我们了解一下这些Linux服务器在IT基础设施中的常见使用案例场景，以及与本地方法相关的一些挑战。
- en: Typical Linux use cases in IT infrastructure
  id: totrans-36
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: IT基础设施中典型的Linux使用案例
- en: As mentioned in the previous section, *A brief history of Linux*, the customer
    base for the Linux operating system is very large for on-premises environments
    as well as the cloud. In this section, we will talk about some use cases of Linux
    in IT infrastructure. Some things have been relevant since the beginning of Linux
    adoption (files, the web, databases, and so on), while others have been adopted
    recently with the introduction of new technologies (containerization and container
    orchestration, for example). These use cases will be added to and evolve over
    time.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 如前一节所述，《Linux的简要历史》，Linux操作系统的客户群对于本地环境和云环境都非常庞大。在本节中，我们将讨论Linux在IT基础设施中的一些使用案例。一些事情自Linux采用以来就一直很重要（文件、网络、数据库等），而另一些则是随着新技术的引入而最近才被采用（例如容器化和容器编排）。这些使用案例将随着时间的推移而不断增加和发展。
- en: Workstations
  id: totrans-38
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 工作站
- en: 'There is a large subset of consumers who prefer to use Linux as a daily commuter
    on their personal computers. This area was mainly monopolized by Windows and macOS,
    but things changed a lot when Linux came to the stage. Traditionally, Linux was
    an all-time favorite for coders and programmers, providing more customization
    options for the general consumer than Windows or macOS. For this reason, Linux
    became the preferred option for millions of people across the globe:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 有很多消费者更喜欢在个人电脑上将Linux作为日常通勤工具。这个领域主要被Windows和macOS垄断，但当Linux登上舞台时，情况发生了很大变化。传统上，Linux一直是程序员和开发人员的最爱，为一般消费者提供了比Windows或macOS更多的自定义选项。因此，Linux成为全球数百万人的首选：
- en: '![Different workstation distros and GUIs](img/B17160_01_01.jpg)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![不同的工作站发行版和图形用户界面](img/B17160_01_01.jpg)'
- en: 'Figure 1.1: Different workstation distros and GUIs'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.1：不同的工作站发行版和图形用户界面
- en: Currently, we have flavors such as Ubuntu, Fedora Workstation, Linux Mint, Elementary
    OS, CentOS, and Arch Linux. *Figure 1.1* shows how the **Graphical User Interface**
    (**GUI**) appears in different workstation distros.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，我们有Ubuntu、Fedora Workstation、Linux Mint、Elementary OS、CentOS和Arch Linux等版本。*图1.1*显示了不同工作站发行版中**图形用户界面**（**GUI**）的外观。
- en: Application servers
  id: totrans-43
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 应用程序服务器
- en: 'An application server is computer software that is bundled together to facilitate
    business logic. If we take a three-tier application, the application server is
    the component that comprises the GUI, the business logic, and the database server.
    The majority of application servers support the Java platform, some examples being
    JBoss, Jetty, JOnAS, Apache Geronimo, and Glassfish:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 应用程序服务器是捆绑在一起以促进业务逻辑的计算机软件。如果我们采用三层应用程序，应用程序服务器是包括GUI、业务逻辑和数据库服务器的组件。大多数应用程序服务器支持Java平台，例如JBoss、Jetty、JOnAS、Apache
    Geronimo和Glassfish：
- en: '![Coupling of application servers with front-end and back-end services to provide
    end-to-end solutions](img/B17160_01_02.jpg)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![将应用程序服务器与前端和后端服务耦合以提供端到端解决方案](img/B17160_01_02.jpg)'
- en: 'Figure 1.2: Coupling of application servers with other services to provide
    end-to-end solutions'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.2：将应用程序服务器与其他服务耦合以提供端到端解决方案
- en: In *Figure 1.2*, you can see how the application servers are coupled with other
    services, including the front-end and back-end services. An application server
    handles connections between the user requests that originate from the front-end
    and back-end services, such as databases and other logic.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 在*图1.2*中，您可以看到应用程序服务器如何与其他服务耦合，包括前端和后端服务。应用程序服务器处理来自前端和后端服务（如数据库和其他逻辑）的用户请求之间的连接。
- en: Database servers
  id: totrans-48
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 数据库服务器
- en: 'Linux has been the home of databases for a very long time now. We can install
    relational and non-relational databases on Linux as per our data requirements.
    The term **database server** refers to the combination of a database application
    and memory allocated for data storage. These databases can be used to record transactions
    in a similar way to how SQL Server works on Microsoft Windows:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: Linux长期以来一直是数据库的家园。根据我们的数据需求，我们可以在Linux上安装关系型和非关系型数据库。术语**数据库服务器**指的是数据库应用程序和为数据存储分配的内存的组合。这些数据库可以用于记录交易，类似于SQL
    Server在Microsoft Windows上的工作方式：
- en: '![Two-tier application model with databases behind a load balancer to provide
    high availability](img/B17160_01_03.jpg)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![负载均衡器后面的两层应用程序模型，以提供高可用性](img/B17160_01_03.jpg)'
- en: 'Figure 1.3: Two-tier application model with databases behind a load balancer'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.3：负载均衡器后面的两层应用程序模型
- en: Some commonly used database services include MariaDB, PostgreSQL, MySQL, and
    MongoDB. In most scenarios, the databases hosted in Linux servers are kept behind
    a load balancing solution to provide high availability. *Figure 1.3* is an example
    of this.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 一些常用的数据库服务包括MariaDB、PostgreSQL、MySQL和MongoDB。在大多数情况下，托管在Linux服务器上的数据库被保留在负载均衡解决方案后面，以提供高可用性。*图1.3*就是一个例子。
- en: Virtualization
  id: totrans-53
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 虚拟化
- en: 'The purpose of virtualization is to create virtual machines using specialized
    software called **hypervisors**. Most of you might be familiar with the term **virtual
    machines** (**VMs**), as this is quite common in on-premises environments as well
    as in the cloud. The purpose of making Linux a virtualization host is the same
    as installing a Windows Server instance with the Hyper-V role. VMs are often created
    for the isolation of workloads and for testing purposes. Popular Linux virtualization
    solutions include KVM, RHEV, Xen, QEMU, VirtualBox, and VMware:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 虚拟化的目的是使用称为**hypervisors**的专门软件创建虚拟机。您中的大多数人可能熟悉**虚拟机**（**VMs**）这个术语，因为这在本地环境和云中都很常见。将Linux作为虚拟化主机的目的与安装具有Hyper-V角色的Windows
    Server实例相同。VM通常用于隔离工作负载和测试目的。流行的Linux虚拟化解决方案包括KVM、RHEV、Xen、QEMU、VirtualBox和VMware：
- en: '![Levels of virtualization: Isolated apps, different guest OS, physical hardware](img/B17160_01_04.jpg)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![虚拟化级别：隔离的应用程序、不同的客户操作系统、物理硬件](img/B17160_01_04.jpg)'
- en: 'Figure 1.4: Virtualization levels'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.4：虚拟化级别
- en: As shown in *Figure 1.4*, the hypervisor is installed on the hardware and different
    VMs are created using hypervisors. Each of these VMs is isolated from the operating
    system and can host different applications.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 如*图1.4*所示，hypervisor安装在硬件上，并使用hypervisor创建不同的VM。这些VM中的每一个都与操作系统隔离开来，可以托管不同的应用程序。
- en: Containers
  id: totrans-58
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 容器
- en: We just discussed VMs and their creation using hypervisors installed on our
    Linux servers. The footprint of these servers will be large and will often contain
    some stock libraries and binaries that we do not require. This leads to a waste
    of compute resources; with all VMs being deployed, your host capacity will soon
    be exhausted. With the introduction of containers, things have changed, and we
    don't need to deploy the entire VM to host a dedicated service.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 我们刚刚讨论了VM和它们在我们的Linux服务器上使用的hypervisors创建。这些服务器的占用空间将很大，并且通常会包含一些我们不需要的库和二进制文件。这导致计算资源的浪费；随着所有VM的部署，您的主机容量很快就会耗尽。随着容器的引入，情况发生了变化，我们不需要部署整个VM来托管专用服务。
- en: A container is just a software package that contains the code, binaries, and
    libraries required for a specific task. For example, to run a web server, we could
    deploy a VM and install NGINX on it. The resource consumption for the VM would
    be high and encompass a lot of services that we do not need. We could instead
    use containers, so the image would only have code to run the NGINX server, and
    nothing else. This would mean a lightweight image and quick deployment.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 容器只是一个包含特定任务所需的代码、二进制文件和库的软件包。例如，要运行Web服务器，我们可以部署一个虚拟机并在其上安装NGINX。虚拟机的资源消耗会很高，并包含许多我们不需要的服务。我们可以使用容器，因此镜像只包含运行NGINX服务器的代码，而不包含其他内容。这意味着轻量级镜像和快速部署。
- en: 'In the case of VMs, we were using hypervisors to run them; in the case of containers,
    we use container runtime engines. A comparison of the two is shown in *Figure
    1.5*. Some common examples include Docker (which is the most used), Runc, Rkt
    (which is no longer in development), and Mesos:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 在虚拟机的情况下，我们使用hypervisors来运行它们；在容器的情况下，我们使用容器运行时引擎。两者的比较如*图1.5*所示。一些常见的例子包括Docker（最常用的），Runc，Rkt（已不再开发），以及Mesos：
- en: '![A comparison between containers and VMs](img/B17160_01_05.jpg)'
  id: totrans-62
  prefs: []
  type: TYPE_IMG
  zh: '![容器与虚拟机的比较](img/B17160_01_05.jpg)'
- en: 'Figure 1.5: Containers versus VMs'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.5：容器与虚拟机的比较
- en: Currently, we have container images available for each and every service, including
    NGINX, MySQL, and Apache. All major software packages have been ported.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，我们为每项服务都提供了容器镜像，包括NGINX、MySQL和Apache。所有主要的软件包都已移植。
- en: Cloud computing
  id: totrans-65
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 云计算
- en: 'Linux can be used to host cloud operating system solutions such as OpenStack.
    We can install OpenStack on our Linux server to host a cloud environment (both
    private and public) to manage large pools of underlying resources including compute,
    storage, and network. Think of this as the Azure Stack, where you can run Azure
    in your own datacenter. In a similar way, you can host a cloud environment in
    your datacenter for your users to deploy services using OpenStack, which is running
    on Linux:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: Linux可以用于托管诸如OpenStack之类的云操作系统解决方案。我们可以在Linux服务器上安装OpenStack，以托管一个云环境（私有和公共），以管理包括计算、存储和网络在内的大量底层资源。可以将其视为Azure
    Stack，在其中您可以在自己的数据中心中运行Azure。类似地，您可以在自己的数据中心中托管一个云环境，供用户使用OpenStack部署服务：
- en: '![The basic architecture of how OpenStack runs on top of Linux to serve as
    a platform for deployments](img/B17160_01_06.jpg)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![OpenStack在Linux上运行的基本架构，作为部署的平台](img/B17160_01_06.jpg)'
- en: 'Figure 1.6: OpenStack running on top of Linux'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.6：OpenStack在Linux上运行
- en: OpenStack exposes a lot of APIs using which users can track, manage, and monitor
    their deployment. *Figure 1.6* displays the basic architecture of how OpenStack
    runs on top of Linux to serve as a platform for deployments.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: OpenStack使用许多API，用户可以使用这些API跟踪、管理和监控其部署。*图1.6*显示了OpenStack在Linux上运行的基本架构，作为部署的平台。
- en: Container orchestration
  id: totrans-70
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 容器编排
- en: 'With the introduction of containers, many organizations are moving from a monolithic
    architecture to a microservice architecture. As the number of containers increases,
    it''s not easy to manage them on a large scale. That is where container orchestration
    tools such as Kubernetes come into the picture. We can install the Kubernetes
    service on a Linux machine and add Linux and Windows worker nodes to it. The master
    will be running on a Linux server and this will act as a management plane for
    the cluster. *Figure 1.7* shows a high-level representation of how Linux nodes
    are added to the Kubernetes master. In a similar fashion, we can also create a
    pool of Windows nodes and add it to the Kubernetes cluster:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 随着容器的引入，许多组织正在从单块架构转向微服务架构。随着容器数量的增加，要在大规模上管理它们并不容易。这就是容器编排工具如Kubernetes出现的原因。我们可以在Linux机器上安装Kubernetes服务，并将Linux和Windows工作节点添加到其中。主节点将在Linux服务器上运行，并作为集群的管理平面。*图1.7*显示了Linux节点如何添加到Kubernetes主节点的高级表示。类似地，我们也可以创建一组Windows节点，并将其添加到Kubernetes集群中：
- en: '![A high-level representation of how Linux nodes are added to the Kubernetes
    cluster](img/B17160_01_07.jpg)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![Linux节点如何添加到Kubernetes集群的高级表示](img/B17160_01_07.jpg)'
- en: 'Figure 1.7: Linux worker nodes in a Kubernetes cluster'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.7：Kubernetes集群中的Linux工作节点
- en: Another distribution of Kubernetes is OpenShift, developed by Red Hat. There
    are many Kubernetes distributions published by different vendors, all meant for
    container orchestration. In fact, there are dedicated Linux distributions that
    have been developed with Kubernetes in mind, such as k3OS from Rancher. Container
    orchestration is a booming and ever-growing sector, and we could even write a
    whole book on this topic alone.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: Kubernetes的另一个发行版是由Red Hat开发的OpenShift。不同供应商发布了许多Kubernetes发行版，都旨在进行容器编排。事实上，已经开发了专门考虑Kubernetes的Linux发行版，例如Rancher的k3OS。容器编排是一个蓬勃发展且不断增长的领域，我们甚至可以单独就这个主题写一本书。
- en: Big data
  id: totrans-75
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 大数据
- en: 'We started with simple examples and have expanded our horizons all the way
    to complex scenarios, such as big data on Linux. You can install tools such as
    Apache Hadoop on Linux and then perform big data analysis. We don''t really see
    this scenario in every organization due to varying availability and support for
    managed cloud services such as Azure Synapse Analytics or Azure HDInsight. Nevertheless,
    if you would like to implement big data analytics on Linux, it''s possible. *Figure
    1.8* shows the extensive list of tools that are used by data scientists and big
    data analysts, and all of these can be installed on Linux:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 我们从简单的例子开始，扩展到复杂的场景，比如在Linux上进行大数据处理。您可以在Linux上安装诸如Apache Hadoop之类的工具，然后进行大数据分析。由于Azure
    Synapse Analytics或Azure HDInsight等托管云服务的可用性和支持不同，我们并不是在每个组织中都能看到这种情况。尽管如此，如果您想在Linux上实现大数据分析，是可以做到的。*图1.8*显示了数据科学家和大数据分析师使用的大量工具列表，所有这些工具都可以在Linux上安装：
- en: '![The list of tools that are used by data scientists and big data analysts](img/B17160_01_08.jpg)'
  id: totrans-77
  prefs: []
  type: TYPE_IMG
  zh: '![数据科学家和大数据分析师使用的工具列表](img/B17160_01_08.jpg)'
- en: 'Figure 1.8: Tools used for big data analytics'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.8：用于大数据分析的工具
- en: As mentioned earlier, using Linux for big data analytics is a seldom seen scenario,
    however, some customers to prefer to install certain analytics tools like Splunk
    on Linux.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，使用Linux进行大数据分析是一个很少见的场景，但是一些客户确实喜欢在Linux上安装某些分析工具，如Splunk。
- en: In this section, we've talked about some common scenarios, but this doesn't
    mean that the use cases are confined to these only. With the introduction of new
    technologies almost daily, the potential use cases will keep on expanding. We
    explored these particular ones to demonstrate that Linux can handle wide-ranging
    scenarios, from basic functionality such as workstations all the way to container
    orchestration and big data.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们已经讨论了一些常见的情景，但这并不意味着用例仅限于这些。随着几乎每天都有新技术的引入，潜在的用例将不断扩展。我们探讨了这些特定的用例，以证明Linux可以处理各种各样的情况，从基本功能，如工作站，到容器编排和大数据。
- en: Even though on-premises infrastructure can also support all these scenarios,
    there are some disadvantages to this approach. This is the driving force behind
    the cloud journey of each and every organization. Let's see what these challenges
    are and how the cloud mitigates them.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管本地基础设施也可以支持所有这些场景，但这种方法也存在一些缺点。这是每个组织云之旅的推动力。让我们看看这些挑战是什么，以及云是如何缓解它们的。
- en: Challenges in on-premises infrastructure
  id: totrans-82
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 本地基础设施中的挑战
- en: 'Hosting an infrastructure on-premises is quite challenging because of the requirement
    for qualified personnel and complex networking. The traditional approach has persisted
    for a long time. With the introduction of cloud computing, organizations started
    to recognize how the challenges they faced for decades could be resolved by cloud
    computing. Before we take a look at the benefits of cloud computing, let''s understand
    the root cause of these on-premises challenges:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 在本地托管基础设施是非常具有挑战性的，因为需要合格的人员和复杂的网络。传统方法已经持续了很长时间。随着云计算的引入，组织开始意识到他们几十年来面临的挑战如何可以通过云计算来解决。在我们看云计算的好处之前，让我们了解一下本地托管挑战的根本原因：
- en: '**Scaling**: This is one of the primary challenges. It is really hard to implement
    a solution that can scale in and out based on varying traffic. You can add more
    servers (physical or virtual) whenever there is a need for more resources and
    terminate them when they are no longer needed. However, resource utilization in
    this scenario is not optimized. With the introduction of the cloud, scaling is
    very easy; you just have to specify the scaling conditions (CPU %, memory %, and
    so on), and the cloud provider will take care of the scaling itself. You never
    know where your business is going to be next year and Microsoft Azure can help
    you scale your infrastructure alongside your business.'
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**扩展**：这是主要的挑战之一。很难实现一个可以根据不同的流量进行扩展和收缩的解决方案。每当需要更多资源时，您可以添加更多服务器（物理或虚拟），并在不再需要时终止它们。然而，在这种情况下资源利用并不是最优化的。随着云的引入，扩展变得非常容易；您只需指定扩展条件（CPU％，内存％等），云提供商将负责扩展本身。您永远不知道明年您的业务会走向何方，而Microsoft
    Azure可以帮助您随着业务的发展扩展您的基础设施。'
- en: '**Agility**: Agility is the ability to react quickly. In Microsoft Azure, you
    can allocate and deallocate resources quickly, responding to changes in your business
    needs. All services are provided as on-demand self-service, which means that if
    you need a new server, it can be deployed in seconds. In on-premises, if we need
    a new physical server, the process for getting one is very involved. You might
    need to ask your hardware provider to ship the hardware, license it, patch it,
    and then install all the required software to make it suitable for running your
    workload. So, we are looking at a timeline of around 2-3 weeks at a minimum, which
    is in contrast to the agility offered by Microsoft Azure. Even if you are deploying
    a new VM on-premises, you need to make sure that your host machine has enough
    resources for the new VM, or else you may have to buy a new server.'
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**敏捷性**：敏捷性是快速反应的能力。在Microsoft Azure中，您可以快速分配和取消分配资源，以响应业务需求的变化。所有服务都是按需自助提供的，这意味着如果您需要一个新服务器，它可以在几秒钟内部署。在本地托管中，如果我们需要一个新的物理服务器，获取一个的过程非常复杂。您可能需要要求您的硬件提供商发货硬件，对其进行许可，打补丁，然后安装所有必需的软件，使其适合运行您的工作负载。因此，我们至少需要2-3周的时间表，这与Microsoft
    Azure提供的敏捷性形成对比。即使在本地部署新的虚拟机，您也需要确保您的主机机器有足够的资源来运行新的虚拟机，否则您可能需要购买一个新的服务器。'
- en: '**Skills**: The skills required to manage your own datacenter are very demanding
    and it''s very hard to find professionals to take care of it. Along with infrastructure
    management, you have to think about the security aspect of the datacenter as well.
    For that, you might need to hire more security professionals to make your datacenter
    more secure. An increase in the headcount of employees is another cost to the
    organization.'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**技能**：管理自己的数据中心所需的技能非常苛刻，很难找到专业人士来照顾它。除了基础设施管理，您还需要考虑数据中心的安全方面。为此，您可能需要雇佣更多的安全专业人员，使您的数据中心更加安全。员工人数的增加是组织的另一项成本。'
- en: '**Security**: In the previous point, we noted that hiring more professionals
    increases the cost to the organization. Even after successful hiring, with ever-changing
    and ever-evolving threats, it''s hard to train employees on every possible set
    of security threats. Managing security and how to react to new threats is still
    a challenge in on-premises environments. Most organizations implement preventive
    measures only after they have been hit by a threat. After the incident, you will
    need to hire cyber forensic professionals to conduct an investigation, which again
    is an additional expense to the organization.'
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**安全性**：在前面的观点中，我们注意到雇佣更多专业人员会增加组织的成本。即使成功雇佣了人才，由于威胁不断变化和不断发展，很难训练员工应对每一种可能的安全威胁。在本地环境中管理安全性以及如何应对新威胁仍然是一个挑战。大多数组织只有在受到威胁后才实施预防措施。事发后，你将需要雇佣网络取证专业人员进行调查，这又是对组织的额外开支。'
- en: These are some of the main reasons why it can be challenging to work on-premises.
    With the introduction of the cloud, organizations can focus more on achieving
    business goals rather than wasting time on racking and stacking, software patching,
    and other time-consuming IT management chores.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 这些是在本地工作可能具有挑战性的主要原因之一。随着云的引入，组织可以更多地专注于实现业务目标，而不是浪费时间在机架堆叠、软件打补丁和其他耗时的IT管理工作上。
- en: In the next section, we'll cover cloud economics, where we'll take a deep dive
    into the advantages of the cloud and how both the aforementioned and other unmentioned
    challenges can be resolved.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的部分，我们将涵盖云经济学，深入探讨云的优势以及如何解决前述和其他未提及的挑战。
- en: Cloud economics
  id: totrans-90
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 云经济学
- en: Owning a datacenter is not a core business of typical companies. While it might
    be tempting for the IT department to own physical servers that they can set up
    and physically interact with themselves, it probably is not something your **Chief
    Financial Officer** (**CFO**) wants to do. Owning servers not only shows up in
    the balance sheets as capital expenses, but the costs of the facilities, electricity,
    insurance, and so on also add up in terms of total operational costs. If you ask
    any IT manager how much it costs to buy, set up, operate, and dispose of the infrastructure
    needed to host one application for a year on their own datacenter, they most probably
    won't know or even dare to guess.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 拥有数据中心并不是典型公司的核心业务。虽然IT部门可能会想要拥有他们自己可以设置和物理互动的服务器，但这可能不是你的首席财务官想要做的事情。拥有服务器不仅会显示在资产负债表上作为资本支出，而且设施、电力、保险等成本也会在总运营成本方面累积起来。如果你问任何IT经理在他们自己的数据中心为一个应用程序购买、设置、运行和处理基础设施的成本是多少，他们很可能不知道，甚至不敢猜测。
- en: Outsourcing your infrastructure to a hosting provider sounds like a good idea
    after you realize how expensive it is to operate a datacenter yourself. A multi-customer
    datacenter is certainly more cost-effective compared to a single-customer datacenter.
    Adding scale makes it easier to save costs by sharing parts of the infrastructure
    between all or many customers. At the end of 2020, there were thousands or tens
    of thousands of professionally run, shared hosting datacenters around the world—how
    do we know which one to choose and which will be out of business next year?
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 在意识到自己运营数据中心的成本有多高之后，将基础设施外包给托管提供商听起来是个好主意。多客户数据中心肯定比单客户数据中心更具成本效益。通过扩大规模，可以更容易地通过在所有或许多客户之间共享基础设施的部分来节省成本。到2020年底，全球有成千上万个专业运营的共享托管数据中心——我们如何知道选择哪一个，哪一个将在明年倒闭？
- en: The size and the complexity of business software have increased, together with
    the amount of data collected and processed by applications. This creates more
    and more demand for compute power and storage, which naturally increases the infrastructure
    costs. Constantly increasing the cost of the hosted environment is not something
    your CFO will tolerate over an extended period.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 业务软件的规模和复杂性增加了，应用程序收集和处理的数据量也增加了。这导致对计算能力和存储的需求越来越大，自然也增加了基础设施成本。不断增加托管环境的成本并不是你的首席财务官会在较长时期内容忍的事情。
- en: Scale comes with benefits
  id: totrans-94
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 规模带来了好处
- en: 'Many hosted datacenter providers are migrating their own infrastructure to
    public clouds partly for the same reasons as their customers: public cloud infrastructures
    have become so massive in terms of the number of regions, datacenters, and servers
    that the scale and features for optimizing cost are really difficult to compete
    with. With traditional datacenters and hosting providers, it is usually not possible
    to pay only for times when you actually need the capacity, for example, during
    office hours.'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 许多托管数据中心提供商正在部分将自己的基础设施迁移到公共云，部分原因与他们的客户相同：公共云基础设施在区域、数据中心和服务器数量方面已经变得如此庞大，以至于在优化成本方面的规模和功能真的很难与之竞争。对于传统数据中心和托管提供商，通常不可能仅在实际需要容量的时候支付费用，例如在办公时间内。
- en: Public clouds can offer consumption-based pricing due to their massive scale.
    They can share regional and global resources with all of their customers. Additionally,
    they are able to make massive investments in their infrastructure and use custom-made
    components. In many cases, they can also optimize operating costs by choosing
    locations with favorable conditions, such as a cold climate, which helps in cooling
    a datacenter; what's more, the heat generated by the datacenter can be used to
    heat nearby homes.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 公共云由于其庞大的规模可以提供基于消费的定价。他们可以与所有客户共享区域和全球资源。此外，他们能够对基础设施进行大规模投资并使用定制组件。在许多情况下，他们还可以通过选择有利条件的地点来优化运营成本，比如寒冷的气候有助于冷却数据中心；而且，数据中心产生的热量可以用来供暖附近的住宅。
- en: 'Another benefit of public clouds worth mentioning is the security aspect. Let''s
    take a look at Azure: it uses Microsoft''s global network for all connectivity
    inside and outside of Azure. Microsoft operates various other cloud-based services,
    such as Microsoft 365 and Xbox, which receive lots of unwanted traffic from the
    internet. This has its benefits; for example, some badly behaved Xbox user trying
    to conduct a DDoS attack on another Xbox user will be noticed by Microsoft, and
    Microsoft can remediate the attack globally, making sure, for example, that Azure
    is not affected.'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 公共云的另一个值得一提的好处是安全性方面。让我们来看看Azure：它使用微软的全球网络进行Azure内部和外部的所有连接。微软还运营各种其他基于云的服务，如Microsoft
    365和Xbox，这些服务会收到来自互联网的大量不必要的流量。这有其好处；例如，一些行为不端的Xbox用户试图对另一个Xbox用户进行DDoS攻击，微软会注意到并全球化地进行应对，确保Azure不受影响。
- en: By using public clouds, you save time and money by not having to employ your
    own datacenter team, or by not having to pay a hosting provider to do so. It also
    gives you almost unlimited scalability up and down, without having to commit to
    long-term contracts.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 通过使用公共云，您可以节省时间和金钱，无需雇佣自己的数据中心团队，也无需支付托管提供商来做这些工作。它还可以让您在不必承诺长期合同的情况下实现几乎无限的可伸缩性。
- en: Migrating to public clouds does not mean you need to do it all at once. You
    may choose a hybrid approach where you leave some applications and data behind
    and just create a connection between the environments.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 迁移到公共云并不意味着您需要一次性完成所有工作。您可以选择混合方法，留下一些应用程序和数据，并在环境之间建立连接。
- en: Many services available
  id: totrans-100
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 许多可用的服务
- en: To better understand the migration strategies, it is useful to understand the
    various cloud services available.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 为了更好地理解迁移策略，了解各种可用的云服务是有用的。
- en: Cloud services such as Outlook and Gmail, or OneDrive and Google Drive, are
    good examples of **Software as a Service** (**SaaS**). Most cloud services targeted
    at consumers, such as Facebook, Instagram, and WhatsApp, also fall into this category.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 像Outlook和Gmail，或者OneDrive和Google Drive这样的云服务，都是**软件即服务**（**SaaS**）的很好的例子。大多数面向消费者的云服务，如Facebook、Instagram和WhatsApp，也属于这一类别。
- en: From the user's point of view, these solutions are just "there" and can be used
    without much initial effort. The same applies to typical business solutions such
    as Salesforce CRM or Microsoft 365\. You cannot install these yourself even if
    you wanted; they always come as a turnkey service and you do not have any visibility
    into the underlying infrastructure.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 从用户的角度来看，这些解决方案只是“存在”，可以在没有太多初始努力的情况下使用。对于典型的业务解决方案，如Salesforce CRM或Microsoft
    365，也是如此。即使您想要，您也无法自行安装这些服务；它们始终作为即插即用的服务提供，并且您无法看到底层基础设施。
- en: '**Platform as a Service** (**PaaS**) solutions differ from SaaS in a couple
    of ways; they need some kind of installation work and an infrastructure where
    they can be installed. While the installation is automatic, you may need to manage
    some parts of the infrastructure yourself. Examples of such services include **Azure
    Kubernetes Service** (**AKS**) and **Azure Red Hat OpenShift** (**ARO**).'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: '**平台即服务**（**PaaS**）解决方案与SaaS有几点不同；它们需要一些安装工作和一个可以安装它们的基础设施。虽然安装是自动的，但您可能需要自己管理基础设施的一些部分。此类服务的示例包括**Azure
    Kubernetes Service**（**AKS**）和**Azure Red Hat OpenShift**（**ARO**）。'
- en: In the context of migrating Linux servers to Azure, we are focusing on **Infrastructure
    as a Service** (**IaaS**), which means that you only get the lower-level infrastructure
    components as a service. Everything else is your own responsibility, including
    configuring the storage and network and operating the operating system yourself.
    This type of cloud service is similar to typical VM-hosting services offered by
    hosting companies.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 在迁移Linux服务器到Azure的背景下，我们专注于**基础设施即服务**（**IaaS**），这意味着您只能获得较低级别的基础设施组件作为服务。其他一切都是您自己的责任，包括配置存储和网络以及自行操作操作系统。这种类型的云服务类似于托管公司提供的典型VM托管服务。
- en: Benefits of migrating to Azure
  id: totrans-106
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 迁移到Azure的好处
- en: Typical Linux deployments in on-premises environments are based on VMs, and
    migrating them to Azure falls into the realm of IaaS, so they will still be VMs
    after the migration. For sysadmins, this means the same skills they already have
    and the same familiar management tools are still useful on Azure.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: Typical Linux deployments in on-premises environments are based on VMs, and
    migrating them to Azure falls into the realm of IaaS, so they will still be VMs
    after the migration. For sysadmins, this means the same skills they already have
    and the same familiar management tools are still useful on Azure.
- en: In the early days of Azure, some services were not designed for Linux use, and
    users sometimes got frustrated by the complexity of using Linux on Azure. Being
    originally named Microsoft Azure gives a hint as to what use cases it was designed
    for. Since then, Azure has evolved and it has been developed to be more and more
    Linux-friendly.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 在Azure早期，一些服务并不是为Linux使用而设计的，用户有时会因在Azure上使用Linux的复杂性而感到沮丧。最初被命名为Microsoft Azure可以暗示它设计用途。自那时起，Azure已经发展并且已经被开发得越来越友好于Linux。
- en: Note
  id: totrans-109
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 注意
- en: Linux has rapidly gained popularity in Azure. In 2015, Mark Russinovich, the
    CTO of Azure, said that one in four VM instances in Azure runs Linux. In 2018,
    Microsoft Cloud EVP Scott Guthrie revealed in an interview by ZDnet that about
    half of Azure VMs run Linux.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: Linux在Azure中迅速赢得了人气。2015年，Azure的CTO Mark Russinovich表示，Azure中四分之一的VM实例运行Linux。2018年，微软云EVP
    Scott Guthrie在ZDnet的一次采访中透露，大约一半的Azure VM运行Linux。
- en: ([https://www.zdnet.com/article/mark-russinovich-the-microsoft-azure-cloud-and-open-source/](https://www.zdnet.com/article/mark-russinovich-the-microsoft-azure-cloud-and-open-source/)
    and [https://www.zdnet.com/article/linux-now-dominates-azure/](https://www.zdnet.com/article/linux-now-dominates-azure/))
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: （[https://www.zdnet.com/article/mark-russinovich-the-microsoft-azure-cloud-and-open-source/](https://www.zdnet.com/article/mark-russinovich-the-microsoft-azure-cloud-and-open-source/)
    和 [https://www.zdnet.com/article/linux-now-dominates-azure/](https://www.zdnet.com/article/linux-now-dominates-azure/)）
- en: At the time of writing in 2021, Microsoft has already become well known for
    its love of Linux and open source. Microsoft is supporting many open-source projects,
    initiatives, and foundations, such as the Linux Foundation. According to their
    website ([https://opensource.microsoft.com/program/](https://opensource.microsoft.com/program/)),
    Microsoft already uses over 150,000 open-source components while building their
    products and services.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 截至2021年，微软已经因其对Linux和开源的热爱而广为人知。微软支持许多开源项目、倡议和基金会，如Linux基金会。根据他们的网站（https://opensource.microsoft.com/program/）显示，微软在构建其产品和服务时已经使用了超过15万个开源组件。
- en: Today, more and more customers are migrating their existing workloads to Azure.
    As mentioned earlier, many of these workloads are Linux-based. To facilitate these
    migrations, Microsoft has developed many tools and services with Linux users in
    mind. We will cover these in more detail later in this book.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，如今越来越多的客户正在将其现有工作负载迁移到Azure。正如前面提到的，其中许多工作负载都是基于Linux的。为了促进这些迁移，微软已经为Linux用户开发了许多工具和服务。我们将在本书的后面更详细地介绍这些内容。
- en: Microsoft has partnered with all the major Linux vendors to help their customers
    move workloads to Azure. These partnerships have the aim of developing new features
    and ensuring that existing features are better integrated, not to forget providing
    monetary benefits in the shape of the ability to continue to use existing commercial
    on-premises contracts in Azure.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 微软已经与所有主要的Linux供应商合作，帮助他们的客户将工作负载迁移到Azure。这些合作的目的是开发新功能，并确保现有功能更好地集成，更不要忘记提供金钱上的好处，比如能够继续在Azure中使用现有的商业本地合同。
- en: Enterprise Linux companies such as Red Hat and SUSE are very popular in the
    world of on-premises IT infrastructure, and they have both worked with Microsoft
    to create unified global support services to ensure that their customers can migrate
    to Azure without hassle.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 企业Linux公司，如红帽和SUSE，在本地IT基础设施领域非常受欢迎，它们都与微软合作，创建了统一的全球支持服务，以确保他们的客户可以无忧地迁移到Azure。
- en: Community Linux distributions such as CentOS and Ubuntu are very popular in
    Azure, and there are many companies offering commercial Linux support, including
    Canonical, with its Ubuntu Pro offering.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 在Azure中，像CentOS和Ubuntu这样的社区Linux发行版非常受欢迎，许多公司提供商业Linux支持，包括Canonical的Ubuntu
    Pro。
- en: The journey from Linux to Azure
  id: totrans-117
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 从Linux到Azure的旅程
- en: In this section, we'll cover some aspects of typical Linux environments that
    we should know about when we are considering migration to Azure. We'll go through
    some key features and discuss the solutions available on Azure. We will also provide
    links to related Azure documentation throughout this section to make your learning
    curve a bit shallower—the documentation covers Linux on Azure extremely well.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将涵盖一些典型Linux环境的方面，当我们考虑迁移到Azure时，我们应该了解这些方面。我们将介绍一些关键特性，并讨论Azure上可用的解决方案。我们还将在本节中提供相关的Azure文档链接，以使您的学习曲线变得更加平缓——文档非常全面地涵盖了Azure上的Linux。
- en: Before going into the technical details, it's good to know that you don't necessarily
    need to implement everything yourself. Azure Marketplace has lots of Linux-based
    solutions that may solve your problem in a turnkey fashion.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 在深入技术细节之前，了解您不一定需要自己实施一切是很好的。Azure Marketplace拥有许多基于Linux的解决方案，可以以一揽子方式解决您的问题。
- en: Azure Marketplace has over 2,000 Linux VM-based images at the time of writing
    compared to about 800 Windows-based images. Linux is clearly dominating the marketplace.
    Out of those images, only 14 are from Microsoft; the rest are created and published
    by third-party ISV companies. For example, if you want to install WordPress on
    a Linux VM, you need to install Apache, PHP, and MySQL as the database. On the
    other hand, if you're using a Marketplace image, you'll be able to find customized
    WordPress images. These images can easily be deployed right from the Marketplace
    to your Azure subscription without the need to manually install the Apache, PHP,
    and MySQL services.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 在撰写本文时，Azure Marketplace拥有超过2,000个基于Linux VM的镜像，而Windows镜像约为800个。Linux显然在市场上占据主导地位。在这些镜像中，只有14个来自微软；其余都是由第三方ISV公司创建和发布的。例如，如果您想在Linux
    VM上安装WordPress，您需要安装Apache、PHP和MySQL作为数据库。另一方面，如果您使用市场镜像，您将能够找到定制的WordPress镜像。这些镜像可以直接从市场部署到您的Azure订阅，无需手动安装Apache、PHP和MySQL服务。
- en: 'You can find Azure Marketplace here: [https://azuremarketplace.microsoft.com/marketplace/](https://azuremarketplace.microsoft.com/marketplace/).
    The Marketplace images are also available via Azure command-line interfaces. The
    number of images is increasing as we speak, and it is also possible to publish
    your own images to Azure Marketplace and make them available to large numbers
    of customers.'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在这里找到Azure Marketplace：https://azuremarketplace.microsoft.com/marketplace/。市场镜像也可以通过Azure命令行界面获得。镜像数量正在不断增加，同时也可以将自己的镜像发布到Azure
    Marketplace，并使其对大量客户可用。
- en: We will begin our discussion by talking about clustering, which is a scenario
    where there are a lot of gray areas.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将从讨论集群开始，这是一个存在许多灰色地带的场景。
- en: Clustering
  id: totrans-123
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 集群
- en: In plain English, the word "cluster" means group, flock, or assemble. When we
    say clustering in the IT world, we are expressing the idea of a group of computers
    (in this context, Linux computers), multiple storage components, and redundant
    network connections acting together to form a highly available system. Clustering
    avoids a single point of failure and also provides load balancing along with high
    availability. Clustering may look complex at first glance as we have to manage
    multiple computing resources, but this section is all about demystifying the complexity
    of clustering.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 简单来说，"集群"一词意味着组、群或组装。当我们在IT世界中谈到集群时，我们表达的是一组计算机（在这种情况下是Linux计算机）、多个存储组件和冗余网络连接共同形成一个高可用系统的想法。集群避免了单点故障，并提供了负载平衡和高可用性。集群乍看起来可能很复杂，因为我们必须管理多个计算资源，但本节旨在揭示集群的复杂性。
- en: 'Typical Linux clustering scenarios can be categorized into four types:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 典型的Linux集群场景可以分为四种类型：
- en: Storage
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 存储
- en: High availability
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 高可用性
- en: Load balancing
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 负载均衡
- en: High performance
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 高性能
- en: Each of these is implemented with different software and requires its own architecture
    and configuration. In the next few sections, we will see how Azure addresses each
    of these four scenarios.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 每个都使用不同的软件实现，并需要自己的架构和配置。在接下来的几节中，我们将看到Azure如何解决这四种情况。
- en: Azure shared disks for storage
  id: totrans-131
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 用于存储的Azure共享磁盘
- en: Storage clusters in on-premises systems are usually considered to be consistent
    clustered file systems between multiple nodes. The technology used for file system
    clusters is very often GlusterFS, GFS2, or OCFS2 when using a software solution.
    For block-level storage sharing, it's very common to use DRBD. Using these solutions
    on Azure is not straightforward—setting them up properly even on an on-premises
    system requires a highly skilled sysadmin.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 本地系统中的存储集群通常被认为是多个节点之间一致的集群文件系统。在使用软件解决方案时，文件系统集群通常使用GlusterFS、GFS2或OCFS2技术。对于块级存储共享，非常常见的是使用DRBD。在Azure上使用这些解决方案并不简单——即使在本地系统上正确设置它们也需要高技能的系统管理员。
- en: For shared block storage, you can use Azure shared disks. This is quite a recent
    feature that allows you to attach a managed disk to multiple VMs at the same time.
    This solves many issues associated with storage clustering. **SCSI Persistent
    Reservations** (**SCSI PR**) is an industry standard that was used by applications
    in on-premises environments running on a **Storage Area Network** (**SAN**). The
    same SCSI PR facilitates reservations that will be used by the VMs to read or
    write data to their attached disk. Shared managed disks need to use cluster manager
    tools such as Pacemaker, which will handle cluster node communication and write
    locking. Pacemaker is required in clustering as shared managed disks don't offer
    fully managed file systems that can be accessed via SMB/NFS.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 对于共享块存储，您可以使用Azure共享磁盘。这是一个相当新的功能，允许您同时将托管磁盘附加到多个VM。这解决了与存储集群相关的许多问题。SCSI Persistent
    Reservations（SCSI PR）是一个行业标准，以前在运行在存储区域网络（SAN）上的本地环境中的应用程序中使用。相同的SCSI PR促进了将被VM用于读取或写入其附加磁盘的预留。共享托管磁盘需要使用群集管理器工具，如Pacemaker，它将处理群集节点通信和写锁定。由于共享托管磁盘不提供可以通过SMB/NFS访问的完全托管的文件系统，因此在集群中需要Pacemaker。
- en: One disadvantage here is that not all tiers of disk types can be used as shared
    disks. Currently, Ultra SSD and Premium SSD are supported. If you are using Standard
    HDD or Standard SSD for your VM, in order to fulfill the clustering prerequisites
    or to overcome the current limitation, you may have to upgrade the disk type to
    Ultra or Premium SSD.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 这里的一个缺点是，并非所有类型的磁盘层都可以用作共享磁盘。目前，Ultra SSD和Premium SSD得到支持。如果您的VM使用标准HDD或标准SSD，为了满足集群的先决条件或克服当前的限制，您可能需要将磁盘类型升级为Ultra或Premium
    SSD。
- en: 'The documentation on shared disks is available here: [https://docs.microsoft.com/azure/virtual-machines/disks-shared](https://docs.microsoft.com/azure/virtual-machines/disks-shared).
    We should note that Azure shared disks are not supported for all Linux distributions.'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 有关共享磁盘的文档可在此处找到：[https://docs.microsoft.com/azure/virtual-machines/disks-shared](https://docs.microsoft.com/azure/virtual-machines/disks-shared)。我们应该注意，Azure共享磁盘不支持所有Linux发行版。
- en: Azure Files and Azure NetApp Files
  id: totrans-136
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Azure Files和Azure NetApp Files
- en: A solution for shared file systems is a service called **Azure Files**. It is
    an easy-to-use cloud file system that allows the mounting of Azure file shares
    by using the **Server Message Block** (**SMB**) or **Network File System** (**NFS**)
    protocol. NFS is very popular for Linux servers and SMB is typically used with
    Windows servers. In the *Typical Linux use cases in IT infrastructure* section,
    we discussed how file servers play a vital role in IT infrastructure; Azure Files
    is an enterprise-grade cloud version of that. These file shares can be mounted
    on Linux, Windows, and macOS systems. Azure Files provides a common shared space
    that can be shared with your on-premises workstations as well as VMs. Being a
    part of Azure Storage, Azure Files has all the features that Azure Storage supports.
    When it comes to the NFS share, it has fewer features compared to the SMB share.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 用于共享文件系统的解决方案是一个名为Azure Files的服务。这是一个易于使用的云文件系统，允许使用Server Message Block（SMB）或Network
    File System（NFS）协议挂载Azure文件共享。NFS在Linux服务器上非常受欢迎，SMB通常与Windows服务器一起使用。在“IT基础设施中的典型Linux用例”部分，我们讨论了文件服务器在IT基础设施中发挥着至关重要的作用；Azure
    Files是这一企业级云版本。这些文件共享可以在Linux、Windows和macOS系统上挂载。Azure Files提供了一个可以与本地工作站和VM共享的共享空间。作为Azure存储的一部分，Azure
    Files具有Azure存储支持的所有功能。在NFS共享方面，它的功能比SMB共享少。
- en: 'Azure Files can be used as a complete replacement for the file server role
    that we had on our on-premises servers. Since we have the capability to attach
    to our on-premises server, we can also use Azure Files to move data from on-premises
    servers to cloud servers with the same file share mounted on both ends. The related
    documentation is available here: [https://docs.microsoft.com/azure/storage/files/storage-files-introduction](https://docs.microsoft.com/azure/storage/files/storage-files-introduction).'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: Azure Files可以完全替代我们在本地服务器上拥有的文件服务器角色。由于我们有能力连接到本地服务器，因此我们还可以使用Azure Files将数据从本地服务器移动到云服务器，并在两端都挂载相同的文件共享。相关文档可在此处找到：[https://docs.microsoft.com/azure/storage/files/storage-files-introduction](https://docs.microsoft.com/azure/storage/files/storage-files-introduction)。
- en: 'An additional solution for a shared NFS filesystem is called **Azure NetApp
    Files** (**ANF**). This is an enterprise-class high-performance file system service.
    NetApp is a very popular storage solution typically used in on-premises systems,
    and it is also now available on Azure. You can read more about the solution here:
    [https://docs.microsoft.com/azure/azure-netapp-files](https://docs.microsoft.com/azure/azure-netapp-files).'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: Azure NetApp Files（ANF）是共享NFS文件系统的另一种解决方案。这是一个企业级高性能文件系统服务。NetApp是一个非常受欢迎的存储解决方案，通常用于本地系统，现在也可以在Azure上使用。您可以在这里阅读更多关于该解决方案的信息：[https://docs.microsoft.com/azure/azure-netapp-files](https://docs.microsoft.com/azure/azure-netapp-files)。
- en: ANF supports various performance tiers for storage, depending on your application's
    IOPS requirement. As this is deeply integrated with the Azure platform, it can
    be used as a shared file solution for your clustered solutions. Additionally,
    ANF carries leading industry certifications, which makes it ideal for SAP HANA
    LOB applications, HPFS, VDI, and HPC. Note that the minimum storage capacity size
    for ANF is currently 4 TB.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: ANF支持各种性能层，根据您的应用程序的IOPS需求而定。由于它与Azure平台深度集成，因此可以用作集群解决方案的共享文件解决方案。此外，ANF具有领先的行业认证，非常适合SAP
    HANA LOB应用程序、HPFS、VDI和HPC。请注意，ANF的最小存储容量大小目前为4 TB。
- en: Availability set for high availability
  id: totrans-141
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 用于高可用性的可用性集
- en: Azure offers very simple availability set functionality that can be used to
    create simple and easy-to-use HA environments. Availability sets are composed
    of **Fault Domains** (**FDs**) and **Update Domains** (**UDs**).
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: Azure提供了非常简单的可用性集功能，可用于创建简单且易于使用的HA环境。可用性集由**故障域**（FDs）和**更新域**（UDs）组成。
- en: FDs are groups of hardware in an Azure datacenter that share common power, cooling,
    and network connectivity. When we deploy VMs to an availability set, Azure makes
    sure that they are distributed across three FDs, so that even if the power to
    FD 1 goes down, a VM in FD 2 or FD 3 can serve customers.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: FD是Azure数据中心中共享公共电源、冷却和网络连接的硬件组。当我们将VM部署到可用性集时，Azure会确保它们分布在三个FD中，因此即使FD 1的电源中断，FD
    2或FD 3中的VM也可以为客户提供服务。
- en: 'Similarly, we have UDs where the VMs are grouped in a way where the underlying
    hardware can be rebooted at the same time. When a planned maintenance event happens
    in an Azure datacenter, only one UD gets rebooted at a time. By default, if you
    deploy to an availability set, the VMs will be distributed across five FDs. However,
    if you so wish, you can increase this to up to 20 UDs. *Figure 1.9* shows how
    UDs and FDs are mapped in a datacenter:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 类似地，我们有UDs，其中VM以使底层硬件可以同时重新启动的方式进行分组。当Azure数据中心发生计划维护事件时，一次只有一个UD会被重新启动。默认情况下，如果部署到可用性集，VM将分布在五个FD中。但是，如果您愿意，可以将此增加到最多20个UD。*图1.9*显示了UD和FD在数据中心中的映射：
- en: '![Mapping of fault domains and update domains in a datacenter](img/B17160_01_09.jpg)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![数据中心中故障域和更新域的映射](img/B17160_01_09.jpg)'
- en: 'Figure 1.9: FDs and UDs'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 图1.9：FD和UD
- en: 'Availability sets enable you to deploy VMs on Azure in a distributed manner
    across isolated hardware clusters. A useful tutorial for this feature is available
    here: [https://docs.microsoft.com/azure/virtual-machines/linux/tutorial-availability-sets](https://docs.microsoft.com/azure/virtual-machines/linux/tutorial-availability-sets).'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 可用性集使您可以在Azure上以分布式方式部署VM，跨隔离的硬件集群。有关此功能的有用教程可在此处找到：[https://docs.microsoft.com/azure/virtual-machines/linux/tutorial-availability-sets](https://docs.microsoft.com/azure/virtual-machines/linux/tutorial-availability-sets)。
- en: 'The proximity placement groups feature enables you to keep selected VMs near
    to one another in terms of distance within an availability set. This reduces network
    latency, which could impact your applications. See more information about this
    feature here: [https://docs.microsoft.com/azure/virtual-machines/co-location#proximity-placement-groups](https://docs.microsoft.com/azure/virtual-machines/co-location#proximity-placement-groups).'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 近距离放置组功能使您可以在可用性集内将选定的VM保持在彼此附近的距离上。这减少了可能影响您的应用程序的网络延迟。有关此功能的更多信息，请参见：[https://docs.microsoft.com/azure/virtual-machines/co-location#proximity-placement-groups](https://docs.microsoft.com/azure/virtual-machines/co-location#proximity-placement-groups)。
- en: Pacemaker, the software used for clustering on typical on-premises setups, is
    not often required on Azure. Some legacy solutions ported to Azure, however, are
    based on Pacemaker and DRBD, for example, the certified SAP on Azure architecture.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: Pacemaker是典型本地设置中用于集群的软件，在Azure上通常不需要。但是，一些迁移到Azure的传统解决方案基于Pacemaker和DRBD，例如经过认证的SAP
    on Azure架构。
- en: Azure layer-4 load balancing
  id: totrans-150
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Azure第4层负载平衡
- en: 'Azure comes with a very useful layer-4 load balancing functionality that can
    often be used to replace typical on-premises solutions. Load balancing is required
    to distribute requests and loads between multiple VMs. This tutorial will guide
    you through the creation and operation of Linux load balancing on Azure: [https://docs.microsoft.com/azure/virtual-machines/linux/tutorial-load-balancer](https://docs.microsoft.com/azure/virtual-machines/linux/tutorial-load-balancer).'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: Azure配备了非常有用的第4层负载平衡功能，通常可用于替代典型的本地解决方案。负载平衡是必需的，用于在多个VM之间分发请求和负载。本教程将指导您在Azure上创建和操作Linux负载平衡：[https://docs.microsoft.com/azure/virtual-machines/linux/tutorial-load-balancer](https://docs.microsoft.com/azure/virtual-machines/linux/tutorial-load-balancer)。
- en: Many on-premises load balancing solutions are not suitable for moving to the
    cloud as-is, so it may be beneficial to investigate whether Azure load balancing
    solves the same need. In particular, if your application architecture is going
    to be modified during migration, then the current load balancing architecture
    might not have the features you need or might be unnecessarily expensive when
    used on Azure.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 许多本地负载均衡解决方案并不适合直接迁移到云端，因此值得调查一下Azure负载均衡是否能满足相同的需求。特别是，如果在迁移过程中要修改应用架构，那么当前的负载均衡架构可能没有你需要的功能，或者在Azure上使用时可能会过于昂贵。
- en: High-performance computing on Azure
  id: totrans-153
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Azure上的高性能计算
- en: The last clustering type, high-performance computing, or HPC, is a scenario
    very well suited to Azure. Typical on-premises HPC solutions are extremely expensive,
    especially when you are not using them, due to the fact that you are paying for
    the hardware around the clock.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一种集群类型，高性能计算或HPC，非常适合在Azure上使用。典型的本地HPC解决方案非常昂贵，特别是当你不使用它们时，因为你需要全天候支付硬件费用。
- en: 'Azure provides both a traditional CPU-based HPC solution and also a very powerful
    GPU-based highly scalable model. You can use various storage options to share
    data between the nodes running your workloads. You may also want to reap the benefits
    of the RDMA-based high-throughput back-end network. Related documentation is available
    here: [https://docs.microsoft.com/azure/architecture/topics/high-performance-computing](https://docs.microsoft.com/azure/architecture/topics/high-performance-computing).'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: Azure提供了传统基于CPU的HPC解决方案，还有一个非常强大的基于GPU的高度可扩展模型。你可以使用各种存储选项在运行工作负载的节点之间共享数据。你可能还想利用基于RDMA的高吞吐量后端网络的好处。相关文档在这里：[https://docs.microsoft.com/azure/architecture/topics/high-performance-computing](https://docs.microsoft.com/azure/architecture/topics/high-performance-computing)。
- en: Additionally, there are various third-party HPC solutions available on the Azure
    Marketplace.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，在Azure Marketplace上还有各种第三方HPC解决方案可用。
- en: Subscription portability
  id: totrans-157
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 订阅可移植性
- en: Very often, the biggest challenge with Azure migrations for Linux is surprisingly
    not technical. Let's stop here for a moment and think about your Linux licensing
    and subscriptions, especially if you are using a commercial Linux distribution
    such as Red Hat Enterprise Linux or SUSE Linux Enterprise Server.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 对于Linux在Azure上的迁移，最大的挑战往往出人意料地不是技术上的。让我们在这里停下来，思考一下你的Linux许可和订阅，特别是如果你使用商业Linux发行版，如Red
    Hat Enterprise Linux或SUSE Linux Enterprise Server。
- en: 'Do you know whether you have simply lifted and shifted your existing VM to
    the public cloud? Do you need to discuss with your IT procurement or a lawyer
    the contract terms of Red Hat or SUSE? The correct answer to any question you
    may have in your mind right now is: *Yes, but check with your IT procurement first.*'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 你知道你是否只是简单地将现有的虚拟机迁移到了公共云吗？你是否需要与IT采购部门或律师讨论Red Hat或SUSE的合同条款？你现在心里可能有任何问题的正确答案是：*是的，但先与IT采购部门核实一下*。
- en: Both Red Hat and SUSE allow customers to move their existing enterprise subscriptions
    to the public cloud, but there are a couple of steps you'll need to take in order
    to be compliant and to continue to receive support directly from them. In Azure,
    the Linux VMs created using these migrated subscriptions are **Bring Your Own
    Subscription** (**BYOS**). Red Hat calls the related program **Red Hat Cloud Access**,
    and SUSE's program is called **SUSE Public Cloud Program**.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: Red Hat和SUSE都允许客户将其现有的企业订阅迁移到公共云，但你需要采取一些步骤以确保合规，并继续直接从他们那里获得支持。在Azure上，使用这些迁移订阅创建的Linux虚拟机是**自带订阅**（**BYOS**）。Red
    Hat称相关计划为**Red Hat Cloud Access**，SUSE的计划称为**SUSE Public Cloud Program**。
- en: Please note that migrating your existing Linux subscriptions to Azure means
    that you will continue to have a billing relationship with Red Hat or SUSE for
    VMs utilizing these subscriptions. You can create new Linux VMs on Azure using
    Microsoft's **Pay as You Go** (**PAYG**) billing.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，将现有的Linux订阅迁移到Azure意味着你将继续与Red Hat或SUSE建立虚拟机的计费关系。你可以使用微软的**按使用付费**（**PAYG**）计费在Azure上创建新的Linux虚拟机。
- en: 'Finally, it''s useful to learn about Azure Hybrid Benefit, which allows you
    to change between BYOS and PAYG. This feature is under active development and,
    at the time of writing, supports only VMs migrated from on-premises to Azure.
    See more details in the documentation here: [https://docs.microsoft.com/azure/virtual-machines/linux/azure-hybrid-benefit-linux](https://docs.microsoft.com/azure/virtual-machines/linux/azure-hybrid-benefit-linux).'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，了解Azure混合权益是很有用的，它允许你在自带订阅和按使用付费之间切换。这个功能正在积极开发中，截至撰写本文时，仅支持从本地迁移到Azure的虚拟机。在这里可以查看更多详细信息：[https://docs.microsoft.com/azure/virtual-machines/linux/azure-hybrid-benefit-linux](https://docs.microsoft.com/azure/virtual-machines/linux/azure-hybrid-benefit-linux)。
- en: If you are using community distributions such as CentOS and Ubuntu, none of
    the preceding should matter to you as those distributions are completely free
    to use, but at least you learned something new today.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用的是CentOS和Ubuntu等社区发行版，那么前面提到的内容对你来说都不重要，因为这些发行版完全免费，但至少你今天学到了一些新知识。
- en: Summary
  id: totrans-164
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 总结
- en: This chapter started with the history of Linux. The leap that Linux took from
    being a fun project to being an enterprise-grade operating system was astonishing.
    Today, Linux is everywhere, from high-end servers to smartphones to smart bulbs.
    Due to the freedom of customization, there are a lot of variants of Linux, referred
    to as flavors or distros; there is a distro available for each and every use case.
    If none of the distros matches your exact requirements and you want to add more
    features, feel free to customize and build your own Linux. We explored some use
    case scenarios for Linux and looked at some of the challenges that traditional
    IT is facing with infrastructure management in on-premises environments.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 本章以Linux的历史开始。Linux从一个有趣的项目跃升为企业级操作系统的飞跃令人惊讶。如今，Linux随处可见，从高端服务器到智能手机再到智能灯泡。由于自定义的自由，有许多Linux的变体，称为口味或发行版；每种用例都有相应的发行版可用。如果没有一种发行版符合您的确切要求，并且您想添加更多功能，可以随意自定义和构建自己的Linux。我们探讨了一些Linux的用例场景，并研究了传统IT在本地环境中面临的基础设施管理挑战。
- en: Every organization runs by numbers. In the Cloud economics section, we examined
    how running workloads in the cloud can draw profit if we make a CapEx versus OpEx
    comparison. The upper hand of the cloud not only comes from cost reduction; it's
    a solution for all the challenges we encountered in on-premises environments.
    We discussed several advantages, including fault tolerance, high availability,
    agility, elasticity, and scaling.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 每个组织都是以数字运行的。在云经济学部分，我们研究了在云中运行工作负载如何在进行资本支出与运营支出比较时获利。云的优势不仅来自成本的降低；它是我们在本地环境中遇到的所有挑战的解决方案。我们讨论了几个优势，包括容错性、高可用性、灵活性、弹性和扩展性。
- en: It is safe to say that everything you used to do in on-premises environments
    can be migrated into Azure in one way or another. There's plenty of good-quality
    documentation available, and third-party ISV solutions can shorten your implementation
    cycle. There is additional help available from Microsoft partner companies, Microsoft's
    customer account teams, and also from the Microsoft Fast Track team, which is
    dedicated to helping customers move to Azure.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 可以肯定地说，你在本地环境中所做的一切都可以以某种方式迁移到Azure。有大量高质量的文档可用，第三方ISV解决方案可以缩短您的实施周期。微软合作伙伴公司、微软的客户账户团队以及致力于帮助客户转移到Azure的微软快速跟踪团队也提供了额外的帮助。
- en: The next chapter is where we take a deep dive into these distros, starting with
    the licensing part, discussing some widely adopted distros and, ultimately, the
    Linux on Azure experience.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 下一章是我们深入研究这些发行版的地方，从许可部分开始，讨论一些广泛采用的发行版，最终是在Azure上的Linux体验。
