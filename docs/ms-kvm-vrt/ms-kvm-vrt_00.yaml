- en: Preface
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 前言
- en: '*Mastering KVM Virtualization* is a book that should get you "from zero to
    hero" status in the time it takes for you to go through this book. This book is
    a large collection of everything that KVM has to offer, both for a DevOps and
    regular system administration audience, and developers. It is our hope that, by
    going through this book, you''ll be able to understand everything about the inner
    workings of KVM, as well as the more advanced concepts and everything in between.
    It doesn''t matter if you''re just barely starting with KVM virtualization or
    if you''re already well on the way – you should find some valuable information
    on the pages of this book.'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 《精通KVM虚拟化》是一本应该让你在阅读本书的过程中从零到英雄的书。这本书是KVM所提供的一切的大集合，适用于DevOps和普通系统管理人员，以及开发人员。我们希望通过阅读本书，你能够理解KVM的内部工作原理，以及更高级的概念和中间的一切。无论你是刚刚开始接触KVM虚拟化，还是已经很熟悉，你都应该在本书的页面上找到一些有价值的信息。
- en: Who this book is for
  id: totrans-2
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 这本书适合谁
- en: This book is for Linux beginners and professionals alike, as it doesn't necessarily
    require an advanced knowledge of Linux beforehand. We'll get you there as you
    go through the book – it's an integral part of the learning process. If you're
    interested in KVM, OpenStack, the ELK Stack, Eucalyptus, or AWS – we've got you
    covered.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本书适用于Linux初学者和专业人士，因为它并不一定需要事先对Linux有高级知识。随着你阅读本书，我们会带你走向成功——这是学习过程的一个组成部分。如果你对KVM、OpenStack、ELK
    Stack、Eucalyptus或AWS感兴趣，我们都有涵盖。
- en: What this book covers
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书涵盖的内容
- en: '[*Chapter 1*](B14834_01_Final_ASB_ePub.xhtml#_idTextAnchor016), *Understanding
    Linux Virtualization*, discusses different types of virtualization, hypervisor
    types, and Linux virtualization concepts (Xen and KVM). In this chapter, we try
    to explain some basics of Linux virtualization and how it fits into the cloud
    environment from a high-level perspective.'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第1章*](B14834_01_Final_ASB_ePub.xhtml#_idTextAnchor016)，*理解Linux虚拟化*，讨论了不同类型的虚拟化、Hypervisor类型和Linux虚拟化概念（Xen和KVM）。在本章中，我们试图从高层次的角度解释Linux虚拟化的一些基础知识以及它如何适应云环境。'
- en: '[*Chapter 2*](B14834_02_Final_ASB_ePub.xhtml#_idTextAnchor029), *KVM as a Virtualization
    Solution*, starts with a discussion of virtualization concepts and the need to
    virtualize our environments, explains the basic hardware and software aspects
    of virtualization, and the various approaches to virtualization. In this chapter,
    we start discussing KVM and libvirt, concepts that we''ll use throughout this
    book.'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第2章*](B14834_02_Final_ASB_ePub.xhtml#_idTextAnchor029)，*KVM作为虚拟化解决方案*，从讨论虚拟化概念和虚拟化环境的需求开始，解释了虚拟化的基本硬件和软件方面，以及虚拟化的各种方法。在本章中，我们开始讨论KVM和libvirt，这些概念将贯穿本书始终。'
- en: '[*Chapter 3*](B14834_03_Final_ASB_ePub.xhtml#_idTextAnchor049), *Installing
    KVM Hypervisor, libvirt, and oVirt*, expands on [*Chapter 2*](B14834_02_Final_ASB_ePub.xhtml#_idTextAnchor029)
    by introducing some new concepts including oVirt, a GUI that can be used to manage
    our virtualized Linux infrastructure. We take you through the process of checking
    whether the hardware used is compatible with KVM, introduce some basic commands
    for virtual machine deployment, and then move on to explain how we''d use oVirt
    in the same scenario.'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第3章*](B14834_03_Final_ASB_ePub.xhtml#_idTextAnchor049)，*安装KVM Hypervisor、libvirt和oVirt*，扩展了[*第2章*](B14834_02_Final_ASB_ePub.xhtml#_idTextAnchor029)，引入了一些新概念，包括oVirt，这是一个可以用来管理我们虚拟化Linux基础设施的GUI。我们将带你了解硬件是否兼容KVM的过程，介绍一些虚拟机部署的基本命令，然后解释在相同场景中如何使用oVirt。'
- en: '[*Chapter 4*](B14834_04_Final_ASB_ePub.xhtml#_idTextAnchor062), *Libvirt Networking*,
    explains how libvirt interacts with various networking concepts – virtual switches
    in different modes, how to use CLI tools to manage libvirt networking, TAP and
    TUN devices, Linux bridging, and Open vSwitch. After that, we discuss more extreme
    examples of networking by using SR-IOV, a concept that should get us the lowest
    latency and highest throughput and is used in cases where every single millisecond
    counts.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第4章*](B14834_04_Final_ASB_ePub.xhtml#_idTextAnchor062)，*Libvirt网络*，解释了libvirt如何与各种网络概念交互——不同模式下的虚拟交换机、如何使用CLI工具管理libvirt网络、TAP和TUN设备、Linux桥接和Open
    vSwitch。之后，我们通过使用SR-IOV讨论了更极端的网络示例，这是一个应该让我们获得最低延迟和最高吞吐量的概念，在每一毫秒都很重要的情况下使用。'
- en: '[*Chapter 5*](B14834_05_Final_ASB_ePub.xhtml#_idTextAnchor079), *Libvirt Storage*,
    is a big one, as storage concepts are extremely important when building virtualized
    and cloud environments. We discuss every type of storage that KVM supports – local
    storage pools, NFS, iSCSI, SAN, Ceph, Gluster, multipathing and redundancy, virtual
    disk types, and so on. We also offer you a glimpse into the future of storage
    – with NVMe and NVMeoF being some of the technologies discussed.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第5章*](B14834_05_Final_ASB_ePub.xhtml#_idTextAnchor079)，*Libvirt存储*，是一个重要章节，因为存储概念在构建虚拟化和云环境时非常重要。我们讨论了KVM支持的每种存储类型——本地存储池、NFS、iSCSI、SAN、Ceph、Gluster、多路径和冗余、虚拟磁盘类型等等。我们还为你展示了存储的未来——包括NVMe和NVMeoF等技术。'
- en: '[*Chapter 6*](B14834_06_Final_ASB_ePub.xhtml#_idTextAnchor108), *Virtual Display
    Devices and Protocols*, talks about various virtual machine display types, remote
    protocols including VNC and Spice, as well as NoVNC, which ensures display portability
    as we can use a virtual machine console inside a web browser by using NoVNC.'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第6章*](B14834_06_Final_ASB_ePub.xhtml#_idTextAnchor108)，*虚拟显示设备和协议*，讨论了各种虚拟机显示类型、远程协议，包括VNC和Spice，以及NoVNC，它确保了显示的可移植性，因为我们可以在Web浏览器中使用NoVNC来使用虚拟机控制台。'
- en: '[*Chapter 7*](B14834_07_Final_ASB_ePub.xhtml#_idTextAnchor125), *Virtual Machines:
    Installation, Configuration, and Life Cycle Management*, introduces additional
    ways of deploying and configuring KVM virtual machines, as well as migration processes,
    which are very important for any kind of production environment.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第7章*](B14834_07_Final_ASB_ePub.xhtml#_idTextAnchor125)，*虚拟机：安装、配置和生命周期管理*，介绍了部署和配置KVM虚拟机的其他方法，以及迁移过程，这对任何类型的生产环境都非常重要。'
- en: '[*Chapter 8*](B14834_08_Final_ASB_ePub.xhtml#_idTextAnchor143), *Creating and
    Modifying VM Disks, Templates, and Snapshots*, discusses various virtual machine
    image types, virtual machine templating processes, the use of snapshots, and some
    of the use cases and best practices while using snapshots. It also serves as an
    introduction to the next chapter, where we will be using templating and virtual
    machine disks in a much more streamlined fashion to customize virtual machines
    post-boot by using `cloud-init` and `cloudbase-init`.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 第8章《创建和修改VM磁盘、模板和快照》，讨论了各种虚拟机镜像类型、虚拟机模板化过程、快照的使用以及在使用快照时的一些用例和最佳实践。它还作为下一章的介绍，在下一章中，我们将以更加流畅的方式使用模板化和虚拟机磁盘来定制虚拟机引导后使用`cloud-init`和`cloudbase-init`。
- en: '[*Chapter 9*](B14834_09_Final_ASB_ePub.xhtml#_idTextAnchor165), *Customize
    a Virtual Machine with cloud-init*, discusses one of the most fundamental concepts
    in cloud environments – how to customize a virtual machine image/template post-boot.
    Cloud-init is used in almost all of the cloud environments to do post-boot Linux
    virtual machine configuration, and we explain how it works and how to make it
    work in your environment.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 第9章《使用cloud-init自定义虚拟机》，讨论了云环境中最基本的概念之一-如何在虚拟机镜像/模板引导后进行定制。Cloud-init在几乎所有的云环境中用于进行引导后的Linux虚拟机配置，我们解释了它的工作原理以及如何在您的环境中使其工作。
- en: '[*Chapter 10*](B14834_10_Final_ASB_ePub.xhtml#_idTextAnchor182), *Automated
    Windows Guest Deployment and Customization*, is a continuation of [*Chapter 9*](B14834_09_Final_ASB_ePub.xhtml#_idTextAnchor165),
    with a razor-sharp focus on Microsoft Windows virtual machine templatization and
    post-boot customization. For that, we use cloudbase-init, a concept that''s basically
    the same as cloud-init, but which is suited for Microsoft-based operating systems
    only.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 第10章《自动化Windows客户端部署和定制化》，是第9章的延续，重点关注Microsoft Windows虚拟机模板化和引导后定制化。为此，我们使用了cloudbase-init，这个概念基本上与cloud-init相同，但仅适用于基于Microsoft的操作系统。
- en: '[*Chapter 11*](B14834_11_Final_ASB_ePub.xhtml#_idTextAnchor191), *Ansible and
    Scripting for Orchestration and Automation*, takes us on the first part of the
    Ansible journey – deploying AWX and Ansible, and describes how to use these concepts
    in our KVM-based environments. This is just one of the Ansible usage models that
    is employed in modern-day IT, as the whole DevOps and infrastructure-as-a-code
    story gets much more exposure in IT infrastructure all over the world.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 第11章《Ansible和编排自动化脚本》，带领我们踏上Ansible之旅的第一部分-部署AWX和Ansible，并描述如何在基于KVM的环境中使用这些概念。这只是现代IT中使用的Ansible使用模型之一，因为整个DevOps和基础设施即代码的故事在全球范围内得到了更多的关注。
- en: '[*Chapter 12*](B14834_12_Final_ASB_ePub.xhtml#_idTextAnchor209), *Scaling Out
    KVM with OpenStack*, discusses the process of building cloud environments based
    on KVM. OpenStack is the standard approach to delivering just that when using
    KVM. In this chapter, we talk about all of the OpenStack building blocks and services,
    how to deploy it from scratch, and describe how to use it in production environments.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 第12章《使用OpenStack扩展KVM》，讨论了基于KVM构建云环境的过程。当使用KVM时，OpenStack是交付这一点的标准方法。在本章中，我们讨论了所有OpenStack构建块和服务，如何从头开始部署它，并描述了如何在生产环境中使用它。
- en: '[*Chapter 13*](B14834_13_Final_ASB_ePub.xhtml#_idTextAnchor238), *Scaling Out
    KVM with AWS*, takes us on a journey toward using public and hybrid cloud concepts
    by using **Amazon Web Services** (**AWS**). Like almost all the other chapters,
    this is a heavily hands-on chapter that you can also use to get your feet wet
    in terms of getting to know AWS as a concept, which will be key to deploying a
    hybrid-cloud infrastructure using Eucalyptus at the end of the chapter.'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 第13章《使用AWS扩展KVM》，带领我们走向使用公共和混合云概念的旅程，使用Amazon Web Services（AWS）。与几乎所有其他章节一样，这是一个非常实践性的章节，您也可以用它来对AWS有所了解，这对于在本章末使用Eucalyptus部署混合云基础设施至关重要。
- en: '[*Chapter 14*](B14834_14_Final_ASB_ePub.xhtml#_idTextAnchor259), *Monitoring
    the KVM Virtualization Platform*, introduces a very popular concept of monitoring
    via the **Elasticsearch, Logstash, Kibana** (**ELK**) stack. It also takes you
    through the whole process of setting up and integrating the ELK stack with your
    KVM infrastructure, all the way through to the end result – using dashboards and
    UIs to monitor your KVM-based environment.'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 第14章《监控KVM虚拟化平台》，介绍了通过Elasticsearch、Logstash、Kibana（ELK）堆栈进行监控的非常流行的概念。它还带领您完成了设置和集成ELK堆栈与您的KVM基础设施的整个过程，一直到最终结果-使用仪表板和UI来监视您的基于KVM的环境。
- en: '[*Chapter 15*](B14834_15_Final_ASB_ePub.xhtml#_idTextAnchor276), *Performance
    Tuning and Optimization for KVM VMs*, talks about various approaches to tuning
    and optimization in KVM-based environments by deconstructing all of the infrastructure
    design principles and putting them to (correct) use. We cover a number of advanced
    topics here – NUMA, KSM, CPU and memory performance, CPU pinning, the tuning of
    VirtIO, and block and network devices.'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 第15章《KVM虚拟机性能调优和优化》，讨论了在基于KVM的环境中调优和优化的各种方法，通过解构所有基础设施设计原则并将其正确使用。我们在这里涵盖了许多高级主题-
    NUMA、KSM、CPU和内存性能、CPU绑定、VirtIO的调优以及块和网络设备。
- en: '[*Chapter 16*](B14834_16_Final_ASB_ePub.xhtml#_idTextAnchor302), *Troubleshooting
    Guidelines for the KVM Platform*, starts with the basics – troubleshooting KVM
    services and logging, and explains various troubleshooting methodologies for KVM
    and oVirt, Ansible and OpenStack, Eucalyptus, and AWS. These are the real-life
    problems that we''ve also encountered in our production environments while writing
    this book. In this chapter, we basically discuss problems related to every single
    chapter of this book, including problems associated with snapshots and templating.'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第16章*](B14834_16_Final_ASB_ePub.xhtml#_idTextAnchor302)，*KVM平台故障排除指南*，从基础知识开始-故障排除KVM服务和日志记录，并解释了KVM和oVirt、Ansible和OpenStack、Eucalyptus和AWS的各种故障排除方法。这些都是我们在撰写本书时在生产环境中遇到的真实问题。在本章中，我们基本上讨论了与本书的每一章相关的问题，包括与快照和模板相关的问题。'
- en: To get the most out of this book
  id: totrans-21
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 充分利用本书
- en: We're assuming at least a basic knowledge of Linux and prior experience with
    installing virtual machines as prerequisites for this book.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 我们假设您至少具有基本的Linux知识和安装虚拟机的先验经验作为本书的先决条件。
- en: '![](img/B14834_Preface_table.jpg)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B14834_Preface_table.jpg)'
- en: Code in Action
  id: totrans-24
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 实际代码演示
- en: Code in Action videos for this book can be viewed at [https://bit.ly/32IHMdO](https://bit.ly/32IHMdO).
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 本书的实际代码演示视频可在[https://bit.ly/32IHMdO](https://bit.ly/32IHMdO)上观看。
- en: Download the color images
  id: totrans-26
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载彩色图像
- en: 'We also provide a PDF file that has color images of the screenshots/diagrams
    used in this book. You can download it here: [http://www.packtpub.com/sites/default/files/downloads/9781838828714_ColorImages.pdf](http://www.packtpub.com/sites/default/files/downloads/9781838828714_ColorImages.pdf)'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还提供了一个PDF文件，其中包含本书中使用的屏幕截图/图表的彩色图像。您可以在这里下载：[http://www.packtpub.com/sites/default/files/downloads/9781838828714_ColorImages.pdf](http://www.packtpub.com/sites/default/files/downloads/9781838828714_ColorImages.pdf)
- en: Conventions used
  id: totrans-28
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用的约定
- en: There are a number of text conventions used throughout this book.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中使用了许多文本约定。
- en: '`Code in text`: Indicates code words in text, database table names, folder
    names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter
    handles. Here is an example: "What we need to do is just uncomment the one pipeline
    that is defined in the configuration file, located in the `/etc/logstash` folder."'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: '`文本中的代码`：表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟URL、用户输入和Twitter句柄。这是一个例子：“我们需要做的就是取消注释配置文件中定义的一个管道，该文件位于`/etc/logstash`文件夹中。”'
- en: 'A block of code is set as follows:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 代码块设置如下：
- en: '[PRE0]'
  id: totrans-32
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'When we wish to draw your attention to a particular part of a code block, the
    relevant lines or items are set in bold:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们希望引起您对代码块的特定部分的注意时，相关行或项目将以粗体显示：
- en: '[PRE1]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '**Bold**: Indicates a new term, an important word, or words that you see on
    screen. For example, words in menus or dialog boxes appear in the text like this.
    Here is an example: "After you push the **Refresh** button, new data should appear
    on the page."'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: '**粗体**：表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词会在文本中以这种方式出现。这是一个例子：“在您点击**刷新**按钮之后，新数据应该出现在页面上。”'
- en: Tips or important notes
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 提示或重要说明
- en: Appear like this.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 出现在这样。
- en: Get in touch
  id: totrans-38
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 联系我们
- en: Feedback from our readers is always welcome.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 我们始终欢迎读者的反馈。
- en: '**General feedback**: If you have questions about any aspect of this book,
    mention the book title in the subject of your message and email us at [customercare@packtpub.com](mailto:customercare@packtpub.com).'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: '**一般反馈**：如果您对本书的任何方面有疑问，请在邮件主题中提及书名，并发送电子邮件至[customercare@packtpub.com](mailto:customercare@packtpub.com)与我们联系。'
- en: '**Errata**: Although we have taken every care to ensure the accuracy of our
    content, mistakes do happen. If you have found a mistake in this book, we would
    be grateful if you would report this to us. Please visit [www.packtpub.com/support/errata](http://www.packtpub.com/support/errata),
    selecting your book, clicking on the Errata Submission Form link, and entering
    the details.'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: '**勘误**：尽管我们已经尽最大努力确保内容的准确性，但错误确实会发生。如果您在本书中发现错误，我们将不胜感激。请访问[www.packtpub.com/support/errata](http://www.packtpub.com/support/errata)，选择您的书籍，点击勘误提交表单链接，并输入详细信息。'
- en: '**Piracy**: If you come across any illegal copies of our works in any form
    on the internet, we would be grateful if you would provide us with the location
    address or website name. Please contact us at [copyright@packt.com](mailto:copyright@packt.com)
    with a link to the material.'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '**盗版**：如果您在互联网上发现我们作品的任何非法副本，请向我们提供位置地址或网站名称，我们将不胜感激。请通过[copyright@packt.com](mailto:copyright@packt.com)与我们联系，并提供材料链接。'
- en: '**If you are interested in becoming an author**: If there is a topic that you
    have expertise in, and you are interested in either writing or contributing to
    a book, please visit [authors.packtpub.com](http://authors.packtpub.com).'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: '**如果您有兴趣成为作者**：如果您在某个专题上有专业知识，并且有兴趣撰写或为一本书做出贡献，请访问[authors.packtpub.com](http://authors.packtpub.com)。'
- en: Reviews
  id: totrans-44
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 评论
- en: Please leave a review. Once you have read and used this book, why not leave
    a review on the site that you purchased it from? Potential readers can then see
    and use your unbiased opinion to make purchase decisions, we at Packt can understand
    what you think about our products, and our authors can see your feedback on their
    book. Thank you!
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 请留下评论。阅读并使用本书后，为什么不在购买书籍的网站上留下评论呢？潜在读者可以看到并使用您的客观意见来做出购买决定，我们在Packt可以了解您对我们产品的看法，我们的作者也可以看到您对他们书籍的反馈。谢谢！
- en: For more information about Packt, please visit [packt.com](http://packt.com).
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 有关Packt的更多信息，请访问[packt.com](http://packt.com)。
