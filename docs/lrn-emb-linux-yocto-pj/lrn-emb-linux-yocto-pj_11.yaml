- en: Chapter 11. Security
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第11章 安全
- en: In this chapter, you will be presented with various security enhancements tools.
    Our first stop is the Linux kernel and here, there are two tools, SELinux and
    grsecurity, both of which are really interesting as well as necessary. Next, the
    Yocto Project's security-specific layers will also be explained. These include
    the meta-security and meta-selinux that contain an impressive number of tools
    and can be used to secure or audit various components of the Linux system. Since
    this subject is vast, I will also let you inspect various other solutions, both
    implemented in the Linux kernel but also externally. I hope you enjoy this chapter
    and that you find this information interesting and useful.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您将了解各种安全增强工具。我们首先来到Linux内核，在这里，有两个工具，SELinux和grsecurity，这两个工具都非常有趣，也非常必要。接下来，将解释Yocto项目的安全特定层。这包括包含大量工具的meta-security和meta-selinux，可用于保护或审计Linux系统的各个组件。由于这个主题很广泛，我还会让您检查各种其他解决方案，既在Linux内核中实施，也在外部实施。希望您喜欢本章，并且觉得这些信息有趣且有用。
- en: In any operating system, security is a really important concern both for the
    users and developers. It did not pass much time and developers have started to
    address these security problems in various methods. This resulted in a number
    of security methodologies and improvements for available operating systems. In
    this chapter, a number of security enhancement tools will be introduced along
    with some policies and verification routines that are defined to ensure that various
    components, such as the Linux kernel or the Yocto Project, are secure enough to
    be used. We will also take a look at how various threats or problems are handled
    as they appear during the course of this chapter.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在任何操作系统中，安全性对用户和开发人员都是一个非常重要的关注点。开发人员已经开始以各种方法解决这些安全问题。这导致了许多可用操作系统的安全方法和改进。在本章中，将介绍一些安全增强工具，以及一些旨在确保各种组件（如Linux内核或Yocto项目）足够安全以供使用的策略和验证例程。我们还将看看在本章进行过程中如何处理各种威胁或问题。
- en: SELinux and grsecurity are two noticeable security improvements made to the
    Linux kernel that try to enforce Linux. SELinux is a **Mandatory Access Control**
    (**MAC**) mechanism that provides identity and role-based access control as well
    as domain-type enforcement. The second option, grsecurity, is more similar to
    ACLs and is, in fact, more suitable for web servers and other systems that support
    remote connections. With regard to how security is implemented for Linux and how
    the Yocto Project handles this domain, these aspects will be presented in the
    next section. One thing I must admit is that security handling inside the Yocto
    Project is still a young project at the time of writing this chapter, but I am
    waiting with enthusiasm to see how the number of iterations will increase over
    time.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: SELinux和grsecurity是对Linux内核进行的两项显著的安全改进，试图强制执行Linux。SELinux是一种强制访问控制（MAC）机制，提供基于身份和角色的访问控制，以及域类型强制。第二个选择grsecurity更类似于ACL，并且实际上更适合支持远程连接的Web服务器和其他系统。关于Linux的安全实现以及Yocto项目如何处理这个领域，这些方面将在下一节中介绍。我必须承认的一件事是，在撰写本章时，Yocto项目内部的安全处理仍然是一个年轻的项目，但我怀着热情期待看到迭代次数随着时间的推移而增加。
- en: Security in Linux
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Linux中的安全
- en: At the core of every Linux system is the Linux kernel. Any malicious code that
    is able to damage or take control of a system also has repercussions that affect
    the Linux kernel. So, it only makes clear to users that having a secure kernel
    is also an important part of the equation. Fortunately, the Linux kernel is secure
    and has a number of security features and programs. The man behind all this is
    James Morris, the maintainer of the Linux kernel security subsystem. There is
    even a separate Linux repository for this that can be accessed at [http://git.kernel.org/?p=linux/kernel/git/jmorris/linux-security.git;a=summary](http://git.kernel.org/?p=linux/kernel/git/jmorris/linux-security.git;a=summary).
    Also, by inspecting [http://kernsec.org/wiki/index.php/Main_Page](http://kernsec.org/wiki/index.php/Main_Page),
    which is the main page of the Linux kernel security subsystem, you can see the
    exact projects that are managed inside this subsystem and maybe lend a hand to
    them if you're interested.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 在每个Linux系统的核心是Linux内核。任何能够损害或控制系统的恶意代码也会对影响Linux内核产生影响。因此，用户清楚地知道，拥有一个安全的内核也是方程式的重要部分。幸运的是，Linux内核是安全的，并且具有许多安全功能和程序。所有这些背后的人是James
    Morris，Linux内核安全子系统的维护者。甚至还有一个专门的Linux存储库，可以在[http://git.kernel.org/?p=linux/kernel/git/jmorris/linux-security.git;a=summary](http://git.kernel.org/?p=linux/kernel/git/jmorris/linux-security.git;a=summary)上访问。此外，通过检查[http://kernsec.org/wiki/index.php/Main_Page](http://kernsec.org/wiki/index.php/Main_Page)，即Linux内核安全子系统的主页，您可以看到在该子系统内部管理的确切项目，并且如果感兴趣，也许可以帮助他们。
- en: There is also a workgroup that provides security enhancements and verifications
    to the Linux kernel to make sure that it is secure and also to maintain a certain
    level of trust in the security of the Linux ecosystem. Their activities include,
    but of course, are not limited to verification and testing of critical subsystems
    for various vulnerabilities or the development of tools to assist in the security
    Linux kernel. The workgroup also consists of guidance and maintenance of security
    subsystems or security improvements added to various projects or build tools.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 还有一个工作组，为Linux内核提供安全增强和验证，以确保其安全性，并在Linux生态系统的安全性方面保持一定水平的信任。他们的活动包括但不限于对各种漏洞进行验证和测试，或开发辅助安全Linux内核的工具。该工作组还包括对安全子系统的指导和维护，或者对各种项目或构建工具添加的安全改进。
- en: All the other Linux software components have their own security teams. Of course,
    there are some that do not have these teams well defined, or have some internal
    rules related to this subject, but they are still aware of security threats that
    occur around their components and try to repair these vulnerabilities. The Yocto
    Project tries to help with these problems and in some ways unifies these software
    components. I hope that some improvements are made over the years in this area.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 所有其他Linux软件组件都有自己的安全团队。当然，有些软件组件没有明确定义这些团队，或者有一些与此主题相关的内部规则，但它们仍然意识到围绕其组件发生的安全威胁，并尝试修复这些漏洞。Yocto项目试图帮助解决这些问题，并在某些方面统一这些软件组件。我希望在这个领域的一些改进会在未来几年内实现。
- en: SELinux
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: SELinux
- en: SELinux is a security enhancement for the Linux kernel, and is developed by
    the National Security Agency's office of Information Assurance. It has a policy-based
    architecture and is one of the Linux security modules that is built on the interface
    of **Linux Security Modules** (**LSM**) that aims at military-level security.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: SELinux是Linux内核的安全增强功能，由国家安全局信息保障办公室开发。它具有基于策略的架构，是建立在**Linux安全模块**（**LSM**）接口上的Linux安全模块之一，旨在实现军事级别的安全性。
- en: 'Currently, it is shipped with a large number of distributions, including the
    most well known and often used ones, such as Debian, SuSe, Fedora, Red Hat, and
    Gentoo. It is based on MAC on which administrators can control all interactions
    with the user space components of a system. It uses the concept of least privileges:
    here, by default, a user and application have no rights to access the system resources
    since all of them are granted by an administrator entity. This makes up the part
    of the system security policies and its emphasis is shown in the following figure:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，它已经随着大量的发行版一起发布，包括最知名和经常使用的发行版，如Debian、SuSe、Fedora、Red Hat和Gentoo。它基于MAC，管理员可以控制系统用户空间组件的所有交互。它使用最小权限的概念：在这里，默认情况下，用户和应用程序没有权限访问系统资源，因为所有这些权限都是由管理员实体授予的。这构成了系统安全策略的一部分，其重点显示在以下图中：
- en: '![SELinux](img/image00369.jpeg)'
  id: totrans-11
  prefs: []
  type: TYPE_IMG
  zh: '![SELinux](img/image00369.jpeg)'
- en: The basic functionalities inside SELinux are sandboxed with the help of the
    implementation of MAC. Inside the sandbox, each application is allowed to perform
    only the task it was designed to execute as defined in the security policies.
    Of course, standard Linux permissions are still available for the system and they
    will be consulted before the policies when access attempts are required. If no
    permissions are available, SELinux will not be able to influence the system in
    any way. However, if the permission rights allow access, then the SELinux policies
    should be consulted to offer the final verdict on whether access is permitted
    or denied.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: SELinux内部的基本功能通过MAC的实现进行了隔离。在沙盒中，每个应用程序只允许执行其设计为在安全策略中定义的任务。当需要访问时，当然，标准的Linux权限仍然适用于系统，并且在策略之前将进行咨询。如果没有权限可用，SELinux将无法以任何方式影响系统。但是，如果权限允许访问，则应咨询SELinux策略以提供最终的许可或拒绝访问的裁决。
- en: In the context of SELinux, access decisions are made based on the security context
    of the subject. This may very well be a process associated with a specific user
    context that is compared with the actual attempted action (such as a file read
    action), and the security context of the available object, which can be a file.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在SELinux的上下文中，访问决策是基于主体的安全上下文进行的。这可能是与特定用户上下文相关联的进程，该进程与实际尝试的操作（例如文件读取操作）进行比较，以及可用对象的安全上下文，该对象可以是文件。
- en: 'Before moving on, we will see how the SELinux support can be enabled on a Ubuntu
    machine. I will first present some basic concepts related to SELinux:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 在继续之前，我们将看看如何在Ubuntu机器上启用SELinux支持。我将首先介绍一些与SELinux相关的基本概念：
- en: '**Users**: In the SELinux context, the user is not the same as the one available
    in the UNIX context. The major difference between them is that, in the SELinux
    context, the user does not change during a user session and there is a possibility
    for more UNIX users to operate in the same SELinux user context. However, there
    is also a possibility of operating in a 1:1 user mapping, such as the Linux root
    user and the SELinux root user. Generally, the SELinux users have the `_u` suffix
    added to their naming.'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用户**：在SELinux上下文中，用户与UNIX上下文中的用户不同。它们之间的主要区别在于，在SELinux上下文中，用户在用户会话期间不会改变，并且有可能有更多的UNIX用户在相同的SELinux用户上下文中操作。然而，也有可能进行1:1用户映射的操作，例如Linux根用户和SELinux根用户。通常，SELinux用户的命名中会添加`_u`后缀。'
- en: '**Roles**: A SELinux user can have one or multiple roles. The meaning of a
    role is defined in the policies. An object usually has the `object_r` role and
    the role is generally suffixed with the `_r` string.'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**角色**：SELinux用户可以拥有一个或多个角色。角色的含义在策略中定义。对象通常具有`object_r`角色，角色通常以`_r`字符串结尾。'
- en: '**Types**: It''s the primary method applied to take authorization decisions.
    It can also be referred to as a domain and is generally suffixed with `_t`.'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**类型**：这是应用授权决策的主要方法。它也可以被称为域，通常以`_t`结尾。'
- en: '**Contexts**: Each process and object has its context. It is, in fact, an attribute
    that determines whether access should be allowed between an object and process.
    A SELinux context is expressed as three required fields and as an optional one
    as well, such as `user:role:type:range`. The first three fields represent the
    SELinux user, role, and the type. The last one represents the range of MLS and
    it will be presented shortly. More information about MLS can be gathered at [http://web.mit.edu/rhel-doc/5/RHEL-5-manual/Deployment_Guide-en-US/sec-mls-ov.html](http://web.mit.edu/rhel-doc/5/RHEL-5-manual/Deployment_Guide-en-US/sec-mls-ov.html).'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**上下文**：每个进程和对象都有自己的上下文。实际上，它是一个属性，确定是否应该允许对象和进程之间的访问。SELinux上下文表示为三个必需字段和一个可选字段，例如`user:role:type:range`。前三个字段代表SELinux用户、角色和类型。最后一个代表MLS的范围，稍后将介绍。有关MLS的更多信息，请参阅[http://web.mit.edu/rhel-doc/5/RHEL-5-manual/Deployment_Guide-en-US/sec-mls-ov.html](http://web.mit.edu/rhel-doc/5/RHEL-5-manual/Deployment_Guide-en-US/sec-mls-ov.html)。'
- en: '**Object Classes**: An SELinux object class represents the category of objects
    available. Categories, such as `dir` for directories and `file` for files, also
    have a set of permissions associated with them.'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**对象类**：一个SELinux对象类表示可用对象的类别。类别，如`dir`表示目录，`file`表示文件，还有一组与它们相关的权限。'
- en: '**Rules**: These are the security mechanisms of SELinux. They are used as a
    type of enforcement and are specified using the type of the object and process.
    The rules usually state if a type is allowed to perform various actions.'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**规则**：这些是SELinux的安全机制。它们被用作一种强制执行，并且是使用对象和进程的类型来指定的。规则通常说明了一个类型是否被允许执行各种操作。'
- en: 'As mentioned already, the SELinux is so well known and appreciated that it
    was included in most of the available Linux distributions. Its success is also
    demonstrated through the fact that a huge number of books were written on this
    subject. For more information regarding it, refer to [http://www.amazon.com/s/ref=nb_ss_gw/102-2417346-0244921?url=search-alias%3Daps&field-keywords=SELinux&Go.x=12&Go.y=8&Go=Go](http://www.amazon.com/s/ref=nb_ss_gw/102-2417346-0244921?url=search-alias%3Daps&field-keywords=SELinux&Go.x=12&Go.y=8&Go=Go).
    Having said this, let''s take a look at the steps required to install SELinux
    on a Ubuntu host machine. The first step refers to the SELinux package installation:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，SELinux非常出名和受人赞赏，以至于它被包含在大多数可用的Linux发行版中。它的成功也通过大量关于这个主题的书籍得到了证明。有关更多信息，请参阅[http://www.amazon.com/s/ref=nb_ss_gw/102-2417346-0244921?url=search-alias%3Daps&field-keywords=SELinux&Go.x=12&Go.y=8&Go=Go](http://www.amazon.com/s/ref=nb_ss_gw/102-2417346-0244921?url=search-alias%3Daps&field-keywords=SELinux&Go.x=12&Go.y=8&Go=Go)。说到这一点，让我们来看看在Ubuntu主机上安装SELinux所需的步骤。第一步是安装SELinux软件包：
- en: '[PRE0]'
  id: totrans-22
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'With the package installed, the SELinux mode needs to be changed from disabled
    (the mode in which the SELinux policy is not enforced or logged) to one of the
    other two available options:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 安装软件包后，需要将SELinux模式从禁用（不执行或记录SELinux策略的模式）更改为其他两个可用选项之一：
- en: '`Enforcing`: This is most useful in a production system:'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`强制执行`：这在生产系统中最有用：'
- en: '[PRE1]'
  id: totrans-25
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '`Permissive`: In this mode, policies are not enforced. However, any denials
    are logged and it is mostly used in debugging activities and when new policies
    are developed:'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`宽容`：在此模式下，策略不会被执行。但是，任何拒绝都会被记录下来，主要用于调试活动和开发新策略时：'
- en: '[PRE2]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: With the configuration implemented, the system needs to reboot, to make sure
    that the system files are labeled accordingly.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 配置实施后，系统需要重新启动，以确保系统文件被正确标记。
- en: More information about SELinux is also available in the Yocto Project. There
    is an entire layer dedicated to SELinux support. Also, for more information regarding
    this tool, you are encouraged to read one of the books dedicated to this matter.
    If you dislike this method, then there are alternative manuals with information
    related to SELinux, available inside various distributions, such as Fedora ([https://docs.fedoraproject.org/en-US/Fedora/19/html/Security_Guide/ch09.html](https://docs.fedoraproject.org/en-US/Fedora/19/html/Security_Guide/ch09.html)),
    Red Hat ([https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/4/html/SELinux_Guide/index.html](https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/4/html/SELinux_Guide/index.html)),
    and so on.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 有关SELinux的更多信息也可以在Yocto项目中找到。有一个专门的层专门支持SELinux。此外，有关此工具的更多信息，建议阅读专门讨论此问题的书籍之一。如果您不喜欢这种方法，那么还有其他手册提供与SELinux相关的信息，可在各种发行版中找到，如Fedora
    ([https://docs.fedoraproject.org/en-US/Fedora/19/html/Security_Guide/ch09.html](https://docs.fedoraproject.org/en-US/Fedora/19/html/Security_Guide/ch09.html))，Red
    Hat ([https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/4/html/SELinux_Guide/index.html](https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/4/html/SELinux_Guide/index.html))等。
- en: Grsecurity
  id: totrans-30
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Grsecurity
- en: 'Grsecurity is a suite of patches released under the GNU General Public License,
    available for the Linux kernel and will help with the security enhancements for
    Linux. This suite of patches offers four main benefits:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: Grsecurity是一个补丁套件，根据GNU通用公共许可证发布，适用于Linux内核，并将有助于增强Linux的安全性。这个补丁套件提供了四个主要的好处：
- en: Configuration-free operations
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 无需配置的操作
- en: Protection against a large variety of address space change bugs
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 保护免受各种地址空间更改错误的影响
- en: It includes an access control list system and a number of auditing systems that
    are quite comprehensive to meet all sorts of demands
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它包括一个访问控制列表系统和一些相当全面的审计系统，以满足各种需求
- en: It is able to interact with multiple operating systems and processor architectures
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它能够与多个操作系统和处理器架构进行交互
- en: The grsecurity software is free and its development began in 2001, by first
    porting a number of security enhancing patches from the Openwall Project. It was
    first released for the 2.4.1 Linux kernel version and since then, development
    has continued. Over time, it included a PaX bundle of patches that offered the
    possibility of protecting memory pages. This is done by using a least-privilege
    approach, which implies that for the execution of a program, no more than the
    necessary actions should be taken with the help of extra or fewer steps.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: grsecurity软件是免费的，其开发始于2001年，首先从Openwall项目移植了一些增强安全性的补丁。它首次发布于2.4.1 Linux内核版本，自那时以来，开发一直在进行。随着时间的推移，它包括了一个PaX捆绑补丁，提供了保护内存页面的可能性。这是通过使用最小特权方法来完成的，这意味着在执行程序时，应该采取的操作不应超过必要的行动，借助额外或更少的步骤。
- en: Note
  id: totrans-37
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: If you're in interested in finding more about PaX, you can access [http://en.wikipedia.org/wiki/PaX](http://en.wikipedia.org/wiki/PaX)
    and [https://pax.grsecurity.net/](https://pax.grsecurity.net/).
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您对了解更多有关PaX的信息感兴趣，可以访问[http://en.wikipedia.org/wiki/PaX](http://en.wikipedia.org/wiki/PaX)和[https://pax.grsecurity.net/](https://pax.grsecurity.net/)。
- en: Grsecurity has a number of features that are suitable mostly for web servers
    or servers that accept shell access from untrusted users. One of the major feature
    is the **Role-based Access Control** (**RBAC**), which is the alternative to the
    already available UNIX **Discretionary Access Control** (**DAC**), or even the
    latter, mandatory access control (MAC) that is offered by Smack or SELinux. The
    aim of RBAC is to offer a least privilege system in which the processes and users
    only have the minimum required privileges needed for archiving their tasks. One
    other feature that grsecurity has is related to the hardening of the `chroot()`
    system call to make sure that privilege escalation is eliminated. In addition
    to this, there are a number of miscellaneous features, such as auditing and `/proc`
    restrictions.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: Grsecurity具有许多功能，主要适用于Web服务器或接受来自不受信任用户的shell访问的服务器。其中一个主要功能是**基于角色的访问控制**（**RBAC**），它是已有的UNIX
    **自主访问控制**（**DAC**）的替代方案，甚至是由Smack或SELinux提供的强制访问控制（MAC）。RBAC的目标是提供最少特权系统，其中进程和用户只具有完成任务所需的最低特权。grsecurity的另一个功能与加固`chroot()`系统调用有关，以确保消除特权升级。除此之外，还有一些其他功能，如审计和`/proc`限制。
- en: 'I took the liberty of keeping the features of the grsecurity defined in groups,
    as presented on the grsecurity website. They have been presented in the chapter
    because I think that knowing its features will help users and developers make
    the right decision when a security solution is required for their activities.
    A list with all the grsecurity features is mentioned as follows:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 我已经将grsecurity的功能分组保留在章节中，因为我认为了解其功能将有助于用户和开发人员在需要安全解决方案时做出正确的决定。以下是所有grsecurity功能的列表：
- en: 'Memory corruption defences:'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 内存损坏防御：
- en: Automatic response to brute force exploits
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自动响应暴力利用
- en: Hardened BPF JIT against spray attacks
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 针对喷洒攻击的加固BPF JIT
- en: Hardened userland memory permission
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 加固的用户空间内存权限
- en: Random padding between thread stacks
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 线程堆栈之间的随机填充
- en: Preventing direct userland access by a kernel
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 防止内核直接访问用户空间
- en: Industry leading ASLR
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 行业领先的ASLR
- en: Bound checking kernel copies to/from a userland
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 内核边界检查复制到/从用户空间
- en: 'Filesystem Hardening:'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文件系统加固：
- en: Chroot hardening
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Chroot加固
- en: Eliminating side-channel attacks against admin terminals
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 消除针对管理员终端的侧信道攻击
- en: Preventing users from tricking Apache into accessing other user files
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 防止用户欺骗Apache访问其他用户文件
- en: Hiding the processes of other users from unprivileged users
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 隐藏非特权用户的进程
- en: Providing trusted path execution
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提供可信路径执行
- en: 'Miscellaneous protections:'
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他保护：
- en: Preventing process snooping based on ptrace
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 防止基于ptrace的进程窥探
- en: Preventing the dumping of unreadable binaries
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 防止无法读取的二进制文件转储
- en: Preventing attackers from autoloading vulnerable kernel modules
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 防止攻击者自动加载易受攻击的内核模块
- en: Denying access to overly permissive IPC objects
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 拒绝访问过于宽松的IPC对象
- en: Enforcing consistent multithreaded privileges
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 强制一致的多线程特权
- en: 'RBAC:'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: RBAC：
- en: Intuitive design
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 直观的设计
- en: Automatic full system policy learning
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自动完整系统策略学习
- en: Automated policy analysis
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自动策略分析
- en: Human-readable policies and logs
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 人类可读的策略和日志
- en: Stackable with LSM
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与LSM堆叠
- en: Unconventional features
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 非常规功能
- en: 'GCC plugins:'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: GCC插件：
- en: Preventing integer overflows in size arguments
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 防止大小参数中的整数溢出
- en: Preventing the leakage of stack data from previous syscalls
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 防止从先前的系统调用中泄漏堆栈数据
- en: Adding entropy during early boot and runtime
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在早期引导和运行时增加熵
- en: Randomizing kernel structure layout
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 随机化内核结构布局
- en: Making read-only sensitive kernel structures
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使只读敏感内核结构
- en: Ensuring all kernel function pointers point to the kernel
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保所有内核函数指针指向内核
- en: Keeping the features of grsecurity in mind, we can now move towards the installation
    phase of grsecurity and its administrator called `gradm`.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 牢记grsecurity的功能，我们现在可以进入grsecurity的安装阶段和其名为`gradm`的管理员。
- en: 'The first thing that needs to be done is to get the corresponding packages
    and patches. As shown in the following command lines, the kernel version for which
    grsecurity is enabled is `3.14.19`:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 需要做的第一件事是获取相应的软件包和补丁。如下所示，启用grsecurity的内核版本为`3.14.19`：
- en: '[PRE3]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'After the packages are available, their signature needs to be checked. The
    signature check process for the Linux kernel is big and different from other systems,
    as follows:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 软件包可用后，需要检查其签名。Linux内核的签名检查过程很大，与其他系统不同，如下所示：
- en: '[PRE4]'
  id: totrans-79
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'The first time this command is called, the signature is not verified, but the
    ID field is made available for later use. It is used to identify the public key
    from the PGP keyserver:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 第一次调用此命令时，不会验证签名，但ID字段将可供以后使用。它用于从PGP密钥服务器识别公钥：
- en: '[PRE5]'
  id: totrans-81
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'After all the packages are available and properly verified, we can now move
    to the kernel configuration phase. The first step is the patching process, which
    is done with the grsecurity patch, but this requires access to the Linux kernel
    source code first:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 在所有软件包都可用且经过适当验证后，我们现在可以进入内核配置阶段。第一步是修补过程，使用grsecurity补丁完成，但这首先需要访问Linux内核源代码：
- en: '[PRE6]'
  id: totrans-83
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'In the patching process, `include/linux/compiler-gcc5.h` is missing from the
    source code, so this part of the patch requires skipping. However, after this,
    the patching process is finished without problems. With this step completed, the
    configuration phase can continue. There are generic configurations that should
    work without any extra modifications, but for each distribution there would always
    be some specific configuration available. To go through them and make sure that
    each one of them matches with your hardware, the following command can be used:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 在修补过程中，源代码中缺少`include/linux/compiler-gcc5.h`，因此需要跳过此部分。然而，在此之后，修补过程顺利完成。完成此步骤后，配置阶段可以继续。有一些通用配置应该可以在不进行任何额外修改的情况下工作，但对于每个发行版，总会有一些特定的配置可用。可以使用以下命令来查看它们，并确保每个配置与您的硬件匹配：
- en: '[PRE7]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'If you are calling it for the first time, the preceding command has a warning
    message that will prompt you with the following:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您是第一次调用它，前面的命令会有一个警告消息，提示您如下：
- en: '[PRE8]'
  id: totrans-87
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'It can be solved by installing the `libncurses5-dev` package, using the following
    command:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 可以通过安装`libncurses5-dev`软件包来解决这个问题，使用以下命令：
- en: '[PRE9]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'With these problems fixed, the configuration process can continue. The `grsecurity`
    option is available inside the security option subsection, as depicted in the
    following screenshot:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 有了这些问题解决后，配置过程可以继续。`grsecurity`选项位于安全选项子菜单中，如下截图所示：
- en: '![Grsecurity](img/image00370.jpeg)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
  zh: '![Grsecurity](img/image00370.jpeg)'
- en: 'Inside the `grsecurity` option, there are two more submenu options. More details
    about this can be seen in the following screenshot:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 在`grsecurity`选项中，还有两个子菜单选项。有关此的更多详细信息可以在以下截图中看到：
- en: '![Grsecurity](img/image00371.jpeg)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![Grsecurity](img/image00371.jpeg)'
- en: 'The first option refers to the configuration method, which can be **Custom**
    or **Automatic**:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个选项是配置方法，可以是**自定义**或**自动**：
- en: '![Grsecurity](img/image00372.jpeg)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![Grsecurity](img/image00372.jpeg)'
- en: 'The second option refers to the actual available configuration options:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 第二个选项是实际可用的配置选项：
- en: '![Grsecurity](img/image00373.jpeg)'
  id: totrans-97
  prefs: []
  type: TYPE_IMG
  zh: '![Grsecurity](img/image00373.jpeg)'
- en: Note
  id: totrans-98
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: More information about Grsecurity and the PaX configuration options can be found
    at [http://en.wikibooks.org/wiki/Grsecurity/Appendix/Grsecurity_and_PaX_Configuration_Options](http://en.wikibooks.org/wiki/Grsecurity/Appendix/Grsecurity_and_PaX_Configuration_Options).
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 有关Grsecurity和PaX配置选项的更多信息可以在[http://en.wikibooks.org/wiki/Grsecurity/Appendix/Grsecurity_and_PaX_Configuration_Options](http://en.wikibooks.org/wiki/Grsecurity/Appendix/Grsecurity_and_PaX_Configuration_Options)找到。
- en: One piece of advice I would like to offer is that first enable the **Automatic**
    configuration method and then proceed with the Custom configuration to fine tune
    the Grsecurity and PaX settings if necessary. Another tip would be to enable the
    **Grsecurity** | **Customize Configuration** | **Sysctl Support** option because
    it offers the possibility of changing the grsecurity options without compiling
    the kernel again. Of course, if the **Automatic** configuration method is selected,
    this option is enabled by default. The auditing option produces a big number of
    logs, so to prevent log flooding, make sure that **Grsecurity** | **Customize
    Configuration** | **Logging Options** is also enabled.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 我想提供的一个建议是，首先启用**自动**配置方法，然后再进行自定义配置，以微调Grsecurity和PaX设置（如果需要）。另一个提示是启用**Grsecurity**
    | **自定义配置** | **Sysctl支持**选项，因为它提供了在不重新编译内核的情况下更改grsecurity选项的可能性。当然，如果选择了**自动**配置方法，则此选项默认启用。审计选项会产生大量日志，为了防止日志泛滥，请确保**Grsecurity**
    | **自定义配置** | **日志选项**也已启用。
- en: 'The next tool from the grsecurity family is the `gradm` administrator, which
    is a powerful parser for ACLs and also optimizes them. To make sure that this
    utility can be installed, the installation process requires that the host operating
    machine for `gradm` offers grsecurity support or else the compilation process
    will fail. There are also a number of other packages that are required before
    installing `gradm`: `lex`, `flex`, `byacc`, `bison`, and even `pam`, if necessary.'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: grsecurity家族的下一个工具是`gradm`管理员，它是ACL的强大解析器，也对其进行优化。为了确保可以安装此实用程序，安装过程要求`gradm`的主机操作机器提供grsecurity支持，否则编译过程将失败。在安装`gradm`之前还需要一些其他软件包：`lex`、`flex`、`byacc`、`bison`，甚至`pam`（如果需要）。
- en: Once all the dependencies are met, the installation process can start. One last
    bit of information I'd like to give you is that if the distribution that you use
    comes with a kernel that has support for grsecurity patches, then you may first
    want to check it because the patches can also come with the `gradm` utility pre-installed.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦满足了所有依赖关系，安装过程就可以开始了。我想给你的最后一点信息是，如果您使用的发行版带有对grsecurity补丁的内核支持，那么您可能首先要检查它，因为补丁也可能预先安装了`gradm`实用程序。
- en: Note
  id: totrans-103
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: 'More information about the Grsecurity administration can be found at the folllowing
    links:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 有关Grsecurity管理的更多信息可以在以下链接找到：
- en: '[http://en.wikibooks.org/wiki/Grsecurity/The_Administration_Utility](http://en.wikibooks.org/wiki/Grsecurity/The_Administration_Utility)'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://en.wikibooks.org/wiki/Grsecurity/The_Administration_Utility](http://en.wikibooks.org/wiki/Grsecurity/The_Administration_Utility)'
- en: '[http://en.wikibooks.org/wiki/Grsecurity/Additional_Utilities](http://en.wikibooks.org/wiki/Grsecurity/Additional_Utilities)'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://en.wikibooks.org/wiki/Grsecurity/Additional_Utilities](http://en.wikibooks.org/wiki/Grsecurity/Additional_Utilities)'
- en: '[http://en.wikibooks.org/wiki/Grsecurity/Runtime_Configuration](http://en.wikibooks.org/wiki/Grsecurity/Runtime_Configuration)'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://en.wikibooks.org/wiki/Grsecurity/Runtime_Configuration](http://en.wikibooks.org/wiki/Grsecurity/Runtime_Configuration)'
- en: Inside the Yocto layers, there is support for the `gradm` recipe that is inside
    the `meta-oe` layer. It is available at `recipes-support/gradm/gradm_3.0.bb` on
    the master branch. Also, a grsecurity kernel configuration is available on the
    master branch for the `meta-accel` layer; the exact location for the configuration
    fragment is `recipes-kernel/linux/linux-yocto-iio/grsec.cfg`. For anyone interested
    in learning about the concrete grsecurity support provided in Yocto, I believe
    the road is clear for you to start working on such a thing. One piece of advice,
    though, you should first ask the Yocto Project community whether anyone has started
    doing this already.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 在Yocto层中，支持`meta-oe`层内的`gradm`配方。它位于主分支的`recipes-support/gradm/gradm_3.0.bb`。此外，`meta-accel`层的主分支上提供了grsecurity内核配置；配置片段的确切位置是`recipes-kernel/linux/linux-yocto-iio/grsec.cfg`。对于任何对Yocto中提供的具体grsecurity支持感兴趣的人，我相信你可以开始着手做这件事。不过，我建议你首先向Yocto项目社区询问是否已经有人开始做这件事。
- en: Security for the Yocto Project
  id: totrans-109
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Yocto项目的安全性
- en: In the Yocto Project, the security question is is still young. Since this project
    was announced less than five years ago, it is only normal that discussions about
    security started in the last year or so. There is, of course, a specialized mailing
    list for the security team and it includes a large number of individuals from
    various companies, but their working procedure is not quite finished since it's
    currently in state of work in progress.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 在Yocto项目中，安全问题仍然很年轻。由于该项目宣布不到五年，讨论安全问题是很正常的，最近一年左右才开始。当然，安全团队有专门的邮件列表，其中包括来自各个公司的大量成员，但他们的工作程序还没有完全完成，因为目前仍处于进行中的状态。
- en: The activities that are mainly realized by the members of the security team
    consist of being aware of the latest and most dangerous security threats and making
    sure that they find the fixes, even if it includes fixing themselves and applying
    the changes inside Yocto's available layers.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 安全团队成员主要开展的活动包括了解最新和最危险的安全威胁，并确保找到修复方法，即使包括自己修复并应用更改到Yocto的可用层内。
- en: For the time being, the most time consuming of the security activity revolves
    around the Poky reference system, but there are also initiatives taken by various
    companies to try to push a series of patches toward various BSP maintainer layers
    or other third-party layers. For those of you interested, the mailing list of
    security-related discussions is `<[yocto-security@yoctoproject.org](mailto:yocto-security@yoctoproject.org)>`.
    Also, until the group is formed, they can be found in the `#yocto` IRC available
    at [http://webchat.freenode.net/?channels=#yocto](http://webchat.freenode.net/?channels=#yocto),
    or even at the Yocto technical team meeting that takes place once every two weeks.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，安全活动中最耗时的是围绕Poky参考系统展开的，但也有各个公司采取的倡议，试图向各种BSP维护层或其他第三方层推送一系列补丁。对于感兴趣的人，与安全相关的讨论邮件列表是`<[yocto-security@yoctoproject.org](mailto:yocto-security@yoctoproject.org)>`。此外，在团队形成之前，他们可以在`#yocto`
    IRC上找到，网址是[http://webchat.freenode.net/?channels=#yocto](http://webchat.freenode.net/?channels=#yocto)，甚至可以参加每两周举行一次的Yocto技术团队会议。
- en: Note
  id: totrans-113
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: More information about the security team can be found on their Wiki page. I
    encourage everyone interested in this subject to visit it at least once at [https://wiki.yoctoproject.org/wiki/Security](https://wiki.yoctoproject.org/wiki/Security).
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 有关安全团队的更多信息可以在其Wiki页面上找到。我鼓励所有对这个主题感兴趣的人至少访问一次[https://wiki.yoctoproject.org/wiki/Security](https://wiki.yoctoproject.org/wiki/Security)。
- en: Meta-security and meta-selinux
  id: totrans-115
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Meta-security和meta-selinux
- en: In this section, the layer initiatives related to the security tools of Linux
    are presented. In this chapter, two layers that provide both security and hardening
    tools are available for the Linux kernel and its libraries. Their purpose is to
    simplify mode embedded devices, make sure that they're secure, and maybe offer
    the security level similar to a desktop.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一部分，介绍了与Linux安全工具相关的层倡议。在这一章中，为Linux内核及其库提供安全和硬化工具的两个层可供使用。它们的目的是简化嵌入式设备的模式，确保它们是安全的，并可能提供类似桌面的安全级别。
- en: Since embedded devices have become increasingly competent and powerful, concerns
    related to security can only be natural. The Yocto Project's initiative layers,
    here, I am referring to meta-security and meta-selinux, take another step in simplifying
    the process to ensure secure, hardened, and protected Linux systems. Together,
    with the detect and fix vulnerability system, they are implemented inside the
    security team, and help with the ideal of having the same level of security on
    embedded devices as desktops, along with taking this idea a step further. Having
    said this, let's proceed to the actual explanation of layers.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 由于嵌入式设备变得越来越强大，与安全相关的问题只能是自然而然的。 Yocto项目的倡议层，我指的是meta-security和meta-selinux，在简化确保安全、硬化和保护Linux系统的过程中迈出了另一步。与检测和修复漏洞系统一起，它们被实施在安全团队内部，并有助于在嵌入式设备上实现与桌面相同级别的安全性，并进一步推动这一理念。话虽如此，让我们继续讲解层的实际内容。
- en: Meta-security
  id: totrans-118
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Meta-security
- en: Inside the meta-security layer, there are tools that are used to secure, harden,
    and protect embedded devices that may offer exterior access to various entities.
    If the device is connected to the Internet or is susceptible to any form of attack
    or hijacking, then the meta-security layer may be the first stop for you. With
    this layer and the meta-selinux layer, the Yocto Project tries to provide security
    levels that are suitable for most of the community or embedded user devices. Of
    course, enhancing the support for various tools or adding new ones is not forbidden,
    so do not hesitate and add your contribution for enhancing tools if you feel the
    need or urge to do so. Any new commit or committer is welcome - our community
    is really friendly.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 在meta-security层中，有一些工具用于保护、加固和保护嵌入式设备，这些设备可能向各种实体提供外部访问。如果设备连接到互联网或容易受到任何形式的攻击或劫持，那么meta-security层可能是您的第一站。通过这一层和meta-selinux层，Yocto项目试图为大多数社区或嵌入式用户设备提供适当的安全级别。当然，增强对各种工具的支持或添加新工具并不是被禁止的，所以如果您感到需要或有冲动，不要犹豫，为增强工具做出您的贡献。欢迎任何新的提交或提交者-我们的社区真的很友好。
- en: 'As you''re already used to, the tools provided are open source packages that
    are suitable for embedded devices. Inside the meta-security layer a number of
    them are available, each one trying to offer not only system hardening, but also
    security checking, security, port scanning, and other useful features that target
    various levels of security. The following packages are included:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您已经习惯的那样，提供的工具是适用于嵌入式设备的开源软件包。在meta-security层中，有许多可用的软件包，每个软件包都试图提供不仅系统加固，还有安全检查、安全、端口扫描和其他针对各种安全级别的有用功能。包括以下软件包：
- en: Bastille
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Bastille
- en: Redhat-security
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Redhat-security
- en: Pax-utils
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Pax-utils
- en: Buck-security
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Buck-security
- en: Libseccomp
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Libseccomp
- en: Ckecksecurity
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Ckecksecurity
- en: Nikto
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Nikto
- en: Nmap
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Nmap
- en: Clamav
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Clamav
- en: Isic
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Isic
- en: Samhain
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Samhain
- en: Suricata
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Suricata
- en: Tripwire
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Tripwire
- en: Besides these packages, there are a number of libraries and also **TOMOYO**,
    a kernel security module for a MAC implementation, which is also very useful as
    a system analysis tool. It was first released in March 2003, and was sponsored
    by NTT Data Corporation, Japan, until March 2012.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 除了这些软件包，还有许多库和**TOMOYO**，一个用于MAC实现的内核安全模块，也非常有用作为系统分析工具。它于2003年3月首次发布，并由日本NTT数据公司赞助，直到2012年3月。
- en: 'TOMOYO''s main focus is the system behavior. For this, every process involved
    in the creation of the system declares its behavior and the required resources
    necessary to achieve a purpose. It consists of two components: one kernel component,
    linux-ccs, and a user space one, ccs-tools; both are required for proper functionality.
    TOMOYO tries to provide a MAC implementation that is both practical and easy to
    use. Finally, it likes to let a system be usable for a majority of users, being
    perfect for average users and system administrators. It is different from SELinux
    because it has an automatic policy configuration mechanism offered by the **LEARNING
    mode**; also, its policy language is very easy to grasp.'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: TOMOYO的主要关注点是系统行为。为此，参与系统创建的每个进程都声明了其行为和实现目的所需的必要资源。它由两个组件组成：一个内核组件，linux-ccs，和一个用户空间组件，ccs-tools；两者都需要才能正常运行。TOMOYO试图提供一个既实用又易于使用的MAC实现。最后，它希望让系统对大多数用户可用，非常适合普通用户和系统管理员。它与SELinux不同，因为它具有**LEARNING模式**提供的自动策略配置机制；此外，它的策略语言非常容易理解。
- en: 'After protection is enabled, TOMOYO Linux acts as a watchdog that restricts
    the processes from using more than what they had declared initially. Its main
    features include the following:'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 启用保护后，TOMOYO Linux充当一个看门狗，限制进程使用超出其最初声明的资源。其主要特点包括以下内容：
- en: System analysis
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 系统分析
- en: Tools that offer aid in the process of policy generation
  id: totrans-138
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提供策略生成过程中的辅助工具
- en: Simple to use and understand syntax
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 简单易用的语法
- en: Easy to use
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 易于使用
- en: Increased security of the system through the MAC implementation
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过MAC实现增强系统安全性
- en: Contains a small number of dependencies (the embedded GNU C library, libncurses,
    and GNU readline library)
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 包含少量依赖项（嵌入式GNU C库、libncurses和GNU readline库）
- en: No modification of the already available binaries inside the root filesystem
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不修改根文件系统中已有的二进制文件
- en: 'Since the version 2.6.30, the Linux kernel merged with the TOMOYO kernel module,
    making only the enabling of the module in the configuration phase necessary. It
    started as a patch that provided MAC support, and the porting inside a mainline
    kernel required a redesign using hooks into the **LSM** (**Linux Security Modules**),
    which also includes SELinux, AppArmor, and SMACK. However, since more hooks would
    be necessary for the integration of the remaining MAC functionalities, there are
    two other parallel development lines for the project, as follows:'
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自2.6.30版本以来，Linux内核与TOMOYO内核模块合并，只需要在配置阶段启用模块即可。它起初是一个提供MAC支持的补丁，将其移植到主线内核需要使用**LSM**（Linux安全模块）的钩子，其中还包括SELinux、AppArmor和SMACK。然而，由于需要更多的钩子来集成剩余的MAC功能，因此该项目有另外两条并行的开发线：
- en: '**TOMOYO Linux 1.x**: This is the original code version:'
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**TOMOYO Linux 1.x**：这是原始代码版本：'
- en: It uses nonstandard specific hooks
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它使用非标准的特定钩子
- en: It offers all the MAC features
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它提供了所有的MAC功能
- en: It is released as a patch for the kernel since it does not depend on LSM
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它作为内核的补丁发布，因为它不依赖于LSM
- en: Its latest version is 1.7.1
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其最新版本为1.7.1
- en: '**TOMOYO Linux 2.x**: This is the mainline source code version:'
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: TOMOYO Linux 2.x：这是主线源代码版本：
- en: It uses standard LSM hooks
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它使用标准的LSM钩子
- en: It contains a fewer subset of features
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它包含了更少的功能子集
- en: It is an integral component of the 2.6.30 Linux kernel version
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它是2.6.30 Linux内核版本的一个组成部分
- en: The latest version is 2.5.0 and offers support for Linux kernel version 3.2
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最新版本是2.5.0，支持Linux内核版本3.2
- en: '**AKARI and TOMOYO 1.x fork version**:'
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**AKARI和TOMOYO 1.x分支版本**：'
- en: It also uses standard LSM hooks
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它还使用标准的LSM钩子
- en: It is characterized by having a fewer set of features compared to TOMOYO 1.x
    but not with TOMOYO 2.x
  id: totrans-157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它的特点是与TOMOYO 1.x相比具有较少的功能，但与TOMOYO 2.x不同。
- en: It is released as LSM; no recompilation of the kernel is necessary
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它作为LSM发布；不需要重新编译内核
- en: Note
  id: totrans-159
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: For those of you interested in a comparison between the three versions, refer
    to [http://akari.sourceforge.jp/comparison.html.en](http://akari.sourceforge.jp/comparison.html.en).
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 对于那些对三个版本进行比较感兴趣的人，请参阅[http://akari.sourceforge.jp/comparison.html.en](http://akari.sourceforge.jp/comparison.html.en)。
- en: The next package is `samhain`, a system integrity monitoring and reporting tool
    used by system administrators that suspect changes or activities on their systems.
    Its operation is based on a client/server environment and is able to monitor multiple
    hosts while providing a centralized maintenance and logging system. Besides the
    already advertised functionalities, it is also able to provide port monitoring,
    detection of rogue SUID, rootkit detection, and also hidden processes that add
    to the fact that it offers support for multiple platforms; it is a really interesting
    tool to have.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 下一个软件包是`samhain`，这是一个系统完整性监控和报告工具，由系统管理员使用，用于怀疑系统上的更改或活动。它的操作基于客户端/服务器环境，并能够监视多个主机，同时提供集中的维护和日志记录系统。除了已经宣传的功能外，它还能提供端口监控、检测恶意SUID、rootkit检测，以及隐藏进程，这使得它支持多个平台；这是一个非常有趣的工具。
- en: The next element here falls in the same category as `samhain` and it is called
    `tripwire`. It is another integrity tool, but this one tries to detect changes
    for filesystem objects and works as a host intrusion detection system. Information
    is stored in a database after each file scan and the results are compared with
    the already available results. Any changes that are made are reported back to
    the user.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 这里的下一个元素属于与`samhain`相同的类别，称为`tripwire`。这是另一个完整性工具，但它试图检测文件系统对象的更改，并作为主机入侵检测系统工作。在每次文件扫描后，信息都存储在数据库中，并与已有结果进行比较。任何进行的更改都会向用户报告。
- en: '**Bastille** is a hardening program used to secure the environment and system
    for a Unix host. It uses rules to accomplish its goals and does this by first
    calling the `bastille –c` command that makes you pass through a long list of questions.
    After they are answered, a configuration file is created and executed and this
    symbolizes the fact that your operating system is now hardened according to your
    needs. If a configuration file is already available on the system by calling `bastille
    –b`, it can be set up for system hardening.'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: '**Bastille**是一个用于保护Unix主机环境和系统的加固程序。它使用规则来实现其目标，首先通过调用`bastille -c`命令，让您通过一长串问题。回答完后，将创建并执行一个配置文件，这意味着您的操作系统现在根据您的需求已经加固。如果系统上已经有一个配置文件，可以通过调用`bastille
    -b`来设置系统加固。'
- en: 'The next tool is `redhat-security`, which is a collection of scripts used for
    various problems related to security scanning. The following are a collection
    of the tools needed to run a `redhat-security` script to simply invoke one script
    in the terminal:'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 下一个工具是`redhat-security`，它是一组用于与安全扫描相关的各种问题的脚本集合。以下是运行`redhat-security`脚本所需的工具集合，只需在终端中调用一个脚本：
- en: '`find-chroot.sh`: This tool scans the whole system for ELF files that call
    `chroot` and also include a call to `chdir`. The programs that fail this test
    do not contain `cwd` inside `chroot` and they are not protected and safe to use.'
  id: totrans-165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`find-chroot.sh`：此工具扫描整个系统以查找调用`chroot`并包括对`chdir`的调用的ELF文件。未通过此测试的程序不包含`chroot`内的`cwd`，它们不受保护，不安全。'
- en: '`find-chroot-py.sh`: This tool is similar to the preceding point, but only
    tests Python scripts.'
  id: totrans-166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`find-chroot-py.sh`：此工具类似于前面的工具，但仅测试Python脚本。'
- en: '`rpm-chksec.sh`: This tool takes an rpm file and checks its content for its
    compiling flags. It does this for security reasons. If the results are green,
    then everything is OK, yellow means passable, and red requires the user''s attention.'
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rpm-chksec.sh`：此工具接受一个rpm文件，并检查其编译标志。出于安全原因进行此操作。如果结果是绿色，则一切正常，黄色表示可以接受，红色需要用户注意。'
- en: '`find-nodrop-groups.sh`: This tool scans the whole system for programs that
    change the UID or GID without calling the `setgroups` and `initgroups` calls.'
  id: totrans-168
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`find-nodrop-groups.sh`：此工具扫描整个系统，查找在不调用`setgroups`和`initgroups`调用的情况下更改UID或GID的程序。'
- en: '`rpm-drop-groups.sh`: This tool scans the whole system similar to the preceding
    tool, but this one uses the available RPM files.'
  id: totrans-169
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rpm-drop-groups.sh`：此工具类似于前一个工具，但这个工具使用可用的RPM文件。'
- en: '`find-execstack.sh`: This tool scans the whole system for ELF files that mark
    the stack as executable. It is used to identify programs that are susceptible
    to stack buffer overflow.'
  id: totrans-170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`find-execstack.sh`：此工具扫描整个系统以查找将堆栈标记为可执行的ELF文件。它用于识别易受堆栈缓冲区溢出攻击的程序。'
- en: '`find-sh4errors.sh`: This tool scans the whole system for shell scripts and
    checks their correctness by using the `sh –n` command.'
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`find-sh4errors.sh`：此工具扫描整个系统以查找shell脚本，并使用`sh -n`命令检查其正确性。'
- en: '`find-hidden-exec.sh`: This tool scans the system for hidden executables and
    reports the results back to the user for investigation.'
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`find-hidden-exec.sh`：此工具扫描系统以查找隐藏的可执行文件，并将结果报告给用户进行调查。'
- en: '`selinux-ls-unconfined.sh`: This tool is used to scan all the running processes
    and look for the `initrc_t` label or `inetd` on them (this means that they are
    daemons that are running unconfined). The problems should be reported as SELinux
    policy problems.'
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`selinux-ls-unconfined.sh`：此工具用于扫描所有运行中的进程，并查找其中的`initrc_t`标签或`inetd`（这意味着它们是运行不受限制的守护进程）。问题应报告为SELinux策略问题。'
- en: '`selinux-check-devides.sh`: This tool checks all the available devices too
    see if they are correctly labelled. It is also marked as a SELinux policy problem
    that should be solved.'
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`selinux-check-devides.sh`：此工具检查所有可用设备，以查看它们是否正确标记。它也被标记为应该解决的SELinux策略问题。'
- en: '`find-elf4tmp.sh`: This tool scans the whole system and checks whether the
    used `tmp` files are well known, are created with `mktemp`, or have some obscure
    format.'
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`find-elf4tmp.sh`：此工具扫描整个系统，并检查所使用的`tmp`文件是否为众所周知，是否使用`mktemp`创建，或者是否具有某种模糊的格式。'
- en: '`find-sh3tm.sh`: This tool also scans the filesystem, although only inside
    `/tmp` and looks for ELF files there. When it finds them, it checks if any of
    the random name generators function was called on them by investigating the symbol
    table. If the result is affirmative, it will output the string value.'
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`find-sh3tm.sh`：此工具还扫描文件系统，尽管仅在`/tmp`内部查找ELF文件。当找到它们时，它会检查是否通过调查符号表对它们中的任何随机名称生成器函数进行了调用。如果结果是肯定的，它将输出字符串值。'
- en: '`lib-bin-check.sh`: This tool checks the packages of libraries and their the
    package they contain. It is based on the idea that the fewer binaries available
    on a system, the more secure it is.'
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`lib-bin-check.sh`：此工具检查库的软件包及其包含的软件包。它基于这样一个想法，即系统上可用的二进制文件越少，系统就越安全。'
- en: 'Another tool that is included is `pax-utils`. It also includes a number of
    scripts that scan ELF binaries mostly for consistency, but this is not all. Take
    a look at some of them:'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个包含的工具是`pax-utils`。它还包括一些用于扫描ELF二进制文件的脚本，主要用于一致性检查，但这并非全部。看一下其中一些：
- en: '`scanelf`: This tool is used to find pre-information about the ELF structure
    of the binary'
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`scanelf`：此工具用于查找有关二进制文件的ELF结构的预先信息'
- en: '`dumpelf`: This tool is a user space utility used to dump the internal ELF
    structure in equivalent C structures for debugging or reference purposes'
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`dumpelf`：此工具是一个用户空间实用程序，用于以等效的C结构转储内部ELF结构，用于调试或参考目的'
- en: '`pspax`: This tool is used to scan `/proc` and list the various ELF types available
    and their corresponding PaX flags, attributes, and filenames'
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pspax`：此工具用于扫描`/proc`并列出各种可用的ELF类型及其对应的PaX标志、属性和文件名'
- en: Now, the next tool that will be presented is a security scanner that is different
    from the already presented bastille. Similar to the `redhat-security` command,
    this one also executes a number of scripts and can be configured to confirm the
    user's needs. It is suitable for Debian and Ubuntu users, and before calling the
    buck-security executable, there are a few configurations that need to be done.
    Use `export GPG_TTY=`tty`` to make sure that all the functionalities of the buck-security
    are enabled and before executing the tool, check inside the `conf/buck-security.conf`
    configuration file to check that your needs are fulfilled.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，接下来要介绍的工具是一种与已经介绍的bastille不同的安全扫描器。与`redhat-security`命令类似，这个命令也执行一些脚本，并可以根据用户的需求进行配置。它适用于Debian和Ubuntu用户，在调用buck-security可执行文件之前，需要进行一些配置。使用`export
    GPG_TTY=`tty``来确保启用buck-security的所有功能，并在执行该工具之前，检查`conf/buck-security.conf`配置文件，以确保满足您的需求。
- en: '**Suricata** is a high-performance IDS/IPS and Security Monitoring engine for
    the network. It is owned and maintained by **OISF** (**Open Information Security
    Foundation**) and its supporters. It uses the **HTP** library that is a very powerful
    HTTP parser and normalizer and offers some nice features, such as protocol identification,
    MD5 checksum, file identification, and even extraction.'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: '**Suricata**是一个用于网络的高性能IDS/IPS和安全监控引擎。它由**OISF**（**Open Information Security
    Foundation**）及其支持者拥有和维护。它使用**HTP**库，这是一个非常强大的HTTP解析器和标准化器，并提供一些不错的功能，如协议识别、MD5校验和文件识别等。'
- en: '**ISIC**, on the other hand, is what its name suggests, an IP Stack Integrity
    Checker. It is, in fact, a suite of utilities for IP Stack ad other stacks, such
    as TCP, ICMP, UDP, and others that test either the firewall, or the protocol itself.'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，**ISIC**正如其名字所示，是一个IP堆栈完整性检查器。实际上，它是一套用于IP堆栈和其他堆栈（如TCP、ICMP、UDP等）的实用程序，用于测试防火墙或协议本身。
- en: For any web server, **nikto** is the tool to execute on your device. It is a
    scanner used to run a suite of tests that identifies dangerous CGI1s or other
    files. It also presents an outdated version for more than 1250 servers and various
    lists of vulnerabilities for each version.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 对于任何Web服务器，**nikto**是在您的设备上执行的工具。它是一个用于运行一系列测试的扫描程序，用于识别危险的CGI1或其他文件。它还为超过1250个服务器的过时版本和每个版本的各种漏洞提供了列表。
- en: Next on the list is the **libseccomp** library that provides an easy-to-use
    abstract interface to the Linux kernel, `syscall`, filtering a mechanism called
    `seccomp`. It does this by abstracting the BPF `syscall` filter language and presenting
    it a more user-friendly format for application developers in general.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来是**libseccomp**库，它提供了一个易于使用的抽象接口到Linux内核的`syscall`过滤机制，称为`seccomp`。它通过将BPF
    `syscall`过滤语言抽象化，并以更用户友好的格式呈现给应用程序开发人员来实现这一点。
- en: '**Checksecurity** is the next package on the line which uses a collection of
    shell scripts and other plugins for testing various changes to `setuid` programs.
    Using the filter defined in `/etc/checksecurity.conf`, it scans the mounted filesystems
    and compares the already available list of `setuid` programs to the newly scanned
    ones and prints the changes for the user to see. It also offers information about
    these filesystems that were mounted unsecure.'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: '**Checksecurity**是下一行的包，它使用一系列shell脚本和其他插件来测试对`setuid`程序的各种更改。使用`/etc/checksecurity.conf`中定义的过滤器，它扫描已挂载的文件系统，并将已有的`setuid`程序列表与新扫描的程序进行比较，并将更改打印给用户查看。它还提供有关这些已挂载不安全文件系统的信息。'
- en: '**ClamAV** is an antivirus for Unix that operates from the command line. It
    is a very good engine for tracking trojans, malware, viruses, and detection of
    other malicious threats. It can do a large variety of things from e-mail scanning
    to web scanning and end-point security. It also has a very versatile and scalable
    daemon, command-line scanner, and database interaction tool.'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: '**ClamAV**是Unix的一种命令行操作的防病毒软件。它是一个非常好的引擎，用于跟踪木马、恶意软件、病毒和其他恶意威胁的检测。它可以做很多事情，从电子邮件扫描到网络扫描和端点安全。它还具有非常多功能和可扩展的守护程序、命令行扫描程序和数据库交互工具。'
- en: The last on the list is **Network Mapper** (**nmap**). It is the most well known
    and is used for security auditing as well as a network discovery tool by network
    and system administrators. It is used to manage service upgrade schedules, network
    inventory, monitoring various services, or even host uptime.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 列表中的最后一个是**网络映射器**（**nmap**）。这是最著名的安全审计工具，也是网络和系统管理员用于网络发现的工具。它用于管理服务升级计划、网络清单、监控各种服务，甚至主机的正常运行时间。
- en: 'These are the tools supported and offered inside the meta-security layer. I
    took the liberty of presenting most of them in a succinct manner with the purpose
    of making them available to you in an easy fashion. It is my opinion that for
    security problems, one should not overcomplicate things and only keep the solutions
    that fit your needs best. By presenting a large palette of tools and software
    components, I tried to do two things: make a larger number of tools available
    for the general public and also help you make a decision with regard to the tools
    that might help you in your quest to offer and even maintain a secure system.
    Of course, curiosity is encouraged, so make sure that you check out any other
    tools that might help you on your quest to find out more about security, and why
    they should not be integrated inside the meta-security layer.'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 这些是meta-security层内支持和提供的工具。我在简洁的方式中介绍了大部分工具，目的是让它们以简单的方式对您可用。我认为对于安全问题，不应该过于复杂，只保留最适合您需求的解决方案。通过提供大量工具和软件组件，我试图做两件事：为公众提供更多的工具，并帮助您在寻求提供甚至维护安全系统的过程中做出决策。当然，鼓励好奇心，所以请确保您查看任何其他可能帮助您了解更多安全信息的工具，以及为什么它们不应该集成到meta-security层内。
- en: Meta-selinux
  id: totrans-191
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Meta-selinux
- en: The other available security layer is represented by the meta-selinux layer.
    This one is different from meta-security because it only offers support for one
    tool, but as mentioned in the preceding tool, it is so big and vast that it spreads
    its wings across the whole system.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个可用的安全层由meta-selinux层表示。这与meta-security不同，因为它只支持一个工具，但正如前面的工具所述，它是如此庞大和广泛，以至于它将其翅膀展开到整个系统。
- en: The layer's purpose is to enable the support for SELinux and offer it through
    Poky to anyone in the Yocto Project community for use if required. As mentioned
    previously, since it influences the whole Linux system, most of the work on this
    layer is done inside the bbappend files. I hope you enjoy working with the functionalities
    available inside this layer and maybe even contribute to it if you see fit.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 该层的目的是支持SELinux并通过Poky向Yocto Project社区中的任何人提供使用。正如之前提到的，由于它影响整个Linux系统，因此该层的大部分工作都是在bbappend文件中完成的。我希望您喜欢使用该层内可用的功能，并且如果您认为合适，甚至可以为其做出贡献。
- en: 'This layer not only contains a number of impressive bbappend files, but also
    offers a list of packages that could be used not only as SELinux extensions. These
    packages can be used also for other self-contained purposes too. The available
    packages inside the meta-selinx layer are as follows:'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 这一层不仅包含许多令人印象深刻的bbappend文件，还提供了一系列不仅可以用作SELinux扩展的软件包。这些软件包也可以用于其他独立的目的。meta-selinx层中可用的软件包如下：
- en: audit
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: audit
- en: libcap-ng
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: libcap-ng
- en: setools
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: setools
- en: swig
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: swig
- en: ustr
  id: totrans-199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ustr
- en: I will start the introduction of this layer with the **audit** userspace tool,
    which as the name suggests, is a tool that can be used for auditing, more specifically
    for kernel auditing. It uses a number of utilities and libraries to search and
    store recorded data. The data is generated through an audit subsystem available
    inside the Linux kernel. It is designed to work as a standalone component, but
    it cannot offer **Common Criteria** (**CC**) or **FIPS 140-2** functionalities
    without a second security component being available.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 我将从**audit**用户空间工具开始介绍这一层，正如其名称所示，这是一个用于审计的工具，更具体地说是用于内核审计。它使用多种实用程序和库来搜索和存储记录的数据。数据是通过Linux内核中可用的审计子系统生成的。它被设计为一个独立的组件，但如果没有第二个安全组件可用，它就无法提供**公共标准**（**CC**）或**FIPS
    140-2**功能。
- en: The next element on the list is **libcap-ng**, an alternative library with simplified
    POSIX capabilities that can be compared to the traditional libcap solution. It
    offers utilities that analyze running applications and print out their capabilities,
    or if they have an open ended bounding set. For an open bounding set that lacks
    the `securebit`, `NOROOT` flag will permit only by using an `execve()` call to
    retain full capabilities for applications that retain the `0` UID. By using the
    libcap-ng libraries, these applications that have the most privileges, are very
    easy to spot and deal with tools. The interaction and their detection is done
    with other tools, such as **netcap**, **pscap**, or **filecap**.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 列表中的下一个元素是**libcap-ng**，这是一个替代库，具有简化的POSIX功能，可以与传统的libcap解决方案进行比较。它提供了分析运行应用程序并打印其功能的实用程序，或者如果它们具有开放的边界集。对于缺乏`securebit`的开放边界集，只有使用`execve()`调用才能允许保留`0`
    UID的应用程序保留完整的功能。通过使用libcap-ng库，这些具有最高权限的应用程序非常容易识别和处理。与其他工具进行交互和检测，如**netcap**、**pscap**或**filecap**。
- en: '**SETools** is a policy analysis tool. It is in fact, an extension of SELinux
    and contains a collection of libraries, graphical tools, and command-lines that
    try simply analyze the the SELinux policies. The primary tools that this open
    source project are as follows:'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: '**SETools**是一个策略分析工具。实际上，它是SELinux的扩展，包含一系列库、图形工具和命令行，试图简单地分析SELinux策略。这个开源项目的主要工具如下：'
- en: '`apol`: This is a tool used to analyze SELinux policies'
  id: totrans-203
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`apol`：这是一个用于分析SELinux策略的工具'
- en: '`sediff`: This acts as a semantic differentiator between SELinux policies'
  id: totrans-204
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sediff`：这是一个用于比较SELinux策略的语义差异器'
- en: '`seaudit`: This is a tool used to analyze audit messages for SELinux'
  id: totrans-205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`seaudit`：这是一个用于分析SELinux审计消息的工具'
- en: '`seaudit-report`: This is used to generate a highly customizable audit report
    based on available audit logs'
  id: totrans-206
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`seaudit-report`：这用于基于可用的审计日志生成高度可定制的审计报告'
- en: '`sechecker`: This is a command-line tool that is engaged in modular checks
    of SELinux policies'
  id: totrans-207
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sechecker`：这是一个用于对SELinux策略进行模块化检查的命令行工具'
- en: '`secmds`: This is another command-line tool that is used to reach and analyze
    SELinux policies'
  id: totrans-208
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`secmds`：这是另一个用于访问和分析SELinux策略的命令行工具'
- en: Next is **SWIG** (**Simplified Wrapper and Interface Generator**), a software
    development tool used with a variety of target languages to create a high-level
    programming environment, user interfacing, and anything else that is necessary.
    It is usually used for fast testing or prototyping because it generates the glue
    that a target language can call inside the C or C++ code.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来是**SWIG**（**简化包装器和接口生成器**），这是一个软件开发工具，用于与各种目标语言一起创建高级编程环境、用户界面和其他必要的内容。它通常用于快速测试或原型设计，因为它生成了目标语言可以在C或C++代码中调用的粘合剂。
- en: The last component to be presented is a micro string API for a C language called
    **ustr**, which has the benefit of how overheads compared to available APIs. It
    is very easy to use in the C code as it only includes a header file and is ready
    for usage. Its overhead over `strdup()` for strings varies from 85.45 for 1-9
    byte strings to 23.85 for 1-198 byte strings. For a simpler example, if an 8 byte
    storage ustr uses 2 bytes, the `strdup()` function uses 3 bytes.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 最后要介绍的组件是用于C语言的微字符串API，称为**ustr**，它与可用的API相比具有更低的开销。它在C代码中非常容易使用，因为它只包括一个头文件并且可以立即使用。与`strdup()`相比，对于字符串的开销从1-9字节的85.45变化到1-198字节的23.85。举个简单的例子，如果一个8字节的存储ustr使用2字节，`strdup()`函数使用3字节。
- en: This is where other tools and libraries are available alongside the SELinux
    functionality, although some of them can be used as separate components or in
    tandem with other available software components that were presented here. This
    would add more value to the SELinux product, so it only seems fair to find them
    in the same place.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 这是其他工具和库与SELinux功能一起提供的地方，尽管其中一些可以作为单独的组件或与此处介绍的其他可用软件组件一起使用。这将为SELinux产品增加更多价值，因此在同一位置找到它们似乎是公平的。
- en: 'For those of you interested in obtaining a SELinux enhance distribution, you
    could choose to use one of the two available images in the meta-selinux layer:
    `core-image-selinux-minimal.bb` or `core-image-selinux.bb`. The alternative would
    be to incorporate one of the available SELinux-specific defined package groups,
    `packagegroup-selinux-minimal` or `packagegroup-core-selinux`, into a newly defined
    image according to the needs of a developer. After this choice is made and the
    configuration is done accordingly, the only thing remaining would be to call `bitbake`
    for the chosen image and at the end of the build process, a custom Linux distribution
    will reveal itself with SELinux support enabled and can be tweaked some more if
    necessary.'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 对于那些有兴趣获得SELinux增强发行版的人，您可以选择在meta-selinux层中使用两个可用的映像之一：`core-image-selinux-minimal.bb`或`core-image-selinux.bb`。另一种选择是根据开发人员的需求将其中一个可用的SELinux特定定义的软件包组，`packagegroup-selinux-minimal`或`packagegroup-core-selinux`，合并到新定义的映像中。在做出这个选择并相应地进行配置之后，唯一剩下的就是为所选择的映像调用`bitbake`，在构建过程结束时，将会显示一个启用了SELinux支持的自定义Linux发行版，并且如果需要，可以进一步进行调整。
- en: Summary
  id: totrans-213
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, you were presented with information about both kernel-specific
    security projects as well as external projects. Most of these were presented in
    a bad manner. You were also given information related to how various security
    subsystems and subgroups are keeping pace with various security threats and security
    project implementations.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您将了解有关内核特定安全项目和外部项目的信息。其中大多数以不好的方式呈现。您还将获得有关各种安全子系统和子组如何跟上各种安全威胁和安全项目实施的信息。
- en: In the next chapter, we will move on to another interesting subject. Here, I
    am referring to the virtualization area. You will find more about the meta-virtualization
    aspect later along with various virtualization implementations, such as KVM, which
    has gathered a huge track over the last few years and has established itself as
    a standard. I will let the other elements, which will be presented in the next
    chapter, be a secret. Let's now further explore the content of this book.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将继续探讨另一个有趣的主题。在这里，我指的是虚拟化领域。您将在稍后了解更多关于元虚拟化方面的内容，以及各种虚拟化实现，例如KVM，在过去几年中已经积累了大量经验，并已经确立了自己的标准。我将让下一章中将介绍的其他元素成为一个秘密。现在让我们进一步探索本书的内容。
