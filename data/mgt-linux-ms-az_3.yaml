- en: 3\. Assessment and migration planning
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 3. 评估和迁移规划
- en: This chapter will focus on discussing useful methods for assessing your existing
    workloads in on-premises or hosted environments and provide some guidance on planning
    your migration project.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将重点讨论评估现有工作负载在本地或托管环境中的有用方法，并提供一些关于规划迁移项目的指导。
- en: We will go into the technical details regarding a number of popular Linux workloads
    and explain why these specific workloads require extra careful planning prior
    to migration. Additionally, we will talk about various migration methodologies
    and tools, and will also show some practical examples of how to assess current
    workloads by using tools such as Azure Migrate.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将深入讨论一些流行的Linux工作负载的技术细节，并解释为什么这些特定的工作负载在迁移前需要额外谨慎的规划。此外，我们还将讨论各种迁移方法和工具，并展示如何使用Azure
    Migrate等工具来评估当前工作负载的一些实际示例。
- en: Until now, we have been talking about the history of Linux and various Linux
    distributions that are available. We have not talked about migration or what happens
    prior to this. In this chapter, we are going to cover concepts related to pre-migration
    steps. You may be wondering why we need pre-migration steps and why cannot we
    move our workloads directly to the cloud. The answer is simply that migrating
    to the cloud requires a lot of planning and assessment. We need to make sure that
    our workloads are ready to be migrated to the cloud, otherwise the time and money
    spent investing in the migration will go to waste.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们一直在谈论Linux的历史和各种可用的Linux发行版。我们还没有谈论迁移或之前发生的事情。在本章中，我们将涵盖与迁移前步骤相关的概念。您可能想知道为什么我们需要迁移前步骤，为什么不能直接将我们的工作负载迁移到云中。答案很简单，迁移到云需要大量的规划和评估。我们需要确保我们的工作负载准备好迁移到云中，否则在迁移中投入的时间和金钱将白白浪费。
- en: In this chapter, you will also learn that pre-migration mainly comprises assessment
    and capacity planning. Assessment is the process of creating an inventory of workloads
    we have in the current environment. Using this inventory, we will be able to understand
    the current infrastructure topology, which can be used to generate the expense
    for moving to the cloud and to verify whether the workloads are cloud-optimized.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您还将了解到迁移前主要包括评估和容量规划。评估是创建当前环境中工作负载清单的过程。使用此清单，我们将能够了解当前基础架构拓扑，这可以用于生成迁移到云的费用，并验证工作负载是否经过云优化。
- en: We will also cover a service called **Azure Migrate**, which can handle both
    the assessment and migration of our Linux workloads. As we progress, we will walk
    you through the assessment process and its relevance to migration.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还将介绍一个名为Azure Migrate的服务，它可以处理我们的Linux工作负载的评估和迁移。随着我们的进展，我们将带领您完成评估过程，并介绍其与迁移的相关性。
- en: 'Some of the key takeaways from this chapter are as follows:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的一些关键要点如下：
- en: Learning some of the popular workloads on Linux
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 学习一些在Linux上流行的工作负载
- en: Preparing for a migration project
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为迁移项目做准备
- en: Assessing the current environment
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 评估当前环境
- en: An introduction to assessment tools
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 评估工具简介
- en: Additionally, we have created a hands-on lab exercise for you that you can use
    to learn to assess an environment by doing it yourself.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，我们为您创建了一个实践实验，您可以通过自己动手来学习如何评估环境。
- en: Let's now get started with some of the popular workloads that are running on
    Linux.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们开始学习一些在Linux上运行的流行工作负载。
- en: Popular workloads on Linux
  id: totrans-13
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Linux上流行的工作负载
- en: 'In real-world scenarios, we only migrate servers with workloads running on
    them, as there is no point in migrating a VM with no services running to the cloud.
    Instead of doing that, you could deploy a new server in Azure directly and start
    developing on top of that. Let''s have a quick recap of the popular workloads
    on Linux. Some of these were already explained in *Chapter 1*, *Linux: History
    and future in the cloud*. Let''s recall the varieties of workloads, including
    application hosting (such as Java and LAMP), Search, and big data, and see how
    Azure supports these.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 在现实世界的场景中，我们只迁移运行负载的服务器，因为将没有运行服务的虚拟机迁移到云中是没有意义的。您可以直接在Azure中部署新服务器并开始在其上进行开发。让我们快速回顾一下Linux上流行的工作负载。其中一些在第1章“Linux：云中的历史和未来”中已经解释过。让我们回顾一下各种工作负载，包括应用程序托管（如Java和LAMP）、搜索和大数据，并看看Azure如何支持这些工作负载。
- en: LAMP
  id: totrans-15
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: LAMP
- en: 'The acronym LAMP stands for **Linux**, **Apache**, **MySQL**, **PHP/Perl/Python**.
    Typically, it is the first service stack that any Linux administrator would set
    up and is usually used to host dynamic and database-driven websites. In LAMP:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: LAMP是Linux，Apache，MySQL，PHP/Perl/Python的缩写。通常，这是任何Linux管理员都会设置的第一个服务堆栈，通常用于托管动态和数据库驱动的网站。在LAMP中：
- en: '**Linux** (**L**) refers to any Linux distribution; you can use Ubuntu or Fedora
    or CentOS or any other distribution.'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Linux（L）指的是任何Linux发行版；您可以使用Ubuntu或Fedora或CentOS或任何其他发行版。
- en: '**Apache** (**A**) is the web server that presents the data or web page to
    the user. In short, this is the front end that users will be interacting with.'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Apache（A）是向用户呈现数据或网页的Web服务器。简而言之，这是用户将要与之交互的前端。
- en: '**MySQL** (**M**) is the data store that will be used to save data.'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: MySQL（M）是将用于保存数据的数据存储。
- en: '**PHP/Perl/Python** (**P**) is the programming language used to develop the
    dynamic websites.'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PHP/Perl/Python（P）是用于开发动态网站的编程语言。
- en: Although we refer to it as a LAMP server installation, these are separate packages
    that you need to install individually, and it is not like installing CentOS on
    a computer. In certain cases, LAMP might not be the right choice; in other words,
    you may not require all the components of LAMP. Again, this entirely depends on
    what your application is. If you have a static website, which is created using
    HTML, CSS, and JS, then you do not need the MySQL or PHP functionality in your
    system. All you need is the Linux server and Apache web server running on top
    of that, which can deliver the static site to your clients.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管我们称之为LAMP服务器安装，但这些是您需要单独安装的独立软件包，并不像在计算机上安装CentOS那样简单。在某些情况下，LAMP可能不是正确的选择；换句话说，您可能不需要LAMP的所有组件。这完全取决于您的应用程序是什么。如果您有一个使用HTML、CSS和JS创建的静态网站，那么您的系统不需要MySQL或PHP功能。您只需要Linux服务器和在其上运行的Apache
    Web服务器，它可以向客户端提供静态网站。
- en: 'Depending on what components of the LAMP server you are using, the migration
    needs to be planned accordingly. For the purpose of the hands-on lab in this chapter,
    we will be using a LAMP server for assessment and dependency analysis. *Figure
    3.1* shows the architecture of the server. This architecture could be deployed
    on a hypervisor such as Hyper-V, VMWare ESXi, or on a physical server. In our
    lab, we are going to use Hyper-V as the virtualization platform:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 根据您使用的LAMP服务器的组件，迁移需要相应地进行规划。在本章的实验室中，我们将使用LAMP服务器进行评估和依赖分析。*图3.1*显示了服务器的架构。这种架构可以部署在Hypervisor上，如Hyper-V、VMWare
    ESXi，或者物理服务器上。在我们的实验室中，我们将使用Hyper-V作为虚拟化平台：
- en: '![The architecture of the LAMP server, which includes 4 layers: web server
    (Apache), Scripting (Perl/PHP/Python), Database (MySQL), and OS (Linux)](img/B17160_03_01.jpg)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![LAMP服务器的架构，包括4个层次：Web服务器（Apache），脚本（Perl/PHP/Python），数据库（MySQL），和操作系统（Linux）](img/B17160_03_01.jpg)'
- en: 'Figure 3.1: LAMP server'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.1：LAMP服务器
- en: '*Figure 3.1* shows the architecture to be used in the hands-on lab.'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: '*图3.1*显示了实验室中要使用的架构。'
- en: Database servers
  id: totrans-26
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 数据库服务器
- en: 'In LAMP, we saw how the Linux server hosts the MySQL database, which can act
    as a data store for the dynamic websites. MySQL is not the only database that
    can be deployed in Linux servers. There are a plethora of relational and non-relational
    databases that can be installed on Linux servers. Some of the open-source relational
    databases that can be deployed on Linux are listed below. Some of these are very
    popular and well known; others you may not have heard of before:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 在LAMP中，我们看到Linux服务器托管了MySQL数据库，它可以作为动态网站的数据存储。MySQL并不是唯一可以部署在Linux服务器上的数据库。有大量的关系型和非关系型数据库可以安装在Linux服务器上。下面列出了一些可以在Linux上部署的开源关系型数据库。其中一些非常流行和知名；其他可能是你以前没有听说过的：
- en: MySQL
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: MySQL
- en: MariaDB
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: MariaDB
- en: PostgreSQL
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PostgreSQL
- en: SQLite
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SQLite
- en: LucidDB
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: LucidDB
- en: H2
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: H2
- en: HSQLDB
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: HSQLDB
- en: Firebird
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Firebird
- en: Derby
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Derby
- en: CUBRID
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: CUBRID
- en: There are many other relational database products that are not open source,
    such as Microsoft SQL Server, Oracle Database 18c, MaxDB, and IBM's DB2.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 还有许多其他不开源的关系型数据库产品，如Microsoft SQL Server、Oracle Database 18c、MaxDB和IBM的DB2。
- en: Apart from the relational databases, Linux is also a popular platform for NoSQL
    databases. MongoDB, Couchbase, CouchDB, RavenDB, and OrientDB are examples of
    NoSQL databases.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 除了关系型数据库，Linux也是NoSQL数据库的流行平台。MongoDB、Couchbase、CouchDB、RavenDB和OrientDB是NoSQL数据库的例子。
- en: Azure has Database Migration Service available to migrate data from on-premises
    to managed **Platform-as-a-service** (**PaaS**) solutions. Regardless of all the
    benefits that are offered by PaaS services, there is a subset of customers who
    prefer to deploy these on **Infrastructure-as-a-service** (**IaaS**) servers and
    manage the administration fully. The migration process and technical details depend
    on the technologies chosen.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: Azure提供了数据库迁移服务，可将数据从本地迁移到托管的**平台即服务**（**PaaS**）解决方案。尽管PaaS服务提供了所有这些好处，但仍有一部分客户更喜欢在**基础设施即服务**（**IaaS**）服务器上部署这些服务并完全管理管理。迁移过程和技术细节取决于所选择的技术。
- en: In addition to IaaS, Azure offers a set of open-source databases as PaaS solutions.
    The advantage of using PaaS is that most of the infrastructure-related tasks,
    such as updating and patching, will be taken care of by Microsoft Azure. These
    PaaS solutions include Azure Database for PostgreSQL, Azure Database for MySQL,
    Azure Database for MariaDB, and Azure Cache for Redis.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 除了IaaS，Azure还提供一系列开源数据库作为PaaS解决方案。使用PaaS的优势在于，大多数基础设施相关的任务，如更新和打补丁，将由Microsoft
    Azure负责。这些PaaS解决方案包括Azure Database for PostgreSQL、Azure Database for MySQL、Azure
    Database for MariaDB和Azure Cache for Redis。
- en: HPC, clustering, and SAP
  id: totrans-42
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: HPC、集群和SAP
- en: 'In *Chapter 1*, *Linux: History and future in the cloud*, we looked at SAP,
    clustering, and HPC scenarios in Linux. To recap, **High Performance Computing**
    (**HPC**) is a collection of hundreds or even thousands of servers that are networked
    together. Each of the servers in the cluster is called a **node** and they work
    in parallel with one another to deliver higher processing speeds. The high combined
    processing speed contributes to higher performance.'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 在*第1章*，*Linux：云中的历史和未来*中，我们看到了Linux中的SAP、集群和HPC场景。回顾一下，**高性能计算**（**HPC**）是数百甚至数千台服务器组成的集合，它们通过网络连接在一起。集群中的每台服务器称为**节点**，它们相互并行工作，以提供更高的处理速度。高组合处理速度有助于提高性能。
- en: Microsoft Azure offers a variety of VM series that are specifically designed
    with HPC in mind and can be used to carry out compute-intensive tasks. These include
    VM series, H series, HC series, HB series, and HBv2 series.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 微软Azure提供了多种专为HPC设计的VM系列，可用于执行计算密集型任务。这些系列包括VM系列、H系列、HC系列、HB系列和HBv2系列。
- en: The main rationale behind customers migrating HPC to the cloud is the larger
    resource requirements. As these workloads are performing compute-intensive tasks,
    the amount of compute power needed is large and the infrastructure should be able
    to supply more servers if necessary. On-premises infrastructure will not be able
    to provide this liberty of scalability as the cloud does. The reality is that
    on-premises infrastructure is only capable of handling HPC clusters. Any scaling
    outside this safe zone is impossible to achieve. This is where Azure comes in.
    All you need to do is set up the scaling policy and Azure will take care of the
    rest.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 客户将HPC迁移到云的主要原因是更大的资源需求。由于这些工作负载执行计算密集型任务，所需的计算能力很大，基础设施应能够在必要时提供更多的服务器。本地基础设施无法像云那样提供这种可扩展性。事实上，本地基础设施只能处理HPC集群。在这个安全区域之外进行扩展是不可能实现的。这就是Azure的用武之地。您所需做的就是设置扩展策略，Azure会处理其余的事情。
- en: The interesting thing is that you can also implement hybrid HPC clusters where
    the head nodes will be placed on-premises and compute nodes are placed in Azure.
    As the compute nodes are in Azure, scaling can be executed based on requirements.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 有趣的是，您还可以实现混合HPC集群，其中头节点放置在本地，计算节点放置在Azure。由于计算节点在Azure中，可以根据需求执行扩展。
- en: Shared storage
  id: totrans-47
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 共享存储
- en: 'By way of a recap from *Chapter 1*, *Linux: History and future in the cloud*,
    let''s review the shared storage use case again. Linux is commonly used as a storage
    server and clients connect to the server via SMB or the NFS protocol. These servers
    can be used to store shared files and can be accessed by clients for several purposes.
    For example, you can have a shared file server to store all necessary installation
    packages of your internal applications. Your clients will be able to download
    these files from the shared storage and consume them.'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 通过回顾*第1章*，*Linux：云中的历史和未来*，让我们再次审视共享存储用例。Linux通常用作存储服务器，客户端通过SMB或NFS协议连接到服务器。这些服务器可用于存储共享文件，并且客户端可以出于多种目的访问它们。例如，您可以拥有一个共享文件服务器，用于存储所有内部应用程序的必要安装包。您的客户将能够从共享存储中下载这些文件并使用它们。
- en: Also, shared storage can be used to store files that require collaboration.
    Files uploaded to these drives can be used by collaborators depending on what
    level of permissions they have.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，共享存储可用于存储需要协作的文件。上传到这些驱动器的文件可以根据协作者的权限级别使用。
- en: In Microsoft Azure, Azure Files can be used as shared storage and the advantage
    here is that this is a completely managed service. If you are planning to deploy
    a VM and host a shared storage on top of that, as a customer, you have to manage
    many things, starting with OS management, updates, patches, and so on. However,
    in the case of Azure Files, the service is managed by Microsoft and because of
    the various redundancy levels offered by Azure Storage, you do not have to worry
    about implementing high availability yourself.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 在Microsoft Azure中，Azure文件可以用作共享存储，这里的优势在于这是一个完全托管的服务。如果您计划部署虚拟机并在其上托管共享存储，作为客户，您必须管理许多事情，从操作系统管理、更新、补丁等等开始。然而，在Azure文件的情况下，该服务由微软管理，由于Azure存储提供的各种冗余级别，您无需担心自己实现高可用性。
- en: Data from on-premises can be moved using command-line tools such as AzCopy and
    robocopy. AzCopy is optimized for best throughput for the copy job and can copy
    data directly between storage accounts. On the other hand, robocopy is useful
    if you would like to move from your on-premises storage to Azure File Storage,
    which is already mounted on the same server.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 本地数据可以使用命令行工具（如AzCopy和robocopy）进行迁移。AzCopy经过优化，可实现最佳的复制吞吐量，并且可以直接在存储账户之间复制数据。另一方面，如果您想要从本地存储迁移到已经挂载在同一服务器上的Azure文件存储，那么robocopy就非常有用。
- en: The aforementioned are the common scenarios; however, this does not mean that
    the use case scenarios or workload types are confined to these. Even for the same
    workload type, different customers will be using different components. For example,
    if we think about a database server, some customers will be using MySQL, while
    others will be using PostgreSQL.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 上述是常见的情景；然而，这并不意味着用例场景或工作负载类型局限于这些。即使对于相同的工作负载类型，不同的客户也会使用不同的组件。例如，如果我们考虑数据库服务器，一些客户将使用MySQL，而其他客户将使用PostgreSQL。
- en: 'Microsoft has a collection of documents, best practices, implementation guides,
    and tooling that are designed to accelerate your cloud adoption. This framework
    is called the Microsoft **Cloud Adoption Framework** (**CAF**) for Azure. Organizations
    are recommended to adopt this framework so that they can incorporate the best
    practices and tools from the very beginning of their cloud journey. The complete
    framework can be reviewed here: [https://docs.microsoft.com/azure/cloud-adoption-framework/](https://docs.microsoft.com/azure/cloud-adoption-framework/).'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 微软拥有一系列文件、最佳实践、实施指南和工具，旨在加速您的云采用过程。这个框架被称为微软Azure的**云采用框架**（**CAF**）。建议组织采用这个框架，以便他们可以从云旅程的一开始就融入最佳实践和工具。完整的框架可以在这里查看：[https://docs.microsoft.com/azure/cloud-adoption-framework/](https://docs.microsoft.com/azure/cloud-adoption-framework/)。
- en: 'The action plan we are going to follow throughout this book is from the *Migrate*
    section of the CAF. In this book, we will focus on the main steps for migrating
    your Linux workloads to Azure. This roadmap consists of four main steps as shown
    in *Figure 3.2*:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在本书中遵循CAF的*Migrate*部分中的行动计划。在本书中，我们将重点关注将Linux工作负载迁移到Azure的主要步骤。这个路线图包括四个主要步骤，如*图3.2*所示：
- en: '![Linux migration roadmap and plan for migrating your workloads to Azure](img/B17160_03_02.jpg)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![Linux迁移路线图和迁移工作负载到Azure的计划](img/B17160_03_02.jpg)'
- en: 'Figure 3.2: Linux migration roadmap'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.2：Linux迁移路线图
- en: As shown in the preceding diagram, we will start our migration journey with
    the first phase—*Assess*.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 如前图所示，我们将从第一阶段—*评估*开始我们的迁移之旅。
- en: Pre-project preparations
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 项目前的准备工作
- en: All projects should start with proper planning, and the same applies to cloud
    migrations as well. At this point, we have already gathered all the necessary
    technical information, but how do we know what kind of project team we need? Let's
    take a closer look.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 所有项目都应该从适当的规划开始，云迁移也是如此。在这一点上，我们已经收集了所有必要的技术信息，但我们如何知道需要什么样的项目团队？让我们仔细看看。
- en: Identifying relevant roles and responsibilities
  id: totrans-60
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 确定相关角色和责任
- en: Quite often, the responsibilities of on-premises applications are distributed
    to many internal stakeholders within different teams, and sometimes even different
    departments or companies.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 很多时候，基于本地应用程序的责任被分配给许多不同团队内的内部利益相关者，有时甚至是不同部门或公司。
- en: 'For example, a typical production environment for any business application
    requires several different roles in order to function:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，任何业务应用的典型生产环境需要多个不同的角色才能正常运行：
- en: Hardware administrator
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 硬件管理员
- en: Virtualization administrator
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 虚拟化管理员
- en: Storage administrator
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 存储管理员
- en: Network administrator
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络管理员
- en: Linux administrator
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Linux管理员
- en: Database administrator
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据库管理员
- en: Backup administrator
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 备份管理员
- en: 'When you add the internal and external users, the list grows:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 当您添加内部和外部用户时，列表会变得更长：
- en: Identity management administrator
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 身份管理管理员
- en: Connectivity administrator
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 连接管理员
- en: Application owners
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用程序所有者
- en: Business owners
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 业务所有者
- en: Application users
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用程序用户
- en: 'Now, let''s imagine you plan to move this system to Azure: Which of these people
    will you need to talk to in order to ensure that the work undertaken by the business
    users of this application is not disrupted? Let''s look at some of the key roles
    and why they are quite important in cloud migration projects.'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们想象一下，您计划将此系统迁移到Azure：为了确保业务用户进行的工作不会受到干扰，您需要与这些人中的哪些人交谈？让我们看看一些关键角色以及为什么他们在云迁移项目中非常重要。
- en: Network administrator
  id: totrans-77
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 网络管理员
- en: Applications running only in one datacenter and serving users in a single country
    are quite easy to migrate to the cloud compared to distributed applications and
    users across the globe.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 仅在一个数据中心运行并为单个国家的用户提供服务的应用程序相对于分布式应用程序和全球用户来说，迁移到云端相对容易。
- en: 'Let''s take an example (refer to *Figure 3.3*) company that has four offices
    in two continents and four countries. The European teams in Paris and London are
    using a datacenter in London, and the teams in Singapore and Bangkok are using
    a datacenter in Singapore:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们举个例子（参见*图3.3*），一家公司在两个洲和四个国家有四个办公室。巴黎和伦敦的欧洲团队使用伦敦的数据中心，新加坡和曼谷的团队使用新加坡的数据中心：
- en: '![An example of a clustered application in two continents, that is, Europe
    and Asia to show global network connectivity](img/B17160_03_03.jpg)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![一个跨洲集群应用的示例，即欧洲和亚洲，显示全球网络连接](img/B17160_03_03.jpg)'
- en: 'Figure 3.3: Clustered application in two continents'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.3：跨洲集群应用
- en: 'This scenario adds one obvious aspect of complexity to the total architecture:
    **global network connectivity**. From a project planning point of view, this means
    that you will need to add at least one international network provider company
    to the list of roles involved in the project.'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 这种情况给整体架构增加了一个明显的复杂性方面：全球网络连接。从项目规划的角度来看，这意味着您将需要至少添加一家国际网络提供商公司到参与项目的角色列表中。
- en: 'Typically, this kind of network structure can be moved to the cloud without
    any dramatic changes, but there is one special category of applications that will
    require lots of planning: financial applications. Traditionally, the financial
    industry has relied on dedicated internet connections with private links in their
    systems. This, in itself, is not an issue as Azure has various options for VPN
    and other private connections. The tricky part here is the use of the `Multicast`
    protocol in many trading applications used by the financial sector. Another industry
    that often uses the `Multicast` protocol is healthcare, especially hospitals.'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，这种网络结构可以在不做出重大改变的情况下迁移到云端，但有一类特殊的应用程序需要大量的规划：金融应用程序。传统上，金融行业依赖于系统中的专用互联网连接和私人链接。这本身并不是问题，因为Azure有各种VPN和其他私人连接的选项。这里的棘手之处在于金融行业使用的许多交易应用程序中使用了“多播”协议。另一个经常使用“多播”协议的行业是医疗保健，特别是医院。
- en: Note
  id: totrans-84
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 注意
- en: 'If you would like to learn more about use cases of Multicast in enterprise
    environments, you could look at the book *Multicast Design Solutions*, published
    by *Cisco Press*: [https://www.ciscopress.com/articles/article.asp?p=2928192&seqNum=5](https://www.ciscopress.com/articles/article.asp?p=2928192&seqNum=5).'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您想了解企业环境中多播用例的更多信息，您可以查看由Cisco Press出版的《多播设计解决方案》一书：[https://www.ciscopress.com/articles/article.asp?p=2928192&seqNum=5](https://www.ciscopress.com/articles/article.asp?p=2928192&seqNum=5)。
- en: What makes multicast worth mentioning in this section is the fact that public
    clouds do not support multicast networking. This makes it very challenging to
    migrate applications relying on multicast routing directly to Azure. Luckily,
    there are ways to work around the problem, for example, by using Multicast-to-Unicast
    gateways, but this approach will require re-architecting your network design and
    possibly applications.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 多播在这一部分值得一提的原因是公共云不支持多播网络。这使得直接迁移到Azure依赖多播路由的应用程序变得非常具有挑战性。幸运的是，有办法解决这个问题，例如使用多播到单播网关，但这种方法将需要重新设计您的网络设计，可能还需要重新设计应用程序。
- en: Another networking detail that requires careful planning is VPN and ExpressRoute
    connections. It is good to remember that it is not guaranteed that you may be
    able to move your connections from your current locations to public clouds easily.
    As those existing connections may be owned or operated by a third-party company,
    you need to make sure to involve them in your network planning sessions.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 需要仔细规划的另一个网络细节是VPN和ExpressRoute连接。需要记住的是，不能保证您可以轻松地将您当前位置的连接移动到公共云。因为这些现有连接可能由第三方公司拥有或运营，您需要确保在网络规划会议中涉及到他们。
- en: The point to understand here is that things such as networking may sound easy
    and straightforward, but it is one of the most difficult technological areas in
    public cloud migration, not only from the technology point of view, but also from
    a staffing and planning perspective, as there are so many stakeholders involved.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 这里需要理解的一点是，诸如网络之类的事情可能听起来很容易和直接，但它是公共云迁移中最困难的技术领域之一，不仅从技术角度来看，而且从人员配备和规划的角度来看，因为有很多利益相关者参与其中。
- en: If you could add just one networking person to your migration team, pick someone
    with experience of working with telecom providers and legacy networking technologies.
    This person is going to be more valuable than any cloud networking specialist.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您的迁移团队中只能增加一名网络人员，那么选择一个有与电信提供商和传统网络技术合作经验的人。这个人比任何云网络专家都更有价值。
- en: Let's now move on to the next key role.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们转向下一个关键角色。
- en: Linux administrator
  id: totrans-91
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Linux管理员
- en: 'In earlier chapters, we talked about the business aspects of Linux subscription
    management. It also has some technical details that need to be considered when
    planning to migrate to the public cloud. One of these details is update management:
    where will you get security patches and package updates when using Linux on Azure?'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 在早些章节中，我们谈到了Linux订阅管理的业务方面。在计划迁移到公共云时，还有一些需要考虑的技术细节。其中之一是更新管理：在Azure上使用Linux时，您将从何处获取安全补丁和软件包更新？
- en: Your Linux administrator is a key person here as they already know how the various
    package managers and subscription systems work in the current system. With some
    training, it is quite easy for them to understand what kind of changes need to
    be implemented when moving your systems to Azure.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，您的Linux管理员是一个关键人物，因为他们已经了解当前系统中各种软件包管理器和订阅系统的工作方式。通过一些培训，他们很容易就能理解在将系统迁移到Azure时需要实施的变化。
- en: Does having a Linux administrator in your migration project team sound obvious?
    In real life, we have seen migration projects where the project manager did not
    think this was necessary and had a Windows administrator trying to figure out
    how to migrate Linux to Azure. You can probably make a guess as to whether those
    projects were successful.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 在您的迁移项目团队中有一名Linux管理员听起来很明显吗？在现实生活中，我们曾见过一些迁移项目，项目经理认为这并不必要，让一名Windows管理员试图弄清楚如何将Linux迁移到Azure。你可能可以猜到这些项目是否成功。
- en: By Linux administrator, in this context, we mean someone who understands things
    such as filesystems, disk performance, SELinux, and subscription management if
    you are using a commercial Linux distribution.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，Linux管理员指的是那些了解文件系统、磁盘性能、SELinux和订阅管理等内容的人，如果您使用商业Linux发行版。
- en: With a bit of luck, the system you are planning to migrate is well maintained,
    all security patches and updates are applied, and everything is well documented.
    In real life however, this is rarely the case. It really helps to have someone
    in the team who has extensive experience of working with various Linux services
    and application stacks as they often can find the information that is missing
    from your documentation.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 幸运的话，您计划迁移的系统是良好维护的，所有安全补丁和更新都已应用，并且一切都有很好的文档记录。然而，在现实生活中，情况很少这样。在团队中有一位具有丰富的与各种Linux服务和应用程序堆栈合作经验的人员会非常有帮助，因为他们经常可以找到您的文档中缺失的信息。
- en: Let's take an example of having an RHEL server with SELinux turned off. Your
    application documentation does not mention anything about SELinux, and your security
    team says that in the public cloud, you will need to have SELinux enabled or they
    will not approve the migration. What could possibly go wrong? Everything, especially
    if the security team turns on **Enforcing Mode** in SELinux without first checking
    how the application behaves.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们举一个例子，假设有一台RHEL服务器，SELinux已关闭。您的应用程序文档中没有提到SELinux的任何内容，您的安全团队表示，在公共云中，您需要启用SELinux，否则他们将不批准迁移。可能会出现什么问题？一切都可能出错，尤其是如果安全团队在未事先检查应用程序行为的情况下，将SELinux的**强制模式**打开。
- en: We recommend that you familiarize yourself with all the relevant roles and personas
    related to the system you are planning to migrate to Azure and to investigate
    very carefully, following the pattern introduced here, to find out who you need
    to involve in your project team.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 我们建议您熟悉与您计划迁移到Azure的系统相关的所有相关角色和人物，并且非常仔细地调查，按照这里介绍的模式，找出您需要在项目团队中涉及的人员。
- en: Cloud governance and operations
  id: totrans-99
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 云治理和运营
- en: Microsoft has developed a CAF, a set of documentation, implementation guidance,
    best practices, and tools to help customers to start using Azure in the best way
    possible.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 微软已经开发了一个CAF，这是一套文档、实施指南、最佳实践和工具，帮助客户以最佳方式开始使用Azure。
- en: Note
  id: totrans-101
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 注意
- en: CAF is available for free to everyone at [https://docs.microsoft.com/azure/cloud-adoption-framework/](https://docs.microsoft.com/azure/cloud-adoption-framework/).
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: CAF对所有人免费开放，网址为[https://docs.microsoft.com/azure/cloud-adoption-framework/](https://docs.microsoft.com/azure/cloud-adoption-framework/)。
- en: Several sections from CAF are very important when learning about cloud migrations.
    For example, *Landing Zone* is a term you should be very familiar with going forward.
    In Azure, a landing zone means a set of pre-designed architecture or services
    where you can deploy your new or migrated resources, for example, VMs. An analogy
    in the software development world would be **Minimum Viable Product** (**MVP**).
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 从CAF中学习云迁移时，有几个部分非常重要。例如，*着陆区*是一个术语，您今后应该非常熟悉。在Azure中，着陆区指的是一组预先设计的架构或服务，您可以在其中部署新的或迁移的资源，例如虚拟机。在软件开发领域中的类比是**最小可行产品**（**MVP**）。
- en: Note
  id: totrans-104
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 注意
- en: 'Read more about Azure landing zones here: [https://docs.microsoft.com/azure/cloud-adoption-framework/ready/landing-zone/](https://docs.microsoft.com/azure/cloud-adoption-framework/ready/landing-zone/).'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里阅读有关Azure着陆区的更多信息：[https://docs.microsoft.com/azure/cloud-adoption-framework/ready/landing-zone/](https://docs.microsoft.com/azure/cloud-adoption-framework/ready/landing-zone/)。
- en: Another very important topic worth mentioning at this point is cloud operations,
    or **CloudOps**. In most cases, the team who develops a software solution will
    not be the same team that operates the cloud infrastructure – or landing zone
    – after the solution is deployed. Typically, cloud operations are managed by the
    company's IT department, or this work is outsourced to a specialized cloud management
    service provider.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一点上另一个非常重要的话题值得一提，就是云运营，或者**CloudOps**。在大多数情况下，开发软件解决方案的团队不会是部署解决方案后操作云基础设施
    - 或者着陆区域 - 的同一个团队。通常，云运营由公司的IT部门管理，或者这项工作被外包给专门的云管理服务提供商。
- en: The worst thing you can do is to have no one take care of the application or
    the infrastructure it is using after it is deployed. Someone needs to monitor
    the application and infrastructure performance, react to system alerts, ensure
    that security patches are applied, and, most likely, also run cost optimization
    processes every now and then.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 最糟糕的事情就是在部署后没有人来照顾应用程序或基础设施。有人需要监控应用程序和基础设施的性能，对系统警报做出反应，确保安全补丁被应用，并且很可能还要定期运行成本优化流程。
- en: 'The Microsoft CAF also covers these cloud management aspects, not only from
    a technology point of view, but also from the organization and business alignment
    angles. Read more about cloud management in the CAF here: [https://docs.microsoft.com/azure/cloud-adoption-framework/manage/](https://docs.microsoft.com/azure/cloud-adoption-framework/manage/).'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft CAF也涵盖了这些云管理方面，不仅从技术角度，还从组织和业务对齐的角度。在CAF中了解更多关于云管理的信息：[https://docs.microsoft.com/azure/cloud-adoption-framework/manage/](https://docs.microsoft.com/azure/cloud-adoption-framework/manage/)。
- en: To apply all the theory that we have learned so far in relation to discovery
    and assessment, let's go through a hands-on assessment lab. In this lab, you will
    see how Hyper-V VMs are discovered and assessed in Azure.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 为了应用我们迄今为止学到的所有关于发现和评估的理论，让我们进行一个实际评估实验室。在这个实验室中，您将看到如何在Azure中发现和评估Hyper-V VMs。
- en: Migration assessment
  id: totrans-110
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 迁移评估
- en: The migration journey continues by getting to know your current infrastructure.
    Assess is the first step in migration and, in this phase, we will be creating
    an inventory of our source. When we say *source*, this is not necessarily always
    on-premises. It could be other cloud vendors or platforms as well. The assessment
    tools available in Azure can be used to assess infrastructure in AWS, GCP, virtualized
    platform, and on-premises physical servers. The reason we need to perform the
    assessment is because we need to make sure what the migration of our workloads
    will look like post-migration.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 迁移旅程继续，了解您当前的基础设施。评估是迁移的第一步，在这个阶段，我们将创建我们源的清单。当我们说*源*时，这不一定总是在本地。它也可能是其他云供应商或平台。Azure中可用的评估工具可用于评估AWS、GCP、虚拟化平台和本地物理服务器的基础设施。我们需要进行评估的原因是因为我们需要确保迁移后我们的工作负载将会是什么样子。
- en: The assessment consists of four steps along with a set of tools. Let's proceed
    and learn about these steps.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 评估包括四个步骤以及一套工具。让我们继续学习这些步骤。
- en: Preparing a cloud migration plan
  id: totrans-113
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 准备云迁移计划
- en: As Benjamin Franklin said, "By failing to prepare, you are preparing to fail."
    At first glance, migration may seem uncomplicated; however, if we start without
    planning and in the absence of a proper strategy, then migration will fail. A
    failed migration would be an utter waste of time, energy, and productivity. You
    should begin your planning by setting objectives and priorities. Not every migration
    happens in one go; it will be done in phases. Usually, servers that are part of
    the same solution are migrated together rather than migrating random servers.
    Assume that you have a registration application, payroll application, ticketing
    application, and so on in your environment. In this case, you need to set some
    priorities and project deadlines, as in the payroll application is the priority
    and should be handled before the end of Q1\. This approach ensures that you are
    taking one step at a time and following a discipline, thereby ensuring a successful
    migration.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 正如本杰明·富兰克林所说，“未能准备，就是准备失败。”乍一看，迁移可能看起来并不复杂；然而，如果我们开始没有计划并且缺乏适当的策略，那么迁移将失败。失败的迁移将是时间、精力和生产力的彻底浪费。您应该通过设定目标和优先级来开始您的规划。并非所有迁移都一次性完成；它将分阶段完成。通常，属于同一个解决方案的服务器会一起迁移，而不是随机迁移服务器。假设您的环境中有注册应用程序、工资应用程序、售票应用程序等。在这种情况下，您需要设定一些优先级和项目截止日期，比如工资应用程序是优先级，并且应该在第一季度结束前处理。这种方法确保您一次只走一步，并遵循纪律，从而确保成功的迁移。
- en: The general rule of thumb is to prioritize applications with fewer dependencies;
    this will act as a catalyst for the migration. Once these are done, you can focus
    on the applications with a large number of dependencies. Moving those will give
    you more time to focus as the other applications were migrated earlier. This will
    also ensure more optimal use of your time. If you start with applications having
    a large number of dependencies, you may take longer to optimize and plan them.
    This will mean that the deadlines for other workloads will be extended further.
    Hence, it is better to complete the simple ones prior to handling the complex
    ones.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 一般的经验法则是优先考虑具有较少依赖关系的应用程序；这将作为迁移的催化剂。一旦这些完成，您可以专注于具有大量依赖关系的应用程序。移动这些将为您提供更多时间来专注，因为其他应用程序已经迁移。这也将确保更有效地利用您的时间。如果您从具有大量依赖关系的应用程序开始，您可能需要更长时间来优化和计划它们。这将意味着其他工作负载的截止日期将进一步延长。因此，最好在处理复杂的应用程序之前完成简单的应用程序。
- en: The next step is *Discovery and evaluation* this is where the full assessment
    takes place.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是*发现和评估*，这是完整评估发生的地方。
- en: Discovery and evaluation
  id: totrans-117
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 发现和评估
- en: Now that we have a plan in mind, we need to begin a full assessment of the environment.
    The outcome of these steps is to identify servers, applications, and services
    that are within the scope of migration.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们有了一个计划，我们需要开始对环境进行全面评估。这些步骤的结果是确定在迁移范围内的服务器、应用程序和服务。
- en: Next, we will be producing a full inventory and dependency map of servers and
    services that are within the scope of migration. The inventory and map help us
    to understand how these dependency services talk to one another. It is strongly
    recommended that you thoroughly investigate each application and its dependencies.
    A failure to assess or account for one of the dependencies will result in major
    problems post-migration.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将制作一个完整的服务器和服务清单和依赖关系图，这些都在迁移范围内。清单和图帮助我们了解这些依赖服务如何相互通信。强烈建议您彻底调查每个应用程序及其依赖关系。未能评估或考虑其中一个依赖关系将导致迁移后出现重大问题。
- en: 'Some of your applications may not be suitable for lift and shift migration,
    so you need to consider other options as well. For each application, you need
    to evaluate the following migration options:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 您的一些应用程序可能不适合搬迁和迁移，因此您还需要考虑其他选项。对于每个应用程序，您需要评估以下迁移选项：
- en: '**Rehost**: This is what we normally call "lift and shift." Basically, you
    are recreating your infrastructure in Azure. This requires minimal changes to
    your applications and so will have the least impact. An example of this is the
    replication of VMs to the cloud and then recreating them in Azure with the replicated
    disk.'
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**重新托管**：这通常被称为“搬迁和迁移”。基本上，您正在在Azure中重新创建您的基础设施。这对您的应用程序需要进行最少的更改，因此影响最小。一个例子是将虚拟机复制到云端，然后在Azure中使用复制的磁盘重新创建它们。'
- en: '**Refactor**: This is done when you are moving an IaaS server to a PaaS solution,
    for instance, from the VM to a PaaS solution such as Azure App Service. As we
    already know, moving to PaaS solutions reduces management tasks and, at the same
    time, helps to keep your costs low.'
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**重构**：当您将IaaS服务器迁移到PaaS解决方案时，例如，从VM迁移到Azure App Service等PaaS解决方案。正如我们已经知道的那样，迁移到PaaS解决方案可以减少管理任务，同时帮助降低成本。'
- en: '**Rearchitect**: In certain scenarios, you may need to re-architect some systems
    so that they can be successfully migrated. This architecture is mainly implemented
    to make the system cloud-native or to take advantage of newer paths such as containerization
    and microservices.'
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**重新架构**：在某些情况下，您可能需要重新架构一些系统，以便它们能够成功迁移。这种架构主要是为了使系统成为云原生，或者利用容器化和微服务等较新的路径。'
- en: '**Rebuild**: If the cost, time, and manpower required to rearchitect the application
    is more than starting from scratch, then you may rebuild the application. This
    approach helps the software development team to develop applications that can
    get the most out of the cloud.'
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**重建**：如果重新架构应用程序所需的成本、时间和人力资源高于从头开始，那么您可以重建应用程序。这种方法有助于软件开发团队开发能够充分利用云的应用程序。'
- en: '**Replace**: Sometimes, when you review the overall expenditure for rebuilding
    or rearchitecting the solution, it could be higher than buying third-party software.
    Assuming that you have your own CRM solution, the cost of rearchitecting or rebuilding
    is higher than buying a license for a similar SaaS product such as Dynamics 365.'
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**替换**：有时，当您审查重建或重新架构解决方案的整体支出时，可能会高于购买第三方软件。假设您有自己的CRM解决方案，重新架构或重建的成本高于购买类似的SaaS产品，如Dynamics
    365的许可证。'
- en: Once we have discovered the entire infrastructure, the next step in the pipeline
    is to involve the key stakeholders.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦我们发现了整个基础设施，管道中的下一步是让关键利益相关者参与进来。
- en: Involving key stakeholders
  id: totrans-127
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 让关键利益相关者参与进来
- en: In the discovery stage, we will have a complete picture of the infrastructure;
    however, the owners and superusers of the applications will also have a complete
    picture of the architecture of the application. These owners and other key stakeholders
    we mentioned earlier in this chapter will be able to share valuable suggestions
    and information regarding the architecture of the application, and incorporating
    these suggestions at this early stage of migration will enhance the probability
    of a successful migration.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 在发现阶段，我们将对基础设施有一个完整的了解；然而，应用程序的所有者和超级用户也将对应用程序的架构有一个完整的了解。在本章前面提到的这些所有者和其他关键利益相关者将能够分享有关应用程序架构的宝贵建议和信息，并在迁移的早期阶段纳入这些建议将增强成功迁移的可能性。
- en: It is better to involve the IT and business owners when it comes to filling
    any knowledge gaps. Also, these individuals will be useful in providing any guidance
    regarding the application architecture.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 在填补任何知识空白时最好让IT和业务所有者参与进来。此外，这些个人在提供有关应用程序架构的任何指导方面将非常有用。
- en: When it comes to migration, the CxO stakeholders, such as the CEO, CTO, and
    CIO, will always be interested in knowing the numbers, as in what the potential
    savings could be were we to move from on-premises to Azure. Let's see how we can
    estimate the cost.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 在迁移方面，CEO、CTO和CIO等CxO利益相关者总是对了解数字感兴趣，比如如果我们从本地迁移到Azure，潜在的节省可能是多少。让我们看看如何估算成本。
- en: Estimating the savings
  id: totrans-131
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 估算节省
- en: Many organizations adopt the migration path to save infrastructure costs. The
    agility and scalability of the cloud are major driving factors here. For example,
    if you buy a new server and this server is not utilized as expected, then this
    constitutes a loss for the company. In the cloud, however, things are different;
    if you do not need it, you can deallocate the server in seconds. Once deallocated,
    you do not have to worry about the server, and you are no longer paying for it.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 许多组织采用迁移路径来节省基础设施成本。云的灵活性和可伸缩性是主要的驱动因素。例如，如果你购买了一台新服务器，而这台服务器没有像预期那样被利用，那么这对公司来说就构成了损失。然而，在云中情况就不同了；如果你不需要它，你可以在几秒钟内取消分配服务器。一旦取消分配，你就不必再担心服务器，也不再为它付费。
- en: Before moving to the cloud, all organizations do the math and verify whether
    they are deriving any profit or savings as a result of this migration. Once you
    are done with the initial scoping, you can use the Azure **Total Cost of Ownership**
    (**TCO**) calculator to estimate the cost of running workloads in on-premises
    versus Azure.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 在转移到云端之前，所有组织都会进行计算，并验证他们是否因此迁移而获得任何利润或节省。完成初始范围确定后，您可以使用Azure TCO计算器估算在本地与Azure中运行工作负载的成本。
- en: Starting with the assessment to savings calculation, there are different tools
    involved in the process. Let's identify the tools available at the assessment
    stage.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 从评估到节省计算，整个过程涉及不同的工具。让我们识别一下评估阶段可用的工具。
- en: Identifying tools
  id: totrans-135
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 识别工具
- en: 'Tools play a vital role in the migration assessment. Without tools, it will
    be a cumbersome task to go to each of the servers that you have on-premises and
    create an inventory. Hence, tools increase productivity and accelerate migration.
    *Table 3.1* shows the list of tools that can be leveraged at the Assess stage:'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 工具在迁移评估中扮演着至关重要的角色。没有工具，要去到您在本地拥有的每台服务器并创建清单将是一项繁琐的任务。因此，工具可以提高生产力并加速迁移。表3.1显示了可以在评估阶段利用的工具列表：
- en: '![Assess tools for migrations with their purpose. It mainly includes tools
    like Azure Migrate, Service Map, and Azure TCO calculator.](img/B16170_Table_3.1.jpg)'
  id: totrans-137
  prefs: []
  type: TYPE_IMG
  zh: '![用于迁移的评估工具及其目的。主要包括Azure迁移、Service Map和Azure TCO计算器。](img/B16170_Table_3.1.jpg)'
- en: 'Table 3.1: Assessing tooling'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 表3.1：评估工具
- en: The aforementioned are the tools used at the Assess stage. Likewise, there are
    other tools leveraged at each stage (**Migrate**, **Optimize**, and **Secure &
    Manage**) in the adoption plan. Once we get to these stages, you will be acquainted
    with the tools used at each respective stage.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 上述是评估阶段使用的工具。同样，在采用计划的每个阶段（迁移、优化和安全管理）中都会使用其他工具。一旦我们到达这些阶段，您将熟悉每个阶段使用的工具。
- en: There are other third-party tools that can be used to perform an assessment.
    These are available in Azure Migrate and can be selected during project creation.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 还有其他第三方工具可用于执行评估。这些工具在Azure迁移中可用，并且可以在项目创建期间进行选择。
- en: Now that we are familiar with the steps that are part of the Assess stage, let's
    try to understand more about each of these tools and their usage.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经熟悉了评估阶段的步骤，让我们试着更多地了解每个工具及其使用情况。
- en: Assessing tooling
  id: totrans-142
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 评估工具
- en: As explained in the preceding *Identifying tools* section, the inevitable roles
    played by these tools make the assessment, mapping, and savings calculation easier.
    Now we will evaluate each of these tools and see how they are used and what the
    use case scenarios are. We will start with Azure Migrate.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的“识别工具”部分中已经解释了这些工具所扮演的不可避免的角色，这使得评估、映射和节省计算变得更加容易。现在我们将评估每个工具，看看它们是如何使用的，以及使用案例场景是什么。我们将从Azure迁移开始。
- en: Azure Migrate
  id: totrans-144
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Azure迁移
- en: The purpose of Azure Migrate is already evident from *Table 3.1*. With the help
    of Azure Migrate, we can run environment discovery without installing any agents
    on the servers. If we install agents, we can also perform dependency analysis,
    which can be used to generate service maps. The best part of the assessment is
    that all of this is natively integrated into the Azure portal and you do not have
    to be dependent on any other portals.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: Azure迁移的目的已经在“表3.1”中显而易见。借助Azure迁移，我们可以在服务器上不安装任何代理程序的情况下运行环境发现。如果我们安装代理程序，还可以执行依赖性分析，用于生成服务映射。评估的最佳部分是所有这些都是内置到Azure门户中的，您不必依赖于任何其他门户。
- en: Following the assessment, Azure Migrate generates an assessment report with
    the estimated cost, recommendations, and size of the VM that you will need to
    provision to match your on-premises configuration. Azure Migrate can discover
    and assess VMs deployed on Hyper-V and VMWare virtualization environments, as
    well as physical machines, while extending the list to other cloud vendors, too.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 在评估之后，Azure迁移会生成一份评估报告，其中包括估算成本、建议以及您需要配置以匹配本地配置的VM的大小。Azure迁移可以发现和评估部署在Hyper-V和VMWare虚拟化环境上的VM，以及物理机器，同时还可以扩展到其他云供应商的列表。
- en: To use Azure Migrate, we need to create an Azure Migrate project in the Azure
    portal. This project will be used to store the assessments that we perform. Also,
    the same project can be used when we are migrating our workload to Azure. Since
    we are in the assessment phase of the migration plan, this chapter will focus
    on the assessment tools available in the project. Once we reach the migration
    stage in *Chapter 4*, *Performing migration to Azure*, we will discuss the migration
    tools in the Azure Migrate project.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用Azure迁移，我们需要在Azure门户中创建一个Azure迁移项目。该项目将用于存储我们执行的评估。同样，当我们将工作负载迁移到Azure时，可以使用同一个项目。由于我们处于迁移计划的评估阶段，本章将重点介绍项目中可用的评估工具。一旦我们到达“第4章”中的迁移阶段，“执行迁移到Azure”，我们将讨论Azure迁移项目中的迁移工具。
- en: Let's now familiarize ourselves with the next tool, *Service Map*.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们熟悉下一个工具“Service Map”。
- en: Service Map
  id: totrans-149
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Service Map
- en: 'Service Map is another great tool that is part of Azure Monitor for server
    assessment that performs the dependency analysis for us. There are several advantages
    to leveraging dependency analysis and this boosts the overall migration confidence
    and success rate. Some of the advantages are as follows:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: Service Map是Azure监视器的另一个很棒的工具，用于服务器评估，它为我们执行依赖性分析。利用依赖性分析有几个优势，这提高了整体迁移的信心和成功率。其中一些优势如下：
- en: 'If you have a large number of servers to migrate, you can group them based
    on solutions as we know which server hosts which dependency:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您有大量要迁移的服务器，可以根据解决方案对它们进行分组，因为我们知道哪个服务器托管了哪些依赖关系：
- en: It helps in identifying the right machines in a solution and migrating them
    together.
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它有助于识别解决方案中的正确机器，并将它们一起迁移。
- en: It helps in understanding the topology of the environment.
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它有助于了解环境的拓扑结构。
- en: 'Makes sure that you migrate everything and that no server is excluded from
    migration due to human errors or negligence. There are two types of dependency
    analysis:'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 确保您迁移所有内容，不要因人为错误或疏忽而排除任何服务器。有两种类型的依赖分析：
- en: Agentless analysis
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 无代理分析
- en: Agent-based analysis
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基于代理的分析
- en: Let's take a closer look at each of these.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们更仔细地看看这些。
- en: Agentless analysis
  id: totrans-158
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 无代理分析
- en: As the name implies, no agents are installed on the VMs to perform the dependency
    analysis. The discovery or analysis is done by using the TCP connection data capture
    from machines. However, one thing to note here is that agentless analysis is in
    preview at the time of writing this book and is available for VMWare VMs only.
    Data polling and collection is accomplished with the help of vSphere APIs.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 正如其名称所示，VM上没有安装代理来执行依赖分析。发现或分析是通过使用来自计算机的TCP连接数据捕获来完成的。然而，这里需要注意的一点是，无代理分析在撰写本书时处于预览状态，仅适用于VMWare
    VM。数据的轮询和收集是通过vSphere API完成的。
- en: If we run a `netstat` command on our Linux or Windows computer, we will be able
    to see the connections, state of connections, source, destination, and ports of
    all the network connections made from our computer. As mentioned earlier, these
    TCP metrics are used for the logical grouping of servers.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们在Linux或Windows计算机上运行`netstat`命令，我们将能够看到从我们的计算机发出的所有网络连接的连接、连接状态、源、目的地和端口。如前所述，这些TCP指标用于对服务器进行逻辑分组。
- en: Once they are grouped, you can visualize the service map to understand the dependencies
    or you can export this as a CSV for your reference. The assessment tools include
    an Azure Migrate appliance, which is a VM that you need to deploy in your environment
    for discovery. This appliance will constantly gather data and push it to Azure
    for assessment.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦它们被分组，您可以可视化服务映射以了解依赖关系，或者您可以将其导出为CSV以供参考。评估工具包括Azure迁移设备，这是一个您需要在您的环境中部署以进行发现的VM。该设备将不断收集数据并将其推送到Azure进行评估。
- en: Agent-based analysis
  id: totrans-162
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 基于代理的分析
- en: As the name suggests, we need an agent to perform the dependency analysis in
    the case of agent-based analysis. This method of analysis utilizes the Service
    Map feature of Azure Monitor. We need to install the **Microsoft Monitoring Agent**
    (**MMA**), which is essentially for Windows machines, or OMS Agent (in the case
    of Linux machines), as well as the dependency agent. The data sent by these agents
    will be used to create the service map.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 正如其名称所示，在基于代理的分析中，我们需要一个代理来执行依赖分析。这种分析方法利用了Azure Monitor的Service Map功能。我们需要安装Microsoft
    Monitoring Agent（MMA），这主要用于Windows机器，或OMS Agent（对于Linux机器），以及依赖代理。这些代理发送的数据将用于创建服务映射。
- en: We need a Log Analytics workspace to ingest the logs and data pushed by these
    agents. One thing to note here is that the workspace should be deployed in a region
    where Service Map is supported.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要一个Log Analytics工作区来摄取这些代理推送的日志和数据。这里需要注意的一点是，工作区应该部署在支持Service Map的区域。
- en: Unlike agentless analysis, since we have the data ingested to the workspace,
    we can use **Kusto Query Language** (**KQL**) to analyze this data.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 与无代理分析不同，由于我们已将数据摄入到工作区，我们可以使用Kusto查询语言（KQL）来分析这些数据。
- en: When we move on to the hands-on exercise toward the end of this chapter, we
    will see how these agents are installed and are used for the dependency analysis.
    Dependency analysis can be very useful in the case of applications that have complex
    architectures. Next, we will talk about the Azure TCO calculator.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们在本章末尾进行实际操作时，我们将看到这些代理是如何安装并用于依赖分析的。依赖分析在具有复杂架构的应用程序的情况下非常有用。接下来，我们将讨论Azure
    TCO计算器。
- en: Azure TCO calculator
  id: totrans-167
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Azure TCO计算器
- en: '**Total Cost of Ownership** (**TCO**) is something every organization wishing
    to start their cloud adoption should consider. The **Return on Investment** (**ROI**)
    is evaluated using the TCO and the Azure TCO calculator helps in calculating the
    estimated cost of migration to Azure and forecasting your potential savings compared
    to your current costs.'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 总拥有成本（TCO）是每个希望开始云采用的组织都应该考虑的事情。投资回报（ROI）是使用TCO评估的，Azure TCO计算器有助于计算迁移到Azure的预计成本，并预测与当前成本相比的潜在节省。
- en: 'It is recommended that you perform a TCO calculation before migrating to the
    cloud, and there are some charges that you should consider while estimating the
    total cost of ownership. These costs include:'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 建议在迁移到云之前进行TCO计算，并且在估算总拥有成本时应考虑一些费用。这些费用包括：
- en: '**Migration costs**: Migration is expensive and requires the utmost attention.
    Failures in migration can lead to potential loss. Hence, you should account for
    the costs incurred in terms of resources, technicians, and the other hardware
    procured for migration in your TCO.'
  id: totrans-170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 迁移成本：迁移是昂贵的，需要最大的注意力。迁移中的失败可能导致潜在损失。因此，您应该考虑TCO中迁移所需的资源、技术人员和其他硬件的成本。
- en: '**Infrastructure costs**: You need to keep your on-premises infrastructure
    up and running until the migration is complete. At a certain stage during migration,
    you will be paying for the resources in the cloud as well as the on-premises datacenter.
    The changeover only happens once the migration is complete.'
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基础设施成本：您需要保持本地基础设施正常运行，直到迁移完成。在迁移的某个阶段，您将同时支付云中的资源和本地数据中心的费用。只有在迁移完成后才会发生转变。
- en: '**Risk factor**: Migration is not a simple task and there is always risk involved
    in this. If your application is not optimized for the cloud, or if you have not
    properly assessed your application prior to migration to the cloud, this could
    lead to potential failures. Examples include functionality and performance issues
    compared to the on-premises application. Once the resources are deployed in the
    cloud, you will be charged; if something goes wrong, you should have the budget
    to roll back the changes and perform a failover back to your on-premises application.
    As this is a calculated risk, we should include this in our TCO.'
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**风险因素**：迁移不是一项简单的任务，总是存在风险。如果你的应用程序没有针对云进行优化，或者在迁移到云之前没有正确评估你的应用程序，这可能会导致潜在的失败。例如，功能和性能问题与本地应用程序相比。一旦资源部署在云中，你将被收费；如果出现问题，你应该有预算来回滚更改并执行故障转移回本地应用程序。由于这是一个经过计算的风险，我们应该将其包括在我们的TCO中。'
- en: 'The Azure TCO calculator can be accessed from any browser by navigating to
    the following link: [https://azure.microsoft.com/pricing/tco/calculator/](https://azure.microsoft.com/pricing/tco/calculator/).'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: Azure TCO计算器可以通过任何浏览器访问，导航到以下链接：[https://azure.microsoft.com/pricing/tco/calculator/](https://azure.microsoft.com/pricing/tco/calculator/)。
- en: 'The TCO calculation involves a three-step process, starting with defining your
    workloads. In this first step, you will be inputting the details of your on-premises
    workloads and this will be plotted against the cloud cost to understand the savings.
    These workloads are categorized into servers, databases, storage, and networking
    components. For each category, there will be a set of information that you need
    to pass to the TCO calculator. As an example, if we take Servers, we will be asked
    to input the OS type, OS, license, processors, cores, and RAM, as shown in *Figure
    3.4*:'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: TCO计算涉及一个三步过程，从定义你的工作负载开始。在这第一步中，你将输入你的本地工作负载的详细信息，并将其与云成本对比以了解节省情况。这些工作负载被分类为服务器、数据库、存储和网络组件。对于每个类别，你需要传递一组信息给TCO计算器。例如，如果我们以服务器为例，我们将被要求输入操作系统类型、操作系统、许可证、处理器、核心和RAM，如*图3.4*所示：
- en: '![Defining server workloads using Azure TCO calculator](img/B17160_03_04.jpg)'
  id: totrans-175
  prefs: []
  type: TYPE_IMG
  zh: '![使用Azure TCO计算器定义服务器工作负载](img/B17160_03_04.jpg)'
- en: 'Figure 3.4: Defining server workloads'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.4：定义服务器工作负载
- en: After defining your workloads, you will reach the Adjust assumptions step. Here,
    we are going to share details about whether you already have licenses for these
    machines, followed by storage costs, IT labor costs, electricity costs, and so
    on. You need to tune these assumptions as per your on-premises data.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 在定义了你的工作负载之后，你将进入调整假设的步骤。在这里，我们将分享关于你是否已经拥有这些机器的许可证的细节，接着是存储成本、IT劳动力成本、电费成本等。你需要根据你的本地数据调整这些假设。
- en: 'Once you have stated the assumptions, the TCO calculator will give the potential
    savings based on the data you have shared. Here, for example, based on the workloads
    and assumptions, we are getting estimated cost savings of $18,472 over 1 year.
    *Figure 3.5* shows a sample output from the TCO calculator:'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你陈述了假设，TCO计算器将根据你分享的数据给出潜在的节省。例如，基于工作负载和假设，我们得到了一年内约为18,472美元的预估成本节省。*图3.5*显示了TCO计算器的一个示例输出：
- en: '![Savings calculated using Azure TCO calculator](img/B17160_03_05.jpg)'
  id: totrans-179
  prefs: []
  type: TYPE_IMG
  zh: '![使用Azure TCO计算器计算的节省](img/B17160_03_05.jpg)'
- en: 'Figure 3.5: Savings calculated using the Azure TCO calculator'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.5：使用Azure TCO计算器计算的节省
- en: There are other graphs (category-wise breakdown) that are available in the TCO
    calculator and the best part is that you can download this report and it can be
    shared with stakeholders for review.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: TCO计算器中还有其他图表（按类别分解），最好的部分是你可以下载这份报告，并与利益相关者共享以供审阅。
- en: With that, we have covered the main tools that are used during the **Assess**
    phase shown in *Table 3.1*). As mentioned earlier, there are other tools that
    are used in other phases in the adoption plan. We will cover the **Migrate & Modernize**
    stage in *Chapter 4*, *Performing migration to Azure*, and the **Optimize** and
    **Secure & Manage** stages in *Chapter 5*, *Operating Linux on Azure*.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 有了这些，我们已经涵盖了在*表3.1*中显示的**评估**阶段中使用的主要工具。如前所述，在采用计划的其他阶段中使用了其他工具。我们将在*第4章*中涵盖**迁移和现代化**阶段，*执行迁移到Azure*，以及在*第5章*中涵盖**优化**和**安全和管理**阶段，*在Azure上操作Linux*。
- en: Now that we have gathered all the necessary details of our application and infrastructure,
    we are ready to create the migration project plan.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经收集了我们的应用程序和基础设施的所有必要细节，我们准备创建迁移项目计划。
- en: Hands-on assess lab
  id: totrans-184
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 实践评估实验
- en: 'So far, we have discussed different planning strategies and assessment methodologies.
    In this hands-on lab, we are going to assess servers that are running in a Hyper-V
    environment. Here is the architecture of the environment that we are going to
    assess:'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经讨论了不同的规划策略和评估方法。在这个实践实验中，我们将评估在Hyper-V环境中运行的服务器。这是我们将要评估的环境的架构：
- en: '![The architecture of the environment with Hyper-V host, and two VMs for assessment](img/B17160_03_06.jpg)'
  id: totrans-186
  prefs: []
  type: TYPE_IMG
  zh: '![具有Hyper-V主机和两个用于评估的VM的环境的架构](img/B17160_03_06.jpg)'
- en: 'Figure 3.6: Environment for assessment'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.6：评估环境
- en: In *Figure 3.6*, we can have a Hyper-V host, and two VMs are deployed on it.
    One VM (VM - 01) runs Ubuntu and has a LAMP server set up on it. The second VM
    (VM - 02) is a CentOS VM that is running a static website using Apache Webserver.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 在*图3.6*中，我们可以有一个Hyper-V主机，并且在其上部署了两个VM。一个VM（VM-01）运行Ubuntu，并在其上设置了LAMP服务器。第二个VM（VM-02）是一个运行静态网站使用Apache
    Web服务器的CentOS VM。
- en: Our goal is to assess this environment and create an assessment report along
    with a dependency analysis.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的目标是评估这个环境，并创建一个评估报告以及一个依赖分析。
- en: As mentioned earlier in *Assessing tooling* section, we need to create an Azure
    Migrate project to kick off the assessment process.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 如前面在*评估工具*部分提到的，我们需要创建一个Azure迁移项目来启动评估过程。
- en: Prerequisites
  id: totrans-191
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 先决条件
- en: 'Some of the prerequisites for this hands-on lab are as follows:'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 这个实践实验的一些先决条件如下：
- en: You should have at least contributor permission on your Azure subscription.
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您应该至少在Azure订阅上拥有贡献者权限。
- en: Users should have permissions to register Azure AD apps or else should have
    an application developer role in Azure AD.
  id: totrans-194
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户应具有注册Azure AD应用程序的权限，否则应在Azure AD中具有应用程序开发人员角色。
- en: Setting up the Azure Migrate project
  id: totrans-195
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设置Azure迁移项目
- en: 'The first step in using Azure Migrate starts with the creation of the Azure
    Migrate project. This service is used to store the metadata that is captured during
    the assessment and migration phases. The Azure Migrate project provides a centralized
    platform to keep a tab of all your assessments and migrations to Azure. Let''s
    navigate to the Azure portal and create an Azure Migrate project:'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Azure迁移的第一步是创建Azure迁移项目。该服务用于存储在评估和迁移阶段捕获的元数据。Azure迁移项目提供了一个集中的平台，用于跟踪所有您的评估和迁移到Azure的情况。让我们导航到Azure门户并创建一个Azure迁移项目：
- en: To create an Azure Migrate project, navigate to All services in the Azure portal
    and search for Azure Migrate, as shown in *Figure 3.7*:![Searching for Azure Migrate
    in the top-right search box](img/B17160_03_07.jpg)
  id: totrans-197
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要创建Azure迁移项目，请导航到Azure门户中的所有服务，并搜索Azure迁移，如*图3.7*所示：![在右上角搜索框中搜索Azure迁移](img/B17160_03_07.jpg)
- en: 'Figure 3.7: Searching for Azure Migrate'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.7：搜索Azure迁移
- en: Once you are in the Azure Migrate blade, you will see different migration options
    for servers, databases, and so on.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦进入Azure迁移刀片，您将看到不同的服务器、数据库等迁移选项。
- en: Since we are assessing servers, you need to choose Assess and migrate servers
    or you can click on Servers from the Azure Migrate blade, as shown in *Figure
    3.8*:![Starting an Azure Migrate project by clicking on the Assess and migrate
    servers button](img/B17160_03_08.jpg)
  id: totrans-200
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 由于我们正在评估服务器，您需要选择评估和迁移服务器，或者您可以从Azure迁移刀片上单击服务器，如*图3.8*所示：![通过单击评估和迁移服务器按钮启动Azure迁移项目](img/B17160_03_08.jpg)
- en: 'Figure 3.8: Starting the Azure Migrate project'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.8：启动Azure迁移项目
- en: In the next window, you will get the Create project option and, once selected,
    you need to input basic details such as Subscription, Resource group, Migrate
    project, and Geography, as shown in *Figure 3.9*:![Creating an Azure Migrate project](img/B17160_03_09.jpg)
  id: totrans-202
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个窗口中，您将获得创建项目选项，一旦选择，您需要输入基本详细信息，如订阅、资源组、迁移项目和地理位置，如*图3.9*所示：![创建Azure迁移项目](img/B17160_03_09.jpg)
- en: 'Figure 3.9: Creating an Azure Migrate project'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.9：创建Azure迁移项目
- en: 'Once the project is created, we will be presented with the Assessment tools
    and Migration tools options for servers. Since we are currently in the Assess
    phase, we will explore Assessment tools, as shown in *Figure 3.10*:![Azure Migrate:
    Server assessment tools - Discover and Assess](img/B17160_03_10.jpg)'
  id: totrans-204
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建项目后，我们将为服务器提供评估工具和迁移工具选项。由于我们目前处于评估阶段，我们将探索评估工具，如*图3.10*所示：![Azure迁移：服务器评估工具-发现和评估](img/B17160_03_10.jpg)
- en: 'Figure 3.10: Server Assessment tools'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.10：服务器评估工具
- en: The next step is to initiate the discovery of servers in our Hyper-V environment
    so that we can create the assessment. We will be using the Discover option shown
    in *Figure 3.10* to start the discovery process.
  id: totrans-206
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一步是启动我们的Hyper-V环境中服务器的发现，以便我们可以创建评估。我们将使用*图3.10*中显示的发现选项来启动发现过程。
- en: Now, we must select the platform where our servers are currently deployed. You
    will get an option to choose from VMWare vSphere Hypervisor, Hyper-V, and Physical
    or others (AWS, GCP, and so on). Since our VMs are deployed on Hyper-V, let's
    select this option, as shown in *Figure 3.11*.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们必须选择我们的服务器当前部署的平台。您将有选择从VMWare vSphere Hypervisor、Hyper-V和物理或其他（AWS、GCP等）中选择的选项。由于我们的VM部署在Hyper-V上，让我们选择此选项，如*图3.11*所示。
- en: To run the discovery against our on-premises infrastructure, we need to deploy
    a new VM to our on-premises environment. This VM is called the Azure Migrate appliance,
    which will discover servers and send that information to Azure Migrate.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 要对我们的本地基础架构运行发现，我们需要在本地环境部署一个新的VM。这个VM被称为Azure迁移设备，它将发现服务器并将信息发送到Azure迁移。
- en: We need to give a name to the migrate appliance and generate a key, as shown
    in *Figure 3.11*. This key is later used to set up the migrate appliance on our
    Hyper-V host. You need to copy this key and keep this handy:![Generating an Azure
    Migrate project key for an appliance](img/B17160_03_11.jpg)
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们需要为迁移设备命名并生成一个密钥，如*图3.11*所示。稍后将使用此密钥在我们的Hyper-V主机上设置迁移设备。您需要复制此密钥并保持方便：![为设备生成Azure迁移项目密钥](img/B17160_03_11.jpg)
- en: 'Figure 3.11: Generating the Azure Migrate project key'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.11：生成Azure迁移项目密钥
- en: After creating the key, we need to download the Azure Migrate appliance. Basically,
    there are two ways in which to deploy the appliance, as shown in *Figure 3.11*.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 创建密钥后，我们需要下载Azure迁移设备。基本上，有两种部署设备的方式，如*图3.11*所示。
- en: You can download the VHD file and deploy it as a new VM in your Hyper-V environment
    or you can download a zip file that will contain the PowerShell scripts that can
    convert an existing VM to an Azure Migrate appliance. If you prefer to use an
    existing server as Migrate Appliance, Microsoft recommends using Windows Server
    2016 with at least 8vCPUs and 16 GB of RAM.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以下载VHD文件并将其部署为Hyper-V环境中的新VM，或者您可以下载一个包含PowerShell脚本的zip文件，该脚本可以将现有VM转换为Azure迁移设备。如果您希望使用现有服务器作为迁移设备，Microsoft建议使用至少8个vCPU和16GB
    RAM的Windows Server 2016。
- en: 'In this hands-on lab, we will be downloading the VHD directly to our Hyper-V
    Host and creating a new VM. Using the VHD file, we need to create a new VM in
    our Hyper-V server using the following steps:'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个实验中，我们将直接在我们的Hyper-V主机上下载VHD并创建一个新的VM。使用VHD文件，我们需要在我们的Hyper-V服务器上创建一个新的VM，具体步骤如下：
- en: Open Hyper-V Manager, on the right-hand side. From Actions, select Import Virtual
    Machine.
  id: totrans-214
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开Hyper-V管理器，在右侧。从操作中，选择导入虚拟机。
- en: You will get the Before you begin page with the set of instructions. Click Next.
  id: totrans-215
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您将获得开始之前页面和一系列说明。点击下一步。
- en: Using the Locate folder, browse the folder where you have extracted the VHD
    and hit Next.
  id: totrans-216
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用“定位文件夹”，浏览您提取VHD的文件夹，并点击下一步。
- en: Select Virtual Machine and then click on Next.
  id: totrans-217
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择虚拟机，然后点击下一步。
- en: Select Copy the virtual machine (create a new unique ID) as Import type and
    then hit Next.
  id: totrans-218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择复制虚拟机（创建新的唯一ID）作为导入类型，然后点击下一步。
- en: Leave Destination and Storage as their default settings and then click Next.
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将目的地和存储保留为默认设置，然后点击下一步。
- en: Select the appropriate virtual switch that the VM will be using to connect to
    the network and click Next.
  id: totrans-220
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择VM将用于连接到网络的适当虚拟交换机，然后点击下一步。
- en: Finally, in the Summary page, review the configuration we selected and click
    Finish to initiate the VM import.
  id: totrans-221
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，在摘要页面中，审查我们选择的配置，并点击完成以启动VM导入。
- en: After a period of time, you'll be able to see the new VM in your Hyper-V Manager.
  id: totrans-222
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一段时间后，您将能够在Hyper-V管理器中看到新的VM。
- en: We now have our VM deployed in our environment. Now, it is time to start the
    discovery and send the information to the Azure Migrate project. Let's set up
    the appliance to push the data to Azure.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们的VM已经部署到我们的环境中。现在是时候开始发现并将信息发送到Azure迁移项目了。让我们设置设备将数据推送到Azure。
- en: Setting up and registering the Azure Migrate appliance
  id: totrans-224
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设置和注册Azure迁移设备
- en: The VM is deployed to the Hyper-V environment and now must configure it and
    connect to our Azure Migration project. We need to provide the password for the
    Windows Server and after that, we need to log in just like we do for any Windows
    server.
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: VM部署到Hyper-V环境，现在必须配置它并连接到我们的Azure迁移项目。我们需要为Windows Server提供密码，然后我们需要登录，就像我们为任何Windows服务器做的那样。
- en: 'You can connect to the Migrate appliance by going to `https://appliance name`
    or `IP address:44368`. If you open the Edge browser on the desktop, you will be
    redirected to the Appliance Configuration Manager page. The next step is to register
    the appliance with the project, as outlined in the following steps:'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过转到`https://appliance name`或`IP address:44368`来连接到迁移设备。如果您在桌面上打开Edge浏览器，您将被重定向到设备配置管理器页面。下一步是根据以下步骤注册设备到项目中：
- en: We must agree to the terms and conditions to start using the Azure Migrate appliance.
  id: totrans-227
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们必须同意条款和条件才能开始使用Azure迁移设备。
- en: The prerequisite check will be done automatically and if there is any new update,
    the system will install it automatically, as shown in *Figure 3.12*:![Prerequisite
    checks such as connectivity, time, and latest updates in the Migrate appliance](img/B17160_03_12.jpg)
  id: totrans-228
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 先决条件检查将自动完成，如果有任何新更新，系统将自动安装，如*图3.12*所示：
- en: 'Figure 3.12: Prerequisite check in the Migrate appliance'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.12：迁移设备中的先决条件检查
- en: The next step is to input the Migrate appliance key, which we generated from
    the Azure portal when we initiated the Discover process (*Figure 3.11*).
  id: totrans-230
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一步是输入我们从Azure门户生成的迁移设备密钥，当我们启动发现过程时(*图3.11*)。
- en: 'The key needs to the entered into the textbox in order for the system to validate
    the key and register the appliance. Once the validation is done, you will be prompted
    with a device code to log in to Azure. We need to use Copy code & Login to authenticate
    with Azure, as shown in *Figure 3.13*:'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 密钥需要输入到文本框中，以便系统验证密钥并注册设备。验证完成后，您将收到一个设备代码，用于登录到Azure。我们需要使用“复制代码和登录”来与Azure进行身份验证，如*图3.13*所示：
- en: '![Registering an Azure Migrate appliance](img/B17160_03_13.jpg)'
  id: totrans-232
  prefs: []
  type: TYPE_IMG
  zh: '![注册Azure迁移设备](img/B17160_03_13.jpg)'
- en: 'Figure 3.13: Registering an Azure Migrate appliance'
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.13：注册Azure迁移设备
- en: In the new tab, you can sign in using the credentials that you use to sign into
    the Azure portal, and if the authentication is successful, you will be asked to
    close the newly opened tab. Also, as shown in *Figure 3.14*, you will be able
    to confirm from the Azure Migrate appliance screen whether the appliance was successful:![Successful
    registration](img/B17160_03_14.jpg)
  id: totrans-234
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在新标签页中，您可以使用登录到Azure门户的凭据登录，如果验证成功，您将被要求关闭新打开的标签页。此外，如*图3.14*所示，您将能够从Azure迁移设备屏幕上确认设备是否注册成功：![注册成功](img/B17160_03_14.jpg)
- en: 'Figure 3.14: Successful registration'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.14：注册成功
- en: The next step is to provide the credentials for the Hyper-V cluster to the Azure
    Migrate appliance so that it can run Discovery. You can use Add credentials and
    enter the credentials for your Hyper-V host as shown in *Figure 3.15* and save
    it:![Adding Hyper-V credentials](img/B17160_03_15.jpg)
  id: totrans-236
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一步是向Azure迁移设备提供Hyper-V集群的凭据，以便它可以运行Discovery。您可以使用“添加凭据”并输入您的Hyper-V主机的凭据，如*图3.15*所示，并保存它：![添加Hyper-V凭据](img/B17160_03_15.jpg)
- en: 'Figure 3.15: Adding Hyper-V credentials'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.15：添加Hyper-V凭据
- en: Since we have stored the credentials, we will be using the credentials to connect
    to our Hyper-V host. You can add multiple Hyper-V clusters in a single shot, or
    you can import the list as a CSV. In our case, we have a single server, and we
    need to provide the IP address for the server and select the credentials created
    in *Step 5*, as shown in *Figure 3.16*:![Adding Hyper-V cluster details](img/B17160_03_16.jpg)
  id: totrans-238
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 由于我们已经存储了凭据，我们将使用这些凭据连接到我们的Hyper-V主机。您可以一次添加多个Hyper-V集群，或者您可以将列表导入为CSV。在我们的情况下，我们有一个单独的服务器，我们需要为该服务器提供IP地址，并选择*步骤5*中创建的凭据，如*图3.16*所示：![添加Hyper-V集群详细信息](img/B17160_03_16.jpg)
- en: 'Figure 3.16: Adding Hyper-V cluster details'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.16：添加Hyper-V集群详细信息
- en: The Migrate appliance will use the credentials against the IP address we have
    entered to perform validation. If the credentials are correct, you will be able
    to see the successful message, as shown in *Figure 3.17*:![Successful connection
    to the host](img/B17160_03_17.jpg)
  id: totrans-240
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 迁移设备将使用我们输入的凭据针对IP地址执行验证。如果凭据正确，您将能够看到成功消息，如*图3.17*所示：![成功连接到主机](img/B17160_03_17.jpg)
- en: 'Figure 3.17: Successful connection to the host'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.17：成功连接到主机
- en: Now that we have completed the configuration of the appliance, we can start
    the discovery using the Start Discovery option. The discovery process may take
    some time and the discovered number will be reflected on the Azure portal.
  id: totrans-242
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们已经完成了设备的配置，可以使用“开始发现”选项开始发现过程。发现过程可能需要一些时间，发现的数量将在Azure门户上反映出来。
- en: Note
  id: totrans-243
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 注意
- en: Since the appliance uses the FQDN for connection, if the name of the host cannot
    be resolved by DNS, you will not be able to discover any VMs and the revalidation
    would fail. The workaround is to modify the host file and add the FQDN and IP
    address.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 由于设备使用FQDN进行连接，如果主机名无法通过DNS解析，您将无法发现任何虚拟机，并且重新验证将失败。解决方法是修改主机文件并添加FQDN和IP地址。
- en: The next step in our process is to verify from the Azure portal whether the
    discovery was successful and the appliance was able to discover all the VMs. In
    the following section, we will see how the discovery can be verified from the
    portal.
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 我们流程中的下一步是从Azure门户验证发现是否成功，设备是否能够发现所有虚拟机。在接下来的部分中，我们将看到如何从门户中验证发现过程。
- en: Verifying discovered VMs in the portal
  id: totrans-246
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 在门户中验证已发现的虚拟机
- en: 'Once the discovery process is complete, you will be able to see the confirmation
    from the Migrate appliance. Now, it is time to check in the portal to see whether
    the appliance was able to push the information to our Azure Migrate project. You
    can verify this using the steps mentioned here:'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 发现过程完成后，您将能够从迁移设备中看到确认信息。现在，是时候在门户中检查设备是否能够将信息推送到我们的Azure迁移项目了。您可以使用以下步骤进行验证：
- en: Open the Azure Migrate dashboard.
  id: totrans-248
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开Azure迁移仪表板。
- en: 'In Azure Migrate | Servers | Azure Migrate: Server Assessment page, click the
    icon that displays the count for Discovered servers.'
  id: totrans-249
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在Azure迁移 | 服务器 | Azure迁移：服务器评估页面中，单击显示已发现服务器数量的图标。
- en: 'In *Figure 3.18*, you can see that discovery was successful and the Azure portal
    indicates that three VMs have been discovered:'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 在图3.18中，您可以看到发现成功，并且Azure门户指示已发现三个虚拟机：
- en: '![Verifying discovered servers](img/B17160_03_18.jpg)'
  id: totrans-251
  prefs: []
  type: TYPE_IMG
  zh: '![验证已发现的服务器](img/B17160_03_18.jpg)'
- en: 'Figure 3.18: Verifying discovered servers'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.18：验证已发现的服务器
- en: Here, we see three VMs because the discovery process included the Migrate appliance
    as well. The next process is to run the assessment on the discovered servers,
    and this can be done by clicking on the Assess option next to Discover.
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 这里我们看到三个虚拟机，因为发现过程也包括了迁移设备。下一个步骤是对已发现的服务器运行评估，可以通过单击“发现”旁边的“评估”选项来完成。
- en: Running an assessment
  id: totrans-254
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 运行评估
- en: 'As mentioned in the *Migration Assessment* section, the assessment creates
    the inventory of your on-premises servers. Run an assessment as follows:'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 如“迁移评估”部分所述，评估会创建您的本地服务器清单。按照以下步骤运行评估：
- en: 'Select the Assess option from Azure Migrate: Server Assessment, as shown in
    *Figure 3.19*:![Starting assessment](img/B17160_03_19.jpg)'
  id: totrans-256
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从Azure迁移：服务器评估中选择“评估”选项，如图3.19所示：![开始评估](img/B17160_03_19.jpg)
- en: 'Figure 3.19: Starting an assessment'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.19：开始评估
- en: In Assess servers | Assessment Type, select the type as `Azure VM` and, in Discovery
    source, select `Machines discovered from Azure Migrate appliance`. You also have
    the option to upload your inventory as a CSV file and perform an assessment on
    that. The Assessment properties section will be populated automatically, and you
    can edit them using the Edit button if required, as shown in *Figure 3.20*:![Setting
    up the basics](img/B17160_03_20.jpg)
  id: totrans-258
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在评估服务器 | 评估类型中，选择类型为“Azure VM”，在发现源中，选择“从Azure迁移设备发现的机器”。您还可以选择上传您的清单作为CSV文件，并对其进行评估。评估属性部分将自动填充，并且您可以使用“编辑”按钮进行编辑（如果需要），如图3.20所示：![设置基本信息](img/B17160_03_20.jpg)
- en: 'Figure 3.20: Setting up the basics'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.20：设置基本信息
- en: In the Assessment properties edit window, you will have the option to customize
    TARGET PROPERTIES, VM SIZE, and PRICING. These factors are used to run the assessment
    and generate the report. Also, you can include the Azure Hybrid Benefit in your
    calculation to exclude the license cost if you already have licenses purchased.
    You can update each of these factors as per your requirements. A sample configuration
    has been shown in *Figure 3.21*:![Assessment properties](img/B17160_03_21.jpg)
  id: totrans-260
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在评估属性编辑窗口中，您可以自定义目标属性、虚拟机大小和定价。这些因素用于运行评估和生成报告。此外，您可以在计算中包含Azure混合权益，以排除许可证成本（如果您已经购买了许可证）。您可以根据自己的需求更新这些因素。图3.21中显示了一个示例配置：![评估属性](img/B17160_03_21.jpg)
- en: 'Figure 3.21: Assessment properties'
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.21：评估属性
- en: Next, you can provide a name for your assessment and a name for the group of
    servers. Grouping helps you to assess a set of servers together. Finally, we will
    select the servers that need to be assigned and add them to the group, as shown
    in *Figure 3.22*:![Selecting servers to assess](img/B17160_03_22.jpg)
  id: totrans-262
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，您可以为评估和服务器组提供名称。分组可以帮助您一起评估一组服务器。最后，我们将选择需要分配的服务器并将它们添加到组中，如图3.22所示：![选择要评估的服务器](img/B17160_03_22.jpg)
- en: 'Figure 3.22: Selecting servers to assess'
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.22：选择要评估的服务器
- en: The final step is to create the assessment, which will create the group and
    run the assessment on the grouped servers.
  id: totrans-264
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后一步是创建评估，这将创建组并对分组的服务器运行评估。
- en: 'If you refresh Assessment tools, you can see that Groups and Assessments have
    the value of 1, as visible in *Figure 3.23*:'
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 如果刷新评估工具，您会看到组和评估的值为1，如图3.23中所示：
- en: '![Verifying assessment from the Azure portal](img/B17160_03_23.jpg)'
  id: totrans-266
  prefs: []
  type: TYPE_IMG
  zh: '![从Azure门户验证评估](img/B17160_03_23.jpg)'
- en: 'Figure 3.23: Verifying assessment from the Azure portal'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.23：从Azure门户验证评估
- en: Note
  id: totrans-268
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 注意
- en: If the data is not visible, try using the **Refresh** button and wait for the
    system to refresh.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 如果数据不可见，请尝试使用“刷新”按钮，并等待系统刷新。
- en: Now we have the assessment, and it is time to review it.
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经有了评估，是时候进行审核了。
- en: Reviewing the assessment
  id: totrans-271
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 审核评估
- en: 'An assessment primarily talks about three main factors:'
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 评估主要涉及三个主要因素：
- en: '**Azure readiness**: Whether the discovered machines are suitable to run on
    Azure – in other words, are they ready for Azure?'
  id: totrans-273
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Azure 准备就绪**：发现的机器是否适合在 Azure 上运行 - 换句话说，它们是否准备好在 Azure 上运行？'
- en: '**Monthly cost estimate**: Provides the estimated cost required to run these
    VMs on Azure once they are migrated. The cost breakdown is also provided in terms
    of what the cost for compute and the cost for storage would be.'
  id: totrans-274
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**月度成本估算**：提供了在这些 VM 在 Azure 上迁移后运行所需的估算成本。成本细分也以计算成本和存储成本的形式提供。'
- en: '**Storage - Monthly cost estimate**: Estimated disk storage costs following
    migration.'
  id: totrans-275
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**存储 - 月度成本估算**：迁移后的磁盘存储成本估算。'
- en: 'These are the steps involved in viewing an assessment:'
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是查看评估所涉及的步骤：
- en: 'In Servers | Azure Migrate: Server Assessment, click the number next to Assessments
    visible in *Figure 3.23*.'
  id: totrans-277
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在服务器 | Azure 迁移：服务器评估中，单击 *图 3.23* 中可见的评估旁边的数字。
- en: In Assessments, select an assessment to open it. You will be able to see the
    assessment report as shown in *Figure 3.24*:![Reviewing assessment](img/B17160_03_24.jpg)
  id: totrans-278
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在评估中，选择一个评估以打开它。您将能够看到评估报告，如 *图 3.24* 中所示：![审查评估](img/B17160_03_24.jpg)
- en: 'Figure 3.24: Reviewing an assessment'
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.24：审查评估
- en: If you would like to recalculate based on another target region or any other
    properties, you can edit the properties (using the Edit properties option as shown
    in *Figure 3.24*) and re-run the assessment.
  id: totrans-280
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您想根据其他目标区域或任何其他属性重新计算，可以编辑属性（使用 *图 3.24* 中所示的编辑属性选项）并重新运行评估。
- en: Here, we have only discovered the VMs; however, we have not performed a dependency
    analysis. This assessment report can be exported to an Excel sheet and you can
    share it with the stakeholders.
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们只发现了 VM；但是，我们尚未执行依赖性分析。此评估报告可以导出到 Excel 表中，并与利益相关者共享。
- en: In the next section, we will see how to use the agents to set up the dependency
    analysis in Azure Migrate.
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，我们将看到如何使用代理设置 Azure 迁移中的依赖性分析。
- en: Dependency analysis
  id: totrans-283
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 依赖性分析
- en: Dependency analysis is only supported for VMWare VMs and Hyper V VMs. VMs discovered
    from other platforms such as Xen, or even from other cloud providers such as AWS
    and GCP, do not support dependency analysis.
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: 依赖性分析仅支持 VMWare VM 和 Hyper V VM。从其他平台（如 Xen）或甚至来自其他云提供商（如 AWS 和 GCP）发现的 VM 不支持依赖性分析。
- en: As mentioned in the *Service Map* section, we can only run the agent-based dependency
    analysis on the Hyper V environment. In the case of VMWare VMs, it supports both
    agentless and agent-based dependency analysis.
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 如“服务映射”部分所述，我们只能在 Hyper V 环境中运行基于代理的依赖性分析。对于 VMWare VM，它支持基于代理和无代理的依赖性分析。
- en: 'To start with the analysis, we need to associate a Log Analytics workspace
    with our Azure Migrate project. The following steps can be performed to associate
    the workspace with Azure Migrate: Server Assessment:'
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始分析，我们需要将日志分析工作区与我们的 Azure 迁移项目关联起来。可以执行以下步骤将工作区与 Azure 迁移：服务器评估关联起来：
- en: 'Once you have discovered the machines for assessment, in Servers | Azure Migrate:
    Server Assessment, click Overview.'
  id: totrans-287
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦您发现了要评估的机器，在服务器 | Azure 迁移：服务器评估中，单击概述。
- en: 'In Azure Migrate: Server Assessment, click Essentials.'
  id: totrans-288
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 Azure 迁移：服务器评估中，单击基本信息。
- en: In OMS Workspace, click Requires configuration, as shown in *Figure 3.25*:![Setting
    up the OMS configuration](img/B17160_03_25.jpg)
  id: totrans-289
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 OMS 工作区中，单击需要配置，如 *图 3.25* 中所示：![设置 OMS 配置](img/B17160_03_25.jpg)
- en: 'Figure 3.25: Setting up the OMS configuration'
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.25：设置 OMS 配置
- en: Once you select Requires configuration, as shown in *Figure 3.25*, you will
    be prompted to create a new Log Analytics workspace or associate an existing one
    in your Azure subscription.
  id: totrans-291
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦您选择了需要配置，如 *图 3.25* 中所示，您将被提示在 Azure 订阅中创建新的日志分析工作区或关联现有的工作区。
- en: If you do not have an existing workspace, create a new one as shown in *Figure 3.26*:![Creating
    a Log Analytics workspace](img/B17160_03_26.jpg)
  id: totrans-292
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您没有现有的工作区，请按 *图 3.26* 中所示创建一个新的工作区：![创建日志分析工作区](img/B17160_03_26.jpg)
- en: 'Figure 3.26: Creating a Log Analytics workspace'
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.26：创建日志分析工作区
- en: The next step is to download and install the agents for dependency visualization.
    For this, we need to navigate to Discovered servers and check the Dependencies
    (Agent-based) column. Sometimes, this column will be hidden, and you can enable
    it using the Columns option.
  id: totrans-294
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一步是下载并安装用于依赖性可视化的代理。为此，我们需要导航到发现的服务器并检查依赖性（基于代理）列。有时，此列将被隐藏，您可以使用“列”选项启用它。
- en: We will select Requires agent installation against our discovered VM, as shown
    in *Figure 3.27*, to install the agents. For ease of demonstration, let's install
    the agents on the LAMP server:![Selecting agent installation](img/B17160_03_27.jpg)
  id: totrans-295
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将选择 *图 3.27* 中所示的需要安装代理的发现的 VM，以安装代理。为了方便演示，让我们在 LAMP 服务器上安装代理：![选择代理安装](img/B17160_03_27.jpg)
- en: 'Figure 3.27: Selecting agent installation'
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.27：选择代理安装
- en: The portal will give you the steps to install the agents on both Windows and
    Linux servers. We are interested in the Linux servers, and so will follow that
    process. Also, we need to make a note of Workspace ID and Workspace key, shown
    in *Figure 3.28*. This is required in order to configure the agent:![Workspace
    information](img/B17160_03_28.jpg)
  id: totrans-297
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 门户将向您提供在 Windows 和 Linux 服务器上安装代理的步骤。我们对 Linux 服务器感兴趣，因此将遵循该过程。此外，我们需要记下 *图
    3.28* 中显示的工作区 ID 和工作区密钥。这是配置代理所需的：![工作区信息](img/B17160_03_28.jpg)
- en: 'Figure 3.28: Workspace information'
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.28：工作区信息
- en: You can either download it in Linux using the `wget` command, or download it
    to your computer and transfer it to a Linux machine using `SFTP/SCP`. Let's download
    it using `wget` and configure the agents on the Linux server.
  id: totrans-299
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以在 Linux 中使用 `wget` 命令下载它，也可以将其下载到计算机上，然后使用 `SFTP/SCP` 将其传输到 Linux 机器上。让我们使用
    `wget` 下载它，并在 Linux 服务器上配置代理。
- en: You can copy the link for the agents from the portal and pass that to `wget`
    to download the file, as shown in *Figure 3.29*:![Downloading agents](img/B17160_03_29.jpg)
  id: totrans-300
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以从门户复制代理的链接并将其传递给 `wget` 以下载文件，如 *图 3.29* 所示：![下载代理](img/B17160_03_29.jpg)
- en: 'Figure 3.29: Downloading agents'
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: '图 3.29: 下载代理'
- en: 'The MMA agent can be installed using the following command:'
  id: totrans-302
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: MMA 代理可以使用以下命令安装：
- en: '[PRE0]'
  id: totrans-303
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '`workspace id` and `workspace key` can be obtained from the Azure portal, as
    shown in *Figure 3.28*. At the time of writing this book, the latest version for
    the MMA agent is `1.13.33-0` and we install this as shown in *Figure 3.30*:'
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: '`workspace id` 和 `workspace key` 可以从 Azure 门户获取，如 *图 3.28* 所示。在撰写本书时，MMA 代理的最新版本为
    `1.13.33-0`，我们将按照 *图 3.30* 所示进行安装：'
- en: '![Installing the MMA agent](img/B17160_03_30.jpg)'
  id: totrans-305
  prefs: []
  type: TYPE_IMG
  zh: '![安装 MMA 代理](img/B17160_03_30.jpg)'
- en: 'Figure 3.30: Installing the MMA agent'
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: '图 3.30: 安装 MMA 代理'
- en: 'Now, we must download and install the dependency agent using the following
    commands:'
  id: totrans-307
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们必须下载并安装依赖代理，使用以下命令：
- en: '[PRE1]'
  id: totrans-308
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Once the dependency agent is installed, we will be able to see the dependencies
    from Azure Migrate: Server Assessment. Click Discovered servers. In the Dependencies
    column, click View dependencies to view the dependencies for the server. It''s
    expected to take some time to load the dependencies.'
  id: totrans-309
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装依赖代理后，我们将能够从 Azure 迁移中看到依赖关系：服务器评估。单击“已发现的服务器”。在“依赖性”列中，单击“查看依赖性”以查看服务器的依赖关系。加载依赖性预计需要一些时间。
- en: You can also run Kusto queries against the Log Analytics workspace to review
    the connections and validate the data.
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以对 Log Analytics 工作区运行 Kusto 查询，以查看连接并验证数据。
- en: 'With that, we have successfully assessed the workloads that are deployed in
    the Hyper-V host and set up dependency analysis. We have used Hyper-V for a demo.
    However, in your environment, you may be using VMWare, so *Table 3.2* displays
    a list of links that can be used to assess other environments, along with the
    documentation for Hyper-V:'
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: 通过这样，我们已成功评估了部署在 Hyper-V 主机中的工作负载并设置了依赖性分析。我们在演示中使用了 Hyper-V。但是，在您的环境中，您可能正在使用
    VMWare，因此 *表 3.2* 显示了可以用于评估其他环境的链接列表，以及 Hyper-V 文档：
- en: '| **Platform** | **Discover** | **Assess** |'
  id: totrans-312
  prefs: []
  type: TYPE_TB
  zh: '| **平台** | **发现** | **评估** |'
- en: '| --- | --- | --- |'
  id: totrans-313
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| **Hyper-V** | [https://docs.microsoft.com/azure/migrate/tutorial-discover-hyper-v](https://docs.microsoft.com/azure/migrate/tutorial-discover-hyper-v)
    | [https://docs.microsoft.com/azure/migrate/tutorial-assess-hyper-v](https://docs.microsoft.com/azure/migrate/tutorial-assess-hyper-v)
    |'
  id: totrans-314
  prefs: []
  type: TYPE_TB
  zh: '| **Hyper-V** | [https://docs.microsoft.com/azure/migrate/tutorial-discover-hyper-v](https://docs.microsoft.com/azure/migrate/tutorial-discover-hyper-v)
    | [https://docs.microsoft.com/azure/migrate/tutorial-assess-hyper-v](https://docs.microsoft.com/azure/migrate/tutorial-assess-hyper-v)
    |'
- en: '| **VMWare** | [https://docs.microsoft.com/azure/migrate/tutorial-discover-vmware](https://docs.microsoft.com/azure/migrate/tutorial-discover-vmware)
    | [https://docs.microsoft.com/azure/migrate/tutorial-assess-vmware-azure-vm](https://docs.microsoft.com/azure/migrate/tutorial-assess-vmware-azure-vm)
    |'
  id: totrans-315
  prefs: []
  type: TYPE_TB
  zh: '| **VMWare** | [https://docs.microsoft.com/azure/migrate/tutorial-discover-vmware](https://docs.microsoft.com/azure/migrate/tutorial-discover-vmware)
    | [https://docs.microsoft.com/azure/migrate/tutorial-assess-vmware-azure-vm](https://docs.microsoft.com/azure/migrate/tutorial-assess-vmware-azure-vm)
    |'
- en: '| **Physical Servers** | [https://docs.microsoft.com/azure/migrate/tutorial-discover-physical](https://docs.microsoft.com/azure/migrate/tutorial-discover-physical)
    | [https://docs.microsoft.com/azure/migrate/tutorial-assess-physical](https://docs.microsoft.com/azure/migrate/tutorial-assess-physical)
    |'
  id: totrans-316
  prefs: []
  type: TYPE_TB
  zh: '| **物理服务器** | [https://docs.microsoft.com/azure/migrate/tutorial-discover-physical](https://docs.microsoft.com/azure/migrate/tutorial-discover-physical)
    | [https://docs.microsoft.com/azure/migrate/tutorial-assess-physical](https://docs.microsoft.com/azure/migrate/tutorial-assess-physical)
    |'
- en: '| **AWS** | [https://docs.microsoft.com/azure/migrate/tutorial-discover-aws](https://docs.microsoft.com/azure/migrate/tutorial-discover-aws)
    | [https://docs.microsoft.com/azure/migrate/tutorial-assess-aws](https://docs.microsoft.com/azure/migrate/tutorial-assess-aws)
    |'
  id: totrans-317
  prefs: []
  type: TYPE_TB
  zh: '| **AWS** | [https://docs.microsoft.com/azure/migrate/tutorial-discover-aws](https://docs.microsoft.com/azure/migrate/tutorial-discover-aws)
    | [https://docs.microsoft.com/azure/migrate/tutorial-assess-aws](https://docs.microsoft.com/azure/migrate/tutorial-assess-aws)
    |'
- en: '| **GCP** | [https://docs.microsoft.com/azure/migrate/tutorial-discover-gcp](https://docs.microsoft.com/azure/migrate/tutorial-discover-gcp)
    | [https://docs.microsoft.com/azure/migrate/tutorial-assess-gcp](https://docs.microsoft.com/azure/migrate/tutorial-assess-gcp)
    |'
  id: totrans-318
  prefs: []
  type: TYPE_TB
  zh: '| **GCP** | [https://docs.microsoft.com/azure/migrate/tutorial-discover-gcp](https://docs.microsoft.com/azure/migrate/tutorial-discover-gcp)
    | [https://docs.microsoft.com/azure/migrate/tutorial-assess-gcp](https://docs.microsoft.com/azure/migrate/tutorial-assess-gcp)
    |'
- en: '| **Import CSV** | N/A | [https://docs.microsoft.com/azure/migrate/tutorial-discover-import](https://docs.microsoft.com/azure/migrate/tutorial-discover-import)
    |'
  id: totrans-319
  prefs: []
  type: TYPE_TB
  zh: '| **导入 CSV** | N/A | [https://docs.microsoft.com/azure/migrate/tutorial-discover-import](https://docs.microsoft.com/azure/migrate/tutorial-discover-import)
    |'
- en: 'Table 3.2: Assessment documentation for other platforms'
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: '表 3.2: 其他平台的评估文档'
- en: The rationale behind this hands-on lab was to give you an idea of the steps
    and familiarize you with the process. Before we conclude this chapter, let's quickly
    go through a quick summary of the topics we have discussed so far.
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: 这个实验室的目的是让你了解步骤并熟悉这个过程。在我们结束本章之前，让我们快速浏览一下我们到目前为止讨论过的主题的简要总结。
- en: Summary
  id: totrans-322
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 总结
- en: Assessing the current architecture and workloads is a very important part of
    a migration project, as we learned in this chapter. For this, we used Azure Migrate
    to create a solid assessment report. We also discussed tools for calculating cost
    savings on Azure and went through a hands-on lab for a migration assessment.
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: 评估当前架构和工作负载是迁移项目的一个非常重要的部分，正如我们在本章中所学到的。为此，我们使用 Azure 迁移创建了一个扎实的评估报告。我们还讨论了在
    Azure 上计算成本节省的工具，并进行了迁移评估的实验室操作。
- en: In this chapter, we also discussed some of the popular workloads on Linux, including
    the LAMP stack and database servers. We also covered some of the more technically
    difficult scenarios regarding high-performance computing, clustering, shared storage,
    and SAP applications.
  id: totrans-324
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们还讨论了一些流行的 Linux 工作负载，包括 LAMP 栈和数据库服务器。我们还涵盖了一些更具技术难度的场景，包括高性能计算、集群、共享存储和
    SAP 应用程序。
- en: In the *Pre-project preparations* section, the importance of involving the right
    project team members was also covered as this ensures that you have all the necessary
    skills, including networking and Linux administration, for your migration project.
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: 在“项目前准备”部分，还涵盖了涉及正确的项目团队成员的重要性，这可以确保您拥有所有必要的技能，包括网络和Linux管理，用于您的迁移项目。
- en: The next chapter will focus on practical migration, and you will have the opportunity
    to use everything learned so far in a hands-on lab.
  id: totrans-326
  prefs: []
  type: TYPE_NORMAL
  zh: 下一章将专注于实际迁移，您将有机会在实验室中运用到目前为止学到的一切。
